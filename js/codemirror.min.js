(function(a){if(typeof exports=="object"&&typeof module=="object"){module.exports=a()}else{if(typeof define=="function"&&define.amd){return define([],a)}else{(this||window).CodeMirror=a()}}})(function(){var d2=navigator.userAgent;var ed=navigator.platform;var co=/gecko\/\d/i.test(d2);var eP=/MSIE \d/.test(d2);var bI=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(d2);var dL=eP||bI;var k=dL&&(eP?document.documentMode||6:bI[1]);var c0=/WebKit\//.test(d2);var dO=c0&&/Qt\/\d+\.\d+/.test(d2);var dd=/Chrome\//.test(d2);var d5=/Opera\//.test(d2);var aB=/Apple Computer/.test(navigator.vendor);var c7=/Mac OS X 1\d\D([8-9]|\d\d)\D/.test(d2);var fB=/PhantomJS/.test(d2);var e7=/AppleWebKit/.test(d2)&&/Mobile\/\w+/.test(d2);var ej=e7||/Android|webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(d2);var b6=e7||/Mac/.test(ed);var fQ=/\bCrOS\b/.test(d2);var aO=/win/i.test(ed);var aY=d5&&d2.match(/Version\/(\d*\.\d*)/);if(aY){aY=Number(aY[1])}if(aY&&aY>=15){d5=false;c0=true}var bP=b6&&(dO||d5&&(aY==null||aY<12.11));var gi=co||(dL&&k>=9);var gl=false,a6=false;function H(gt,gv){if(!(this instanceof H)){return new H(gt,gv)}this.options=gv=gv?aM(gv):{};aM(e9,gv,false);ce(gv);var gz=gv.value;if(typeof gz=="string"){gz=new ar(gz,gv.mode,null,gv.lineSeparator)}this.doc=gz;var gu=new H.inputStyles[gv.inputStyle](this);var gy=this.display=new eM(gt,gz,gu);gy.wrapper.CodeMirror=this;ef(this);cO(this);if(gv.lineWrapping){this.display.wrapper.className+=" CodeMirror-wrap"}if(gv.autofocus&&!ej){gy.input.focus()}aC(this);this.state={keyMaps:[],overlays:[],modeGen:0,overwrite:false,delayingBlurEvent:false,focused:false,suppressEdits:false,pasteIncoming:false,cutIncoming:false,selectingText:false,draggingText:false,highlight:new gr(),keySeq:null,specialChars:null};var gs=this;if(dL&&k<11){setTimeout(function(){gs.display.input.reset(true)},20)}fY(this);bi();cI(this);this.curOp.forceUpdate=true;ee(this,gz);if((gv.autofocus&&!ej)||gs.hasFocus()){setTimeout(cv(cB,this),20)}else{aU(this)}for(var gx in be){if(be.hasOwnProperty(gx)){be[gx](this,gv[gx],cc)}}d7(this);if(gv.finishInit){gv.finishInit(this)}for(var gw=0;gw<a7.length;++gw){a7[gw](this)}al(this);if(c0&&gv.lineWrapping&&getComputedStyle(gy.lineDiv).textRendering=="optimizelegibility"){gy.lineDiv.style.textRendering="auto"}}function eM(gs,gu,gt){var gv=this;this.input=gt;gv.scrollbarFiller=gb("div",null,"CodeMirror-scrollbar-filler");gv.scrollbarFiller.setAttribute("cm-not-content","true");gv.gutterFiller=gb("div",null,"CodeMirror-gutter-filler");gv.gutterFiller.setAttribute("cm-not-content","true");gv.lineDiv=gb("div",null,"CodeMirror-code");gv.selectionDiv=gb("div",null,null,"position: relative; z-index: 1");gv.cursorDiv=gb("div",null,"CodeMirror-cursors");gv.measure=gb("div",null,"CodeMirror-measure");gv.lineMeasure=gb("div",null,"CodeMirror-measure");gv.lineSpace=gb("div",[gv.measure,gv.lineMeasure,gv.selectionDiv,gv.cursorDiv,gv.lineDiv],null,"position: relative; outline: none");gv.mover=gb("div",[gb("div",[gv.lineSpace],"CodeMirror-lines")],null,"position: relative");gv.sizer=gb("div",[gv.mover],"CodeMirror-sizer");gv.sizerWidth=null;gv.heightForcer=gb("div",null,null,"position: absolute; height: "+dK+"px; width: 1px;");gv.gutters=gb("div",null,"CodeMirror-gutters");gv.lineGutter=null;gv.scroller=gb("div",[gv.sizer,gv.heightForcer,gv.gutters],"CodeMirror-scroll");gv.scroller.setAttribute("tabIndex","-1");gv.wrapper=gb("div",[gv.scrollbarFiller,gv.gutterFiller,gv.scroller],"CodeMirror");if(dL&&k<8){gv.gutters.style.zIndex=-1;gv.scroller.style.paddingRight=0}if(!c0&&!(co&&ej)){gv.scroller.draggable=true}if(gs){if(gs.appendChild){gs.appendChild(gv.wrapper)}else{gs(gv.wrapper)}}gv.viewFrom=gv.viewTo=gu.first;gv.reportedViewFrom=gv.reportedViewTo=gu.first;gv.view=[];gv.renderedView=null;gv.externalMeasured=null;gv.viewOffset=0;gv.lastWrapHeight=gv.lastWrapWidth=0;gv.updateLineNumbers=null;gv.nativeBarWidth=gv.barHeight=gv.barWidth=0;gv.scrollbarsClipped=false;gv.lineNumWidth=gv.lineNumInnerWidth=gv.lineNumChars=null;gv.alignWidgets=false;gv.cachedCharWidth=gv.cachedTextHeight=gv.cachedPaddingH=null;gv.maxLine=null;gv.maxLineLength=0;gv.maxLineChanged=false;gv.wheelDX=gv.wheelDY=gv.wheelStartX=gv.wheelStartY=null;gv.shift=false;gv.selForContextMenu=null;gv.activeTouch=null;gt.init(gv)}function bq(gs){gs.doc.mode=H.getMode(gs.options,gs.doc.modeOption);ep(gs)}function ep(gs){gs.doc.iter(function(gt){if(gt.stateAfter){gt.stateAfter=null}if(gt.styles){gt.styles=null}});gs.doc.frontier=gs.doc.first;ei(gs,100);gs.state.modeGen++;if(gs.curOp){ah(gs)}}function eK(gs){if(gs.options.lineWrapping){fH(gs.display.wrapper,"CodeMirror-wrap");gs.display.sizer.style.minWidth="";gs.display.sizerWidth=null}else{f(gs.display.wrapper,"CodeMirror-wrap");h(gs)}X(gs);ah(gs);aj(gs);setTimeout(function(){e4(gs)},100)}function bd(gs){var gu=aX(gs.display),gt=gs.options.lineWrapping;var gv=gt&&Math.max(5,gs.display.scroller.clientWidth/dE(gs.display)-3);return function(gx){if(fD(gs.doc,gx)){return 0}var gw=0;if(gx.widgets){for(var gy=0;gy<gx.widgets.length;gy++){if(gx.widgets[gy].height){gw+=gx.widgets[gy].height}}}if(gt){return gw+(Math.ceil(gx.text.length/gv)||1)*gu}else{return gw+gu}}}function X(gs){var gu=gs.doc,gt=bd(gs);gu.iter(function(gv){var gw=gt(gv);if(gw!=gv.height){ge(gv,gw)}})}function cO(gs){gs.display.wrapper.className=gs.display.wrapper.className.replace(/\s*cm-s-\S+/g,"")+gs.options.theme.replace(/(^|\s)\s*/g," cm-s-");aj(gs)}function dx(gs){ef(gs);ah(gs);setTimeout(function(){eI(gs)},20)}function ef(gs){var gt=gs.display.gutters,gx=gs.options.gutters;d3(gt);for(var gu=0;gu<gx.length;++gu){var gv=gx[gu];var gw=gt.appendChild(gb("div",null,"CodeMirror-gutter "+gv));if(gv=="CodeMirror-linenumbers"){gs.display.lineGutter=gw;gw.style.width=(gs.display.lineNumWidth||1)+"px"}}gt.style.display=gu?"":"none";c4(gs)}function c4(gs){var gt=gs.display.gutters.offsetWidth;gs.display.sizer.style.marginLeft=gt+"px"}function er(gu){if(gu.height==0){return 0}var gt=gu.text.length,gs,gw=gu;while(gs=eT(gw)){var gv=gs.find(0,true);gw=gv.from.line;gt+=gv.from.ch-gv.to.ch}gw=gu;while(gs=ey(gw)){var gv=gs.find(0,true);gt-=gw.text.length-gv.from.ch;gw=gv.to.line;gt+=gw.text.length-gv.to.ch}return gt}function h(gs){var gu=gs.display,gt=gs.doc;gu.maxLine=fm(gt,gt.first);gu.maxLineLength=er(gu.maxLine);gu.maxLineChanged=true;gt.iter(function(gw){var gv=er(gw);if(gv>gu.maxLineLength){gu.maxLineLength=gv;gu.maxLine=gw}})}function ce(gs){var gt=di(gs.gutters,"CodeMirror-linenumbers");if(gt==-1&&gs.lineNumbers){gs.gutters=gs.gutters.concat(["CodeMirror-linenumbers"])}else{if(gt>-1&&!gs.lineNumbers){gs.gutters=gs.gutters.slice(0);gs.gutters.splice(gt,1)}}}function dB(gs){var gv=gs.display,gu=gv.gutters.offsetWidth;var gt=Math.round(gs.doc.height+bH(gs.display));return{clientHeight:gv.scroller.clientHeight,viewHeight:gv.wrapper.clientHeight,scrollWidth:gv.scroller.scrollWidth,clientWidth:gv.scroller.clientWidth,viewWidth:gv.wrapper.clientWidth,barLeft:gs.options.fixedGutter?gu:0,docHeight:gt,scrollHeight:gt+cT(gs)+gv.barHeight,nativeBarWidth:gv.nativeBarWidth,gutterWidth:gu}}function dl(gu,gt,gs){this.cm=gs;var gv=this.vert=gb("div",[gb("div",null,null,"min-width: 1px")],"CodeMirror-vscrollbar");var gw=this.horiz=gb("div",[gb("div",null,null,"height: 100%; min-height: 1px")],"CodeMirror-hscrollbar");gu(gv);gu(gw);bW(gv,"scroll",function(){if(gv.clientHeight){gt(gv.scrollTop,"vertical")}});bW(gw,"scroll",function(){if(gw.clientWidth){gt(gw.scrollLeft,"horizontal")}});this.checkedZeroWidth=false;if(dL&&k<8){this.horiz.style.minHeight=this.vert.style.minWidth="18px"}}dl.prototype=aM({update:function(gv){var gw=gv.scrollWidth>gv.clientWidth+1;var gu=gv.scrollHeight>gv.clientHeight+1;var gx=gv.nativeBarWidth;if(gu){this.vert.style.display="block";this.vert.style.bottom=gw?gx+"px":"0";var gt=gv.viewHeight-(gw?gx:0);this.vert.firstChild.style.height=Math.max(0,gv.scrollHeight-gv.clientHeight+gt)+"px"}else{this.vert.style.display="";this.vert.firstChild.style.height="0"}if(gw){this.horiz.style.display="block";this.horiz.style.right=gu?gx+"px":"0";this.horiz.style.left=gv.barLeft+"px";var gs=gv.viewWidth-gv.barLeft-(gu?gx:0);this.horiz.firstChild.style.width=(gv.scrollWidth-gv.clientWidth+gs)+"px"}else{this.horiz.style.display="";this.horiz.firstChild.style.width="0"}if(!this.checkedZeroWidth&&gv.clientHeight>0){if(gx==0){this.zeroWidthHack()}this.checkedZeroWidth=true}return{right:gu?gx:0,bottom:gw?gx:0}},setScrollLeft:function(gs){if(this.horiz.scrollLeft!=gs){this.horiz.scrollLeft=gs}if(this.disableHoriz){this.enableZeroWidthBar(this.horiz,this.disableHoriz)}},setScrollTop:function(gs){if(this.vert.scrollTop!=gs){this.vert.scrollTop=gs}if(this.disableVert){this.enableZeroWidthBar(this.vert,this.disableVert)}},zeroWidthHack:function(){var gs=b6&&!c7?"12px":"18px";this.horiz.style.height=this.vert.style.width=gs;this.horiz.style.pointerEvents=this.vert.style.pointerEvents="none";this.disableHoriz=new gr;this.disableVert=new gr},enableZeroWidthBar:function(gt,gs){gt.style.pointerEvents="auto";function gu(){var gw=gt.getBoundingClientRect();var gv=document.elementFromPoint(gw.left+1,gw.bottom-1);if(gv!=gt){gt.style.pointerEvents="none"}else{gs.set(1000,gu)}}gs.set(1000,gu)},clear:function(){var gs=this.horiz.parentNode;gs.removeChild(this.horiz);gs.removeChild(this.vert)}},dl.prototype);function fa(){}fa.prototype=aM({update:function(){return{bottom:0,right:0}},setScrollLeft:function(){},setScrollTop:function(){},clear:function(){}},fa.prototype);H.scrollbarModel={"native":dl,"null":fa};function aC(gs){if(gs.display.scrollbars){gs.display.scrollbars.clear();if(gs.display.scrollbars.addClass){f(gs.display.wrapper,gs.display.scrollbars.addClass)}}gs.display.scrollbars=new H.scrollbarModel[gs.options.scrollbarStyle](function(gt){gs.display.wrapper.insertBefore(gt,gs.display.scrollbarFiller);bW(gt,"mousedown",function(){if(gs.state.focused){setTimeout(function(){gs.display.input.focus()},0)}});gt.setAttribute("cm-not-content","true")},function(gu,gt){if(gt=="horizontal"){bD(gs,gu)}else{N(gs,gu)}},gs);if(gs.display.scrollbars.addClass){fH(gs.display.wrapper,gs.display.scrollbars.addClass)}}function e4(gu,gw){if(!gw){gw=dB(gu)}var gt=gu.display.barWidth,gs=gu.display.barHeight;aT(gu,gw);for(var gv=0;gv<4&&gt!=gu.display.barWidth||gs!=gu.display.barHeight;gv++){if(gt!=gu.display.barWidth&&gu.options.lineWrapping){a8(gu)}aT(gu,dB(gu));gt=gu.display.barWidth;gs=gu.display.barHeight}}function aT(gs,gt){var gv=gs.display;var gu=gv.scrollbars.update(gt);gv.sizer.style.paddingRight=(gv.barWidth=gu.right)+"px";gv.sizer.style.paddingBottom=(gv.barHeight=gu.bottom)+"px";gv.heightForcer.style.borderBottom=gu.bottom+"px solid transparent";if(gu.right&&gu.bottom){gv.scrollbarFiller.style.display="block";gv.scrollbarFiller.style.height=gu.bottom+"px";gv.scrollbarFiller.style.width=gu.right+"px"}else{gv.scrollbarFiller.style.display=""}if(gu.bottom&&gs.options.coverGutterNextToScrollbar&&gs.options.fixedGutter){gv.gutterFiller.style.display="block";gv.gutterFiller.style.height=gu.bottom+"px";gv.gutterFiller.style.width=gt.gutterWidth+"px"}else{gv.gutterFiller.style.display=""}}function b5(gv,gz,gu){var gw=gu&&gu.top!=null?Math.max(0,gu.top):gv.scroller.scrollTop;gw=Math.floor(gw-ff(gv));var gs=gu&&gu.bottom!=null?gu.bottom:gw+gv.wrapper.clientHeight;var gx=bF(gz,gw),gy=bF(gz,gs);if(gu&&gu.ensure){var gt=gu.ensure.from.line,gA=gu.ensure.to.line;if(gt<gx){gx=gt;gy=bF(gz,bL(fm(gz,gt))+gv.wrapper.clientHeight)}else{if(Math.min(gA,gz.lastLine())>=gy){gx=bF(gz,bL(fm(gz,gA))-gv.wrapper.clientHeight);gy=gA}}}return{from:gx,to:Math.max(gy,gx+1)}}function eI(gA){var gy=gA.display,gz=gy.view;if(!gy.alignWidgets&&(!gy.gutters.firstChild||!gA.options.fixedGutter)){return}var gw=dY(gy)-gy.scroller.scrollLeft+gA.doc.scrollLeft;var gs=gy.gutters.offsetWidth,gt=gw+"px";for(var gv=0;gv<gz.length;gv++){if(!gz[gv].hidden){if(gA.options.fixedGutter){if(gz[gv].gutter){gz[gv].gutter.style.left=gt}if(gz[gv].gutterBackground){gz[gv].gutterBackground.style.left=gt}}var gx=gz[gv].alignable;if(gx){for(var gu=0;gu<gx.length;gu++){gx[gu].style.left=gt}}}}if(gA.options.fixedGutter){gy.gutters.style.left=(gw+gs)+"px"}}function d7(gs){if(!gs.options.lineNumbers){return false}var gx=gs.doc,gt=ew(gs.options,gx.first+gx.size-1),gw=gs.display;if(gt.length!=gw.lineNumChars){var gy=gw.measure.appendChild(gb("div",[gb("div",gt)],"CodeMirror-linenumber CodeMirror-gutter-elt"));var gu=gy.firstChild.offsetWidth,gv=gy.offsetWidth-gu;gw.lineGutter.style.width="";gw.lineNumInnerWidth=Math.max(gu,gw.lineGutter.offsetWidth-gv)+1;gw.lineNumWidth=gw.lineNumInnerWidth+gv;gw.lineNumChars=gw.lineNumInnerWidth?gt.length:-1;gw.lineGutter.style.width=gw.lineNumWidth+"px";c4(gs);return true}return false}function ew(gs,gt){return String(gs.lineNumberFormatter(gt+gs.firstLineNumber))}function dY(gs){return gs.scroller.getBoundingClientRect().left-gs.sizer.getBoundingClientRect().left}function aH(gt,gs,gu){var gv=gt.display;this.viewport=gs;this.visible=b5(gv,gt.doc,gs);this.editorIsHidden=!gv.wrapper.offsetWidth;this.wrapperHeight=gv.wrapper.clientHeight;this.wrapperWidth=gv.wrapper.clientWidth;this.oldDisplayWidth=dm(gt);this.force=gu;this.dims=fk(gt);this.events=[]}aH.prototype.signal=function(gt,gs){if(fp(gt,gs)){this.events.push(arguments)}};aH.prototype.finish=function(){for(var gs=0;gs<this.events.length;gs++){aD.apply(null,this.events[gs])}};function J(gs){var gt=gs.display;if(!gt.scrollbarsClipped&&gt.scroller.offsetWidth){gt.nativeBarWidth=gt.scroller.offsetWidth-gt.scroller.clientWidth;gt.heightForcer.style.height=cT(gs)+"px";gt.sizer.style.marginBottom=-gt.nativeBarWidth+"px";gt.sizer.style.borderRightWidth=cT(gs)+"px";gt.scrollbarsClipped=true}}function B(gB,gv){var gw=gB.display,gA=gB.doc;if(gv.editorIsHidden){eB(gB);return false}if(!gv.force&&gv.visible.from>=gw.viewFrom&&gv.visible.to<=gw.viewTo&&(gw.updateLineNumbers==null||gw.updateLineNumbers>=gw.viewTo)&&gw.renderedView==gw.view&&dc(gB)==0){return false}if(d7(gB)){eB(gB);gv.dims=fk(gB)}var gu=gA.first+gA.size;var gy=Math.max(gv.visible.from-gB.options.viewportMargin,gA.first);var gz=Math.min(gu,gv.visible.to+gB.options.viewportMargin);if(gw.viewFrom<gy&&gy-gw.viewFrom<20){gy=Math.max(gA.first,gw.viewFrom)}if(gw.viewTo>gz&&gw.viewTo-gz<20){gz=Math.min(gu,gw.viewTo)}if(a6){gy=aV(gB.doc,gy);gz=d4(gB.doc,gz)}var gt=gy!=gw.viewFrom||gz!=gw.viewTo||gw.lastWrapHeight!=gv.wrapperHeight||gw.lastWrapWidth!=gv.wrapperWidth;cR(gB,gy,gz);gw.viewOffset=bL(fm(gB.doc,gw.viewFrom));gB.display.mover.style.top=gw.viewOffset+"px";var gs=dc(gB);if(!gt&&gs==0&&!gv.force&&gw.renderedView==gw.view&&(gw.updateLineNumbers==null||gw.updateLineNumbers>=gw.viewTo)){return false}var gx=dP();if(gs>4){gw.lineDiv.style.display="none"}cm(gB,gw.updateLineNumbers,gv.dims);if(gs>4){gw.lineDiv.style.display=""}gw.renderedView=gw.view;if(gx&&dP()!=gx&&gx.offsetHeight){gx.focus()}d3(gw.cursorDiv);d3(gw.selectionDiv);gw.gutters.style.height=gw.sizer.style.minHeight=0;if(gt){gw.lastWrapHeight=gv.wrapperHeight;gw.lastWrapWidth=gv.wrapperWidth;ei(gB,400)}gw.updateLineNumbers=null;return true}function cj(gt,gw){var gs=gw.viewport;for(var gv=true;;gv=false){if(!gv||!gt.options.lineWrapping||gw.oldDisplayWidth==dm(gt)){if(gs&&gs.top!=null){gs={top:Math.min(gt.doc.height+bH(gt.display)-cV(gt),gs.top)}}gw.visible=b5(gt.display,gt.doc,gs);if(gw.visible.from>=gt.display.viewFrom&&gw.visible.to<=gt.display.viewTo){break}}if(!B(gt,gw)){break}a8(gt);var gu=dB(gt);bB(gt);e4(gt,gu);dA(gt,gu)}gw.signal(gt,"update",gt);if(gt.display.viewFrom!=gt.display.reportedViewFrom||gt.display.viewTo!=gt.display.reportedViewTo){gw.signal(gt,"viewportChange",gt,gt.display.viewFrom,gt.display.viewTo);gt.display.reportedViewFrom=gt.display.viewFrom;gt.display.reportedViewTo=gt.display.viewTo}}function dU(gt,gs){var gv=new aH(gt,gs);if(B(gt,gv)){a8(gt);cj(gt,gv);var gu=dB(gt);bB(gt);e4(gt,gu);dA(gt,gu);gv.finish()}}function dA(gs,gt){gs.display.sizer.style.minHeight=gt.docHeight+"px";gs.display.heightForcer.style.top=gt.docHeight+"px";gs.display.gutters.style.height=(gt.docHeight+gs.display.barHeight+cT(gs))+"px"}function a8(gz){var gx=gz.display;var gt=gx.lineDiv.offsetTop;for(var gu=0;gu<gx.view.length;gu++){var gA=gx.view[gu],gB;if(gA.hidden){continue}if(dL&&k<8){var gw=gA.node.offsetTop+gA.node.offsetHeight;gB=gw-gt;gt=gw}else{var gv=gA.node.getBoundingClientRect();gB=gv.bottom-gv.top}var gy=gA.line.height-gB;if(gB<2){gB=aX(gx)}if(gy>0.001||gy<-0.001){ge(gA.line,gB);cb(gA.line);if(gA.rest){for(var gs=0;gs<gA.rest.length;gs++){cb(gA.rest[gs])}}}}}function cb(gs){if(gs.widgets){for(var gt=0;gt<gs.widgets.length;++gt){gs.widgets[gt].height=gs.widgets[gt].node.parentNode.offsetHeight}}}function fk(gs){var gx=gs.display,gv={},gu={};var gw=gx.gutters.clientLeft;for(var gy=gx.gutters.firstChild,gt=0;gy;gy=gy.nextSibling,++gt){gv[gs.options.gutters[gt]]=gy.offsetLeft+gy.clientLeft+gw;gu[gs.options.gutters[gt]]=gy.clientWidth}return{fixedPos:dY(gx),gutterTotalWidth:gx.gutters.offsetWidth,gutterLeft:gv,gutterWidth:gu,wrapperWidth:gx.wrapper.clientWidth}}function cm(gD,gu,gC){var gz=gD.display,gF=gD.options.lineNumbers;var gs=gz.lineDiv,gE=gs.firstChild;function gy(gH){var gG=gH.nextSibling;if(c0&&b6&&gD.display.currentWheelTarget==gH){gH.style.display="none"}else{gH.parentNode.removeChild(gH)}return gG}var gA=gz.view,gx=gz.viewFrom;for(var gv=0;gv<gA.length;gv++){var gw=gA[gv];if(gw.hidden){}else{if(!gw.node||gw.node.parentNode!=gs){var gt=aE(gD,gw,gx,gC);gs.insertBefore(gt,gE)}else{while(gE!=gw.node){gE=gy(gE)}var gB=gF&&gu!=null&&gu<=gx&&gw.lineNumber;if(gw.changes){if(di(gw.changes,"gutter")>-1){gB=false}ab(gD,gw,gx,gC)}if(gB){d3(gw.lineNumber);gw.lineNumber.appendChild(document.createTextNode(ew(gD.options,gx)))}gE=gw.node.nextSibling}}gx+=gw.size}while(gE){gE=gy(gE)}}function ab(gs,gu,gw,gx){for(var gt=0;gt<gu.changes.length;gt++){var gv=gu.changes[gt];if(gv=="text"){fs(gs,gu)}else{if(gv=="gutter"){dg(gs,gu,gw,gx)}else{if(gv=="class"){dH(gu)}else{if(gv=="widget"){an(gs,gu,gx)}}}}}gu.changes=null}function fO(gs){if(gs.node==gs.text){gs.node=gb("div",null,null,"position: relative");if(gs.text.parentNode){gs.text.parentNode.replaceChild(gs.node,gs.text)}gs.node.appendChild(gs.text);if(dL&&k<8){gs.node.style.zIndex=2}}return gs.node}function eA(gt){var gs=gt.bgClass?gt.bgClass+" "+(gt.line.bgClass||""):gt.line.bgClass;if(gs){gs+=" CodeMirror-linebackground"}if(gt.background){if(gs){gt.background.className=gs}else{gt.background.parentNode.removeChild(gt.background);gt.background=null}}else{if(gs){var gu=fO(gt);gt.background=gu.insertBefore(gb("div",null,gs),gu.firstChild)}}}function dW(gs,gt){var gu=gs.display.externalMeasured;if(gu&&gu.line==gt.line){gs.display.externalMeasured=null;gt.measure=gu.measure;return gu.built}return eW(gs,gt)}function fs(gs,gv){var gt=gv.text.className;var gu=dW(gs,gv);if(gv.text==gv.node){gv.node=gu.pre}gv.text.parentNode.replaceChild(gu.pre,gv.text);gv.text=gu.pre;if(gu.bgClass!=gv.bgClass||gu.textClass!=gv.textClass){gv.bgClass=gu.bgClass;gv.textClass=gu.textClass;dH(gv)}else{if(gt){gv.text.className=gt}}}function dH(gt){eA(gt);if(gt.line.wrapClass){fO(gt).className=gt.line.wrapClass}else{if(gt.node!=gt.text){gt.node.className=""}}var gs=gt.textClass?gt.textClass+" "+(gt.line.textClass||""):gt.line.textClass;gt.text.className=gs||""}function dg(gA,gy,gx,gz){if(gy.gutter){gy.node.removeChild(gy.gutter);gy.gutter=null}if(gy.gutterBackground){gy.node.removeChild(gy.gutterBackground);gy.gutterBackground=null}if(gy.line.gutterClass){var gt=fO(gy);gy.gutterBackground=gb("div",null,"CodeMirror-gutter-background "+gy.line.gutterClass,"left: "+(gA.options.fixedGutter?gz.fixedPos:-gz.gutterTotalWidth)+"px; width: "+gz.gutterTotalWidth+"px");gt.insertBefore(gy.gutterBackground,gy.text)}var gv=gy.line.gutterMarkers;if(gA.options.lineNumbers||gv){var gt=fO(gy);var gw=gy.gutter=gb("div",null,"CodeMirror-gutter-wrapper","left: "+(gA.options.fixedGutter?gz.fixedPos:-gz.gutterTotalWidth)+"px");gA.display.input.setUneditable(gw);gt.insertBefore(gw,gy.text);if(gy.line.gutterClass){gw.className+=" "+gy.line.gutterClass}if(gA.options.lineNumbers&&(!gv||!gv["CodeMirror-linenumbers"])){gy.lineNumber=gw.appendChild(gb("div",ew(gA.options,gx),"CodeMirror-linenumber CodeMirror-gutter-elt","left: "+gz.gutterLeft["CodeMirror-linenumbers"]+"px; width: "+gA.display.lineNumInnerWidth+"px"))}if(gv){for(var gu=0;gu<gA.options.gutters.length;++gu){var gs=gA.options.gutters[gu],gB=gv.hasOwnProperty(gs)&&gv[gs];if(gB){gw.appendChild(gb("div",[gB],"CodeMirror-gutter-elt","left: "+gz.gutterLeft[gs]+"px; width: "+gz.gutterWidth[gs]+"px"))}}}}}function an(gs,gt,gw){if(gt.alignable){gt.alignable=null}for(var gv=gt.node.firstChild,gu;gv;gv=gu){var gu=gv.nextSibling;if(gv.className=="CodeMirror-linewidget"){gt.node.removeChild(gv)}}fA(gs,gt,gw)}function aE(gs,gu,gv,gw){var gt=dW(gs,gu);gu.text=gu.node=gt.pre;if(gt.bgClass){gu.bgClass=gt.bgClass}if(gt.textClass){gu.textClass=gt.textClass}dH(gu);dg(gs,gu,gv,gw);fA(gs,gu,gw);return gu.node}function fA(gs,gu,gv){gg(gs,gu.line,gu,gv,true);if(gu.rest){for(var gt=0;gt<gu.rest.length;gt++){gg(gs,gu.rest[gt],gu,gv,false)}}}function gg(gA,gB,gx,gz,gv){if(!gB.widgets){return}var gs=fO(gx);for(var gu=0,gy=gB.widgets;gu<gy.length;++gu){var gw=gy[gu],gt=gb("div",[gw.node],"CodeMirror-linewidget");if(!gw.handleMouseEvents){gt.setAttribute("cm-ignore-events","true")}bE(gw,gt,gx,gz);gA.display.input.setUneditable(gt);if(gv&&gw.above){gs.insertBefore(gt,gx.gutter||gx.text)}else{gs.appendChild(gt)}ae(gw,"redraw")}}function bE(gv,gu,gs,gw){if(gv.noHScroll){(gs.alignable||(gs.alignable=[])).push(gu);var gt=gw.wrapperWidth;gu.style.left=gw.fixedPos+"px";if(!gv.coverGutter){gt-=gw.gutterTotalWidth;gu.style.paddingLeft=gw.gutterTotalWidth+"px"}gu.style.width=gt+"px"}if(gv.coverGutter){gu.style.zIndex=5;gu.style.position="relative";if(!gv.noHScroll){gu.style.marginLeft=-gw.gutterTotalWidth+"px"}}}var W=H.Pos=function(gs,gt){if(!(this instanceof W)){return new W(gs,gt)}this.line=gs;this.ch=gt};var cf=H.cmpPos=function(gt,gs){return gt.line-gs.line||gt.ch-gs.ch};function ci(gs){return W(gs.line,gs.ch)}function bw(gt,gs){return cf(gt,gs)<0?gs:gt}function aq(gt,gs){return cf(gt,gs)<0?gt:gs}function r(gs){if(!gs.state.focused){gs.display.input.focus();cB(gs)}}var bl=null;function f7(gG,gw,gu,gt,gF){var gE=gG.doc;gG.display.shift=false;if(!gt){gt=gE.sel}var gv=gG.state.pasteIncoming||gF=="paste";var gz=gE.splitLines(gw),gs=null;if(gv&&gt.ranges.length>1){if(bl&&bl.text.join("\n")==gw){if(gt.ranges.length%bl.text.length==0){gs=[];for(var gx=0;gx<bl.text.length;gx++){gs.push(gE.splitLines(bl.text[gx]))}}}else{if(gz.length==gt.ranges.length){gs=bR(gz,function(gH){return[gH]})}}}for(var gx=gt.ranges.length-1;gx>=0;gx--){var gy=gt.ranges[gx];var gD=gy.from(),gC=gy.to();if(gy.empty()){if(gu&&gu>0){gD=W(gD.line,gD.ch-gu)}else{if(gG.state.overwrite&&!gv){gC=W(gC.line,Math.min(fm(gE,gC.line).text.length,gC.ch+fN(gz).length))}else{if(bl&&bl.lineWise&&bl.text.join("\n")==gw){gD=gC=W(gD.line,0)}}}}var gA=gG.curOp.updateInput;var gB={from:gD,to:gC,text:gs?gs[gx%gs.length]:gz,origin:gF||(gv?"paste":gG.state.cutIncoming?"cut":"+input")};bf(gG.doc,gB);ae(gG,"inputRead",gG,gB)}if(gw&&!gv){f4(gG,gw)}fM(gG);gG.curOp.updateInput=gA;gG.curOp.typing=true;gG.state.pasteIncoming=gG.state.cutIncoming=false}function a9(gu,gs){var gt=gu.clipboardData&&gu.clipboardData.getData("Text");if(gt){gu.preventDefault();if(!gs.isReadOnly()&&!gs.options.disableInput){cM(gs,function(){f7(gs,gt,0,null,"paste")})}return true}}function f4(gs,gw){if(!gs.options.electricChars||!gs.options.smartIndent){return}var gx=gs.doc.sel;for(var gv=gx.ranges.length-1;gv>=0;gv--){var gt=gx.ranges[gv];if(gt.head.ch>100||(gv&&gx.ranges[gv-1].head.line==gt.head.line)){continue}var gy=gs.getModeAt(gt.head);var gz=false;if(gy.electricChars){for(var gu=0;gu<gy.electricChars.length;gu++){if(gw.indexOf(gy.electricChars.charAt(gu))>-1){gz=ad(gs,gt.head.line,"smart");break}}}else{if(gy.electricInput){if(gy.electricInput.test(fm(gs.doc,gt.head.line).text.slice(0,gt.head.ch))){gz=ad(gs,gt.head.line,"smart")}}}if(gz){ae(gs,"electricInput",gs,gt.head.line)}}}function dk(gs){var gx=[],gu=[];for(var gv=0;gv<gs.doc.sel.ranges.length;gv++){var gt=gs.doc.sel.ranges[gv].head.line;var gw={anchor:W(gt,0),head:W(gt+1,0)};gu.push(gw);gx.push(gs.getRange(gw.anchor,gw.head))}return{text:gx,ranges:gu}}function fX(gt,gs){gt.setAttribute("autocorrect","off");gt.setAttribute("autocapitalize","off");gt.setAttribute("spellcheck",!!gs)}function Y(gs){this.cm=gs;this.prevInput="";this.pollingFast=false;this.polling=new gr();this.inaccurateSelection=false;this.hasSelection=false;this.composing=null}function aW(){var gs=gb("textarea",null,null,"position: absolute; bottom: -1em; padding: 0; width: 1px; height: 1em; outline: none");var gt=gb("div",[gs],null,"overflow: hidden; position: relative; width: 3px; height: 0px;");if(c0){gs.style.width="1000px"}else{gs.setAttribute("wrap","off")}if(e7){gs.style.border="1px solid black"}fX(gs);return gt}Y.prototype=aM({init:function(gu){var gt=this,gs=this.cm;var gx=this.wrapper=aW();var gv=this.textarea=gx.firstChild;gu.wrapper.insertBefore(gx,gu.wrapper.firstChild);if(e7){gv.style.width="0px"}bW(gv,"input",function(){if(dL&&k>=9&&gt.hasSelection){gt.hasSelection=null}gt.poll()});bW(gv,"paste",function(gy){if(aQ(gs,gy)||a9(gy,gs)){return}gs.state.pasteIncoming=true;gt.fastPoll()});function gw(gz){if(aQ(gs,gz)){return}if(gs.somethingSelected()){bl={lineWise:false,text:gs.getSelections()};if(gt.inaccurateSelection){gt.prevInput="";gt.inaccurateSelection=false;gv.value=bl.text.join("\n");dM(gv)}}else{if(!gs.options.lineWiseCopyCut){return}else{var gy=dk(gs);bl={lineWise:true,text:gy.text};if(gz.type=="cut"){gs.setSelections(gy.ranges,null,Z)}else{gt.prevInput="";gv.value=gy.text.join("\n");dM(gv)}}}if(gz.type=="cut"){gs.state.cutIncoming=true}}bW(gv,"cut",gw);bW(gv,"copy",gw);bW(gu.scroller,"paste",function(gy){if(ba(gu,gy)||aQ(gs,gy)){return}gs.state.pasteIncoming=true;gt.focus()});bW(gu.lineSpace,"selectstart",function(gy){if(!ba(gu,gy)){cG(gy)}});bW(gv,"compositionstart",function(){var gy=gs.getCursor("from");if(gt.composing){gt.composing.range.clear()}gt.composing={start:gy,range:gs.markText(gy,gs.getCursor("to"),{className:"CodeMirror-composing"})}});bW(gv,"compositionend",function(){if(gt.composing){gt.poll();gt.composing.range.clear();gt.composing=null}})},prepareSelection:function(){var gt=this.cm,gx=gt.display,gw=gt.doc;var gs=fP(gt);if(gt.options.moveInputWithCursor){var gy=dV(gt,gw.sel.primary().head,"div");var gu=gx.wrapper.getBoundingClientRect(),gv=gx.lineDiv.getBoundingClientRect();gs.teTop=Math.max(0,Math.min(gx.wrapper.clientHeight-10,gy.top+gv.top-gu.top));gs.teLeft=Math.max(0,Math.min(gx.wrapper.clientWidth-10,gy.left+gv.left-gu.left))}return gs},showSelection:function(gu){var gs=this.cm,gt=gs.display;bQ(gt.cursorDiv,gu.cursors);bQ(gt.selectionDiv,gu.selection);if(gu.teTop!=null){this.wrapper.style.top=gu.teTop+"px";this.wrapper.style.left=gu.teLeft+"px"}},reset:function(gw){if(this.contextMenuPending){return}var gt,gv,gs=this.cm,gy=gs.doc;if(gs.somethingSelected()){this.prevInput="";var gu=gy.sel.primary();gt=da&&(gu.to().line-gu.from().line>100||(gv=gs.getSelection()).length>1000);var gx=gt?"-":gv||gs.getSelection();this.textarea.value=gx;if(gs.state.focused){dM(this.textarea)}if(dL&&k>=9){this.hasSelection=gx}}else{if(!gw){this.prevInput=this.textarea.value="";if(dL&&k>=9){this.hasSelection=null}}}this.inaccurateSelection=gt},getField:function(){return this.textarea},supportsTouch:function(){return false},focus:function(){if(this.cm.options.readOnly!="nocursor"&&(!ej||dP()!=this.textarea)){try{this.textarea.focus()}catch(gs){}}},blur:function(){this.textarea.blur()},resetPosition:function(){this.wrapper.style.top=this.wrapper.style.left=0},receivedFocus:function(){this.slowPoll()},slowPoll:function(){var gs=this;if(gs.pollingFast){return}gs.polling.set(this.cm.options.pollInterval,function(){gs.poll();if(gs.cm.state.focused){gs.slowPoll()}})},fastPoll:function(){var gt=false,gs=this;gs.pollingFast=true;function gu(){var gv=gs.poll();if(!gv&&!gt){gt=true;gs.polling.set(60,gu)}else{gs.pollingFast=false;gs.slowPoll()}}gs.polling.set(20,gu)},poll:function(){var gs=this.cm,gv=this.textarea,gw=this.prevInput;if(this.contextMenuPending||!gs.state.focused||(br(gv)&&!gw&&!this.composing)||gs.isReadOnly()||gs.options.disableInput||gs.state.keySeq){return false}var gy=gv.value;if(gy==gw&&!gs.somethingSelected()){return false}if(dL&&k>=9&&this.hasSelection===gy||b6&&/[\uf700-\uf7ff]/.test(gy)){gs.display.input.reset();return false}if(gs.doc.sel==gs.display.selForContextMenu){var gx=gy.charCodeAt(0);if(gx==8203&&!gw){gw="\u200b"}if(gx==8666){this.reset();return this.cm.execCommand("undo")}}var gz=0,gt=Math.min(gw.length,gy.length);while(gz<gt&&gw.charCodeAt(gz)==gy.charCodeAt(gz)){++gz}var gu=this;cM(gs,function(){f7(gs,gy.slice(gz),gw.length-gz,null,gu.composing?"*compose":null);if(gy.length>1000||gy.indexOf("\n")>-1){gv.value=gu.prevInput=""}else{gu.prevInput=gy}if(gu.composing){gu.composing.range.clear();gu.composing.range=gs.markText(gu.composing.start,gs.getCursor("to"),{className:"CodeMirror-composing"})}});return true},ensurePolled:function(){if(this.pollingFast&&this.poll()){this.pollingFast=false}},onKeyPress:function(){if(dL&&k>=9){this.hasSelection=null}this.fastPoll()},onContextMenu:function(gx){var gC=this,gD=gC.cm,gz=gD.display,gt=gC.textarea;var gB=cn(gD,gx),gs=gz.scroller.scrollTop;if(!gB||d5){return}var gw=gD.options.resetSelectionOnContextMenu;if(gw&&gD.doc.sel.contains(gB)==-1){c2(gD,bT)(gD.doc,eX(gB),Z)}var gy=gt.style.cssText,gG=gC.wrapper.style.cssText;gC.wrapper.style.cssText="position: absolute";var gF=gC.wrapper.getBoundingClientRect();gt.style.cssText="position: absolute; width: 30px; height: 30px; top: "+(gx.clientY-gF.top-5)+"px; left: "+(gx.clientX-gF.left-5)+"px; z-index: 1000; background: "+(dL?"rgba(255, 255, 255, .05)":"transparent")+"; outline: none; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);";if(c0){var gE=window.scrollY}gz.input.focus();if(c0){window.scrollTo(null,gE)}gz.input.reset();if(!gD.somethingSelected()){gt.value=gC.prevInput=" "}gC.contextMenuPending=true;gz.selForContextMenu=gD.doc.sel;clearTimeout(gz.detectingSelectAll);function gv(){if(gt.selectionStart!=null){var gH=gD.somethingSelected();var gI="\u200b"+(gH?gt.value:"");gt.value="\u21da";gt.value=gI;gC.prevInput=gH?"":"\u200b";gt.selectionStart=1;gt.selectionEnd=gI.length;gz.selForContextMenu=gD.doc.sel}}function gA(){gC.contextMenuPending=false;gC.wrapper.style.cssText=gG;gt.style.cssText=gy;if(dL&&k<9){gz.scrollbars.setScrollTop(gz.scroller.scrollTop=gs)}if(gt.selectionStart!=null){if(!dL||(dL&&k<9)){gv()}var gH=0,gI=function(){if(gz.selForContextMenu==gD.doc.sel&&gt.selectionStart==0&&gt.selectionEnd>0&&gC.prevInput=="\u200b"){c2(gD,eH.selectAll)(gD)}else{if(gH++<10){gz.detectingSelectAll=setTimeout(gI,500)}else{gz.input.reset()}}};gz.detectingSelectAll=setTimeout(gI,200)}}if(dL&&k>=9){gv()}if(gi){ev(gx);var gu=function(){eg(window,"mouseup",gu);setTimeout(gA,20)};bW(window,"mouseup",gu)}else{setTimeout(gA,50)}},readOnlyChanged:function(gs){if(!gs){this.reset()}},setUneditable:f3,needsContentAttribute:false},Y.prototype);function dw(gs){this.cm=gs;this.lastAnchorNode=this.lastAnchorOffset=this.lastFocusNode=this.lastFocusOffset=null;this.polling=new gr();this.gracePeriod=false}dw.prototype=aM({init:function(gv){var gu=this,gs=gu.cm;var gw=gu.div=gv.lineDiv;fX(gw,gs.options.spellcheck);bW(gw,"paste",function(gx){if(aQ(gs,gx)||a9(gx,gs)){return}if(k<=11){setTimeout(c2(gs,function(){if(!gu.pollContent()){ah(gs)}}),20)}});bW(gw,"compositionstart",function(gB){var gA=gB.data;gu.composing={sel:gs.doc.sel,data:gA,startData:gA};if(!gA){return}var gy=gs.doc.sel.primary();var gx=gs.getLine(gy.head.line);var gz=gx.indexOf(gA,Math.max(0,gy.head.ch-gA.length));if(gz>-1&&gz<=gy.head.ch){gu.composing.sel=eX(W(gy.head.line,gz),W(gy.head.line,gz+gA.length))}});bW(gw,"compositionupdate",function(gx){gu.composing.data=gx.data});bW(gw,"compositionend",function(gy){var gx=gu.composing;if(!gx){return}if(gy.data!=gx.startData&&!/\u200b/.test(gy.data)){gx.data=gy.data}setTimeout(function(){if(!gx.handled){gu.applyComposition(gx)}if(gu.composing==gx){gu.composing=null}},50)});bW(gw,"touchstart",function(){gu.forceCompositionEnd()});bW(gw,"input",function(){if(gu.composing){return}if(gs.isReadOnly()||!gu.pollContent()){cM(gu.cm,function(){ah(gs)})}});function gt(gB){if(aQ(gs,gB)){return}if(gs.somethingSelected()){bl={lineWise:false,text:gs.getSelections()};if(gB.type=="cut"){gs.replaceSelection("",null,"cut")}}else{if(!gs.options.lineWiseCopyCut){return}else{var gy=dk(gs);bl={lineWise:true,text:gy.text};if(gB.type=="cut"){gs.operation(function(){gs.setSelections(gy.ranges,0,Z);gs.replaceSelection("",null,"cut")})}}}if(gB.clipboardData){gB.clipboardData.clearData();var gA=bl.text.join("\n");gB.clipboardData.setData("Text",gA);if(gB.clipboardData.getData("Text")==gA){gB.preventDefault();return}}var gz=aW(),gC=gz.firstChild;gs.display.lineSpace.insertBefore(gz,gs.display.lineSpace.firstChild);gC.value=bl.text.join("\n");var gx=document.activeElement;dM(gC);setTimeout(function(){gs.display.lineSpace.removeChild(gz);gx.focus();if(gx==gw){gu.showPrimarySelection()}},50)}bW(gw,"copy",gt);bW(gw,"cut",gt)},prepareSelection:function(){var gs=fP(this.cm,false);gs.focus=this.cm.state.focused;return gs},showSelection:function(gt,gs){if(!gt||!this.cm.display.view.length){return}if(gt.focus||gs){this.showPrimarySelection()}this.showMultipleSelections(gt)},showPrimarySelection:function(){var gw=window.getSelection(),gz=this.cm.doc.sel.primary();var gx=ay(this.cm,gw.anchorNode,gw.anchorOffset);var gB=ay(this.cm,gw.focusNode,gw.focusOffset);if(gx&&!gx.bad&&gB&&!gB.bad&&cf(aq(gx,gB),gz.from())==0&&cf(bw(gx,gB),gz.to())==0){return}var gv=cz(this.cm,gz.from());var gA=cz(this.cm,gz.to());if(!gv&&!gA){return}var gD=this.cm.display.view;var gy=gw.rangeCount&&gw.getRangeAt(0);if(!gv){gv={node:gD[0].measure.map[2],offset:0}}else{if(!gA){var gu=gD[gD.length-1].measure;var gt=gu.maps?gu.maps[gu.maps.length-1]:gu.map;gA={node:gt[gt.length-1],offset:gt[gt.length-2]-gt[gt.length-3]}}}try{var gs=cl(gv.node,gv.offset,gA.offset,gA.node)}catch(gC){}if(gs){if(!co&&this.cm.state.focused){gw.collapse(gv.node,gv.offset);if(!gs.collapsed){gw.addRange(gs)}}else{gw.removeAllRanges();gw.addRange(gs)}if(gy&&gw.anchorNode==null){gw.addRange(gy)}else{if(co){this.startGracePeriod()}}}this.rememberSelection()},startGracePeriod:function(){var gs=this;clearTimeout(this.gracePeriod);this.gracePeriod=setTimeout(function(){gs.gracePeriod=false;if(gs.selectionChanged()){gs.cm.operation(function(){gs.cm.curOp.selectionChanged=true})}},20)},showMultipleSelections:function(gs){bQ(this.cm.display.cursorDiv,gs.cursors);bQ(this.cm.display.selectionDiv,gs.selection)},rememberSelection:function(){var gs=window.getSelection();this.lastAnchorNode=gs.anchorNode;this.lastAnchorOffset=gs.anchorOffset;this.lastFocusNode=gs.focusNode;this.lastFocusOffset=gs.focusOffset},selectionInEditor:function(){var gt=window.getSelection();if(!gt.rangeCount){return false}var gs=gt.getRangeAt(0).commonAncestorContainer;return gj(this.div,gs)},focus:function(){if(this.cm.options.readOnly!="nocursor"){this.div.focus()}},blur:function(){this.div.blur()},getField:function(){return this.div},supportsTouch:function(){return true},receivedFocus:function(){var gs=this;if(this.selectionInEditor()){this.pollSelection()}else{cM(this.cm,function(){gs.cm.curOp.selectionChanged=true})}function gt(){if(gs.cm.state.focused){gs.pollSelection();gs.polling.set(gs.cm.options.pollInterval,gt)}}this.polling.set(this.cm.options.pollInterval,gt)},selectionChanged:function(){var gs=window.getSelection();return gs.anchorNode!=this.lastAnchorNode||gs.anchorOffset!=this.lastAnchorOffset||gs.focusNode!=this.lastFocusNode||gs.focusOffset!=this.lastFocusOffset},pollSelection:function(){if(!this.composing&&!this.gracePeriod&&this.selectionChanged()){var gv=window.getSelection(),gs=this.cm;this.rememberSelection();var gt=ay(gs,gv.anchorNode,gv.anchorOffset);var gu=ay(gs,gv.focusNode,gv.focusOffset);if(gt&&gu){cM(gs,function(){bT(gs.doc,eX(gt,gu),Z);if(gt.bad||gu.bad){gs.curOp.selectionChanged=true}})}}},pollContent:function(){var gC=this.cm,gM=gC.display,gK=gC.doc.sel.primary();var gL=gK.from(),gw=gK.to();if(gL.line<gM.viewFrom||gw.line>gM.viewTo-1){return false}var gz;if(gL.line==gM.viewFrom||(gz=ds(gC,gL.line))==0){var gx=bM(gM.view[0].line);var gB=gM.view[0].node}else{var gx=bM(gM.view[gz].line);var gB=gM.view[gz-1].node.nextSibling}var gJ=ds(gC,gw.line);if(gJ==gM.view.length-1){var gE=gM.viewTo-1;var gH=gM.lineDiv.lastChild}else{var gE=bM(gM.view[gJ+1].line)-1;var gH=gM.view[gJ+1].node.previousSibling}var gN=gC.doc.splitLines(f8(gC,gB,gH,gx,gE));var gG=gd(gC.doc,W(gx,0),W(gE,fm(gC.doc,gE).text.length));while(gN.length>1&&gG.length>1){if(fN(gN)==fN(gG)){gN.pop();gG.pop();gE--}else{if(gN[0]==gG[0]){gN.shift();gG.shift();gx++}else{break}}}var gI=0,gu=0;var gD=gN[0],gt=gG[0],gs=Math.min(gD.length,gt.length);while(gI<gs&&gD.charCodeAt(gI)==gt.charCodeAt(gI)){++gI}var gA=fN(gN),gO=fN(gG);var gv=Math.min(gA.length-(gN.length==1?gI:0),gO.length-(gG.length==1?gI:0));while(gu<gv&&gA.charCodeAt(gA.length-gu-1)==gO.charCodeAt(gO.length-gu-1)){++gu}gN[gN.length-1]=gA.slice(0,gA.length-gu);gN[0]=gN[0].slice(gI);var gy=W(gx,gI);var gF=W(gE,gG.length?fN(gG).length-gu:0);if(gN.length>1||gN[0]||cf(gy,gF)){a0(gC.doc,gN,gy,gF,"+input");return true}},ensurePolled:function(){this.forceCompositionEnd()},reset:function(){this.forceCompositionEnd()},forceCompositionEnd:function(){if(!this.composing||this.composing.handled){return}this.applyComposition(this.composing);this.composing.handled=true;this.div.blur();this.div.focus()},applyComposition:function(gs){if(this.cm.isReadOnly()){c2(this.cm,ah)(this.cm)}else{if(gs.data&&gs.data!=gs.startData){c2(this.cm,f7)(this.cm,gs.data,0,gs.sel)}}},setUneditable:function(gs){gs.contentEditable="false"},onKeyPress:function(gs){gs.preventDefault();if(!this.cm.isReadOnly()){c2(this.cm,f7)(this.cm,String.fromCharCode(gs.charCode==null?gs.keyCode:gs.charCode),0)}},readOnlyChanged:function(gs){this.div.contentEditable=String(gs!="nocursor")},onContextMenu:f3,resetPosition:f3,needsContentAttribute:true},dw.prototype);function cz(gy,gw){var gx=fi(gy,gw.line);if(!gx||gx.hidden){return null}var gA=fm(gy.doc,gw.line);var gt=ct(gx,gA,gw.line);var gu=a(gA),gv="left";if(gu){var gs=aF(gu,gw.ch);gv=gs%2?"right":"left"}var gz=aK(gt.map,gw.ch,gv);gz.offset=gz.collapse=="right"?gz.end:gz.start;return gz}function ex(gt,gs){if(gs){gt.bad=true}return gt}function ay(gs,gv,gx){var gw;if(gv==gs.display.lineDiv){gw=gs.display.lineDiv.childNodes[gx];if(!gw){return ex(gs.clipPos(W(gs.display.viewTo-1)),true)}gv=null;gx=0}else{for(gw=gv;;gw=gw.parentNode){if(!gw||gw==gs.display.lineDiv){return null}if(gw.parentNode&&gw.parentNode==gs.display.lineDiv){break}}}for(var gu=0;gu<gs.display.view.length;gu++){var gt=gs.display.view[gu];if(gt.node==gw){return aa(gt,gv,gx)}}}function aa(gA,gw,gy){var gu=gA.text.firstChild,gv=false;if(!gw||!gj(gu,gw)){return ex(W(bM(gA.line),0),true)}if(gw==gu){gv=true;gw=gu.childNodes[gy];gy=0;if(!gw){var gG=gA.rest?fN(gA.rest):gA.line;return ex(W(bM(gG),gG.text.length),gv)}}var gx=gw.nodeType==3?gw:null,gE=gw;if(!gx&&gw.childNodes.length==1&&gw.firstChild.nodeType==3){gx=gw.firstChild;if(gy){gy=gx.nodeValue.length}}while(gE.parentNode!=gu){gE=gE.parentNode}var gt=gA.measure,gC=gt.maps;function gz(gJ,gO,gL){for(var gN=-1;gN<(gC?gC.length:0);gN++){var gI=gN<0?gt.map:gC[gN];for(var gM=0;gM<gI.length;gM+=3){var gK=gI[gM+2];if(gK==gJ||gK==gO){var gP=bM(gN<0?gA.line:gA.rest[gN]);var gH=gI[gM]+gL;if(gL<0||gK!=gJ){gH=gI[gM+(gL?1:0)]}return W(gP,gH)}}}}var gF=gz(gx,gE,gy);if(gF){return ex(gF,gv)}for(var gs=gE.nextSibling,gB=gx?gx.nodeValue.length-gy:0;gs;gs=gs.nextSibling){gF=gz(gs,gs.firstChild,0);if(gF){return ex(W(gF.line,gF.ch-gB),gv)}else{gB+=gs.textContent.length}}for(var gD=gE.previousSibling,gB=gy;gD;gD=gD.previousSibling){gF=gz(gD,gD.firstChild,-1);if(gF){return ex(W(gF.line,gF.ch+gB),gv)}else{gB+=gD.textContent.length}}}function f8(gA,gy,gz,gv,gt){var gB="",gu=false,gs=gA.doc.lineSeparator();function gw(gC){return function(gD){return gD.id==gC}}function gx(gG){if(gG.nodeType==1){var gD=gG.getAttribute("cm-text");if(gD!=null){if(gD==""){gD=gG.textContent.replace(/\u200b/g,"")}gB+=gD;return}var gF=gG.getAttribute("cm-marker"),gC;if(gF){var gH=gA.findMarks(W(gv,0),W(gt+1,0),gw(+gF));if(gH.length&&(gC=gH[0].find())){gB+=gd(gA.doc,gC.from,gC.to).join(gs)}return}if(gG.getAttribute("contenteditable")=="false"){return}for(var gE=0;gE<gG.childNodes.length;gE++){gx(gG.childNodes[gE])}if(/^(pre|div|p)$/i.test(gG.nodeName)){gu=true}}else{if(gG.nodeType==3){var gI=gG.nodeValue;if(!gI){return}if(gu){gB+=gs;gu=false}gB+=gI}}}for(;;){gx(gy);if(gy==gz){break}gy=gy.nextSibling}return gB}H.inputStyles={textarea:Y,contenteditable:dw};function gc(gs,gt){this.ranges=gs;this.primIndex=gt}gc.prototype={primary:function(){return this.ranges[this.primIndex]},equals:function(gs){if(gs==this){return true}if(gs.primIndex!=this.primIndex||gs.ranges.length!=this.ranges.length){return false}for(var gu=0;gu<this.ranges.length;gu++){var gt=this.ranges[gu],gv=gs.ranges[gu];if(cf(gt.anchor,gv.anchor)!=0||cf(gt.head,gv.head)!=0){return false}}return true},deepCopy:function(){for(var gs=[],gt=0;gt<this.ranges.length;gt++){gs[gt]=new dZ(ci(this.ranges[gt].anchor),ci(this.ranges[gt].head))}return new gc(gs,this.primIndex)},somethingSelected:function(){for(var gs=0;gs<this.ranges.length;gs++){if(!this.ranges[gs].empty()){return true}}return false},contains:function(gv,gs){if(!gs){gs=gv}for(var gu=0;gu<this.ranges.length;gu++){var gt=this.ranges[gu];if(cf(gs,gt.from())>=0&&cf(gv,gt.to())<=0){return gu}}return -1}};function dZ(gs,gt){this.anchor=gs;this.head=gt}dZ.prototype={from:function(){return aq(this.anchor,this.head)},to:function(){return bw(this.anchor,this.head)},empty:function(){return this.head.line==this.anchor.line&&this.head.ch==this.anchor.ch}};function cw(gs,gz){var gu=gs[gz];gs.sort(function(gC,gB){return cf(gC.from(),gB.from())});gz=di(gs,gu);for(var gw=1;gw<gs.length;gw++){var gA=gs[gw],gt=gs[gw-1];if(cf(gt.to(),gA.from())>=0){var gx=aq(gt.from(),gA.from()),gy=bw(gt.to(),gA.to());var gv=gt.empty()?gA.from()==gA.head:gt.from()==gt.head;if(gw<=gz){--gz}gs.splice(--gw,2,new dZ(gv?gy:gx,gv?gx:gy))}}return new gc(gs,gz)}function eX(gs,gt){return new gc([new dZ(gs,gt||gs)],0)}function c5(gs,gt){return Math.max(gs.first,Math.min(gt,gs.first+gs.size-1))}function fR(gt,gu){if(gu.line<gt.first){return W(gt.first,0)}var gs=gt.first+gt.size-1;if(gu.line>gs){return W(gs,fm(gt,gs).text.length)}return fz(gu,fm(gt,gu.line).text.length)}function fz(gu,gt){var gs=gu.ch;if(gs==null||gs>gt){return W(gu.line,gt)}else{if(gs<0){return W(gu.line,0)}else{return gu}}}function b8(gt,gs){return gs>=gt.first&&gs<gt.first+gt.size}function d1(gu,gv){for(var gs=[],gt=0;gt<gv.length;gt++){gs[gt]=fR(gu,gv[gt])}return gs}function fC(gx,gt,gw,gs){if(gx.cm&&gx.cm.display.shift||gx.extend){var gv=gt.anchor;if(gs){var gu=cf(gw,gv)<0;if(gu!=(cf(gs,gv)<0)){gv=gw;gw=gs}else{if(gu!=(cf(gw,gs)<0)){gw=gs}}}return new dZ(gv,gw)}else{return new dZ(gs||gw,gw)}}function f5(gv,gu,gs,gt){bT(gv,new gc([fC(gv,gv.sel.primary(),gu,gs)],0),gt)}function av(gx,gw,gu){for(var gt=[],gv=0;gv<gx.sel.ranges.length;gv++){gt[gv]=fC(gx,gx.sel.ranges[gv],gw[gv],null)}var gs=cw(gt,gx.sel.primIndex);bT(gx,gs,gu)}function e(gw,gv,gt,gu){var gs=gw.sel.ranges.slice(0);gs[gv]=gt;bT(gw,cw(gs,gw.sel.primIndex),gu)}function F(gv,gt,gu,gs){bT(gv,eX(gt,gu),gs)}function c(gv,gt,gs){var gu={ranges:gt.ranges,update:function(gw){this.ranges=[];for(var gx=0;gx<gw.length;gx++){this.ranges[gx]=new dZ(fR(gv,gw[gx].anchor),fR(gv,gw[gx].head))}},origin:gs&&gs.origin};aD(gv,"beforeSelectionChange",gv,gu);if(gv.cm){aD(gv.cm,"beforeSelectionChange",gv.cm,gu)}if(gu.ranges!=gt.ranges){return cw(gu.ranges,gu.ranges.length-1)}else{return gt}}function fe(gw,gv,gt){var gs=gw.history.done,gu=fN(gs);if(gu&&gu.ranges){gs[gs.length-1]=gv;et(gw,gv,gt)}else{bT(gw,gv,gt)}}function bT(gu,gt,gs){et(gu,gt,gs);gk(gu,gu.sel,gu.cm?gu.cm.curOp.id:NaN,gs)}function et(gv,gu,gt){if(fp(gv,"beforeSelectionChange")||gv.cm&&fp(gv.cm,"beforeSelectionChange")){gu=c(gv,gu,gt)}var gs=gt&&gt.bias||(cf(gu.primary().head,gv.sel.primary().head)<0?-1:1);c9(gv,n(gv,gu,gs,true));if(!(gt&&gt.scroll===false)&&gv.cm){fM(gv.cm)}}function c9(gt,gs){if(gs.equals(gt.sel)){return}gt.sel=gs;if(gt.cm){gt.cm.curOp.updateInput=gt.cm.curOp.selectionChanged=true;V(gt.cm)}ae(gt,"cursorActivity",gt)}function eC(gs){c9(gs,n(gs,gs.sel,null,false),Z)}function n(gB,gs,gy,gz){var gv;for(var gw=0;gw<gs.ranges.length;gw++){var gx=gs.ranges[gw];var gt=gs.ranges.length==gB.sel.ranges.length&&gB.sel.ranges[gw];var gA=bU(gB,gx.anchor,gt&&gt.anchor,gy,gz);var gu=bU(gB,gx.head,gt&&gt.head,gy,gz);if(gv||gA!=gx.anchor||gu!=gx.head){if(!gv){gv=gs.ranges.slice(0,gw)}gv[gw]=new dZ(gA,gu)}}return gv?cw(gv,gs.primIndex):gs}function eN(gC,gA,gv,gu,gy){var gD=fm(gC,gA.line);if(gD.markedSpans){for(var gw=0;gw<gD.markedSpans.length;++gw){var gs=gD.markedSpans[gw],gt=gs.marker;if((gs.from==null||(gt.inclusiveLeft?gs.from<=gA.ch:gs.from<gA.ch))&&(gs.to==null||(gt.inclusiveRight?gs.to>=gA.ch:gs.to>gA.ch))){if(gy){aD(gt,"beforeCursorEnter");if(gt.explicitlyCleared){if(!gD.markedSpans){break}else{--gw;continue}}}if(!gt.atomic){continue}if(gv){var gz=gt.find(gu<0?1:-1),gB;if(gu<0?gt.inclusiveRight:gt.inclusiveLeft){gz=go(gC,gz,-gu,gz&&gz.line==gA.line?gD:null)}if(gz&&gz.line==gA.line&&(gB=cf(gz,gv))&&(gu<0?gB<0:gB>0)){return eN(gC,gz,gA,gu,gy)}}var gx=gt.find(gu<0?-1:1);if(gu<0?gt.inclusiveLeft:gt.inclusiveRight){gx=go(gC,gx,gu,gx.line==gA.line?gD:null)}return gx?eN(gC,gx,gA,gu,gy):null}}}return gA}function bU(gx,gy,gv,gt,gs){var gu=gt||1;var gw=eN(gx,gy,gv,gu,gs)||(!gs&&eN(gx,gy,gv,gu,true))||eN(gx,gy,gv,-gu,gs)||(!gs&&eN(gx,gy,gv,-gu,true));if(!gw){gx.cantEdit=true;return W(gx.first,0)}return gw}function go(gu,gv,gt,gs){if(gt<0&&gv.ch==0){if(gv.line>gu.first){return fR(gu,W(gv.line-1))}else{return null}}else{if(gt>0&&gv.ch==(gs||fm(gu,gv.line)).text.length){if(gv.line<gu.first+gu.size-1){return W(gv.line+1,0)}else{return null}}else{return new W(gv.line,gv.ch+gt)}}}function bB(gs){gs.display.input.showSelection(gs.display.input.prepareSelection())}function fP(gz,gs){var gy=gz.doc,gA={};var gx=gA.cursors=document.createDocumentFragment();var gt=gA.selection=document.createDocumentFragment();for(var gv=0;gv<gy.sel.ranges.length;gv++){if(gs===false&&gv==gy.sel.primIndex){continue}var gw=gy.sel.ranges[gv];if(gw.from().line>=gz.display.viewTo||gw.to().line<gz.display.viewFrom){continue}var gu=gw.empty();if(gu||gz.options.showCursorWhenSelecting){A(gz,gw.head,gx)}if(!gu){bC(gz,gw,gt)}}return gA}function A(gs,gv,gu){var gx=dV(gs,gv,"div",null,null,!gs.options.singleCursorHeightPerLine);var gw=gu.appendChild(gb("div","\u00a0","CodeMirror-cursor"));gw.style.left=gx.left+"px";gw.style.top=gx.top+"px";gw.style.height=Math.max(0,gx.bottom-gx.top)*gs.options.cursorHeight+"px";if(gx.other){var gt=gu.appendChild(gb("div","\u00a0","CodeMirror-cursor CodeMirror-secondarycursor"));gt.style.display="";gt.style.left=gx.other.left+"px";gt.style.top=gx.other.top+"px";gt.style.height=(gx.other.bottom-gx.other.top)*0.85+"px"}}function bC(gw,gC,gx){var gF=gw.display,gJ=gw.doc;var gs=document.createDocumentFragment();var gB=fb(gw.display),gv=gB.left;var gG=Math.max(gF.sizerWidth,dm(gw)-gF.sizer.offsetLeft)-gB.right;function gD(gN,gM,gL,gK){if(gM<0){gM=0}gM=Math.round(gM);gK=Math.round(gK);gs.appendChild(gb("div",null,"CodeMirror-selected","position: absolute; left: "+gN+"px; top: "+gM+"px; width: "+(gL==null?gG-gN:gL)+"px; height: "+(gK-gM)+"px"))}function gt(gL,gN,gQ){var gM=fm(gJ,gL);var gO=gM.text.length;var gR,gK;function gP(gT,gS){return cJ(gw,W(gL,gT),"div",gM,gS)}d6(a(gM),gN||0,gQ==null?gO:gQ,function(gZ,gY,gS){var gV=gP(gZ,"left"),gW,gX,gU;if(gZ==gY){gW=gV;gX=gU=gV.left}else{gW=gP(gY-1,"right");if(gS=="rtl"){var gT=gV;gV=gW;gW=gT}gX=gV.left;gU=gW.right}if(gN==null&&gZ==0){gX=gv}if(gW.top-gV.top>3){gD(gX,gV.top,null,gV.bottom);gX=gv;if(gV.bottom<gW.top){gD(gX,gV.bottom,null,gW.top)}}if(gQ==null&&gY==gO){gU=gG}if(!gR||gV.top<gR.top||gV.top==gR.top&&gV.left<gR.left){gR=gV}if(!gK||gW.bottom>gK.bottom||gW.bottom==gK.bottom&&gW.right>gK.right){gK=gW}if(gX<gv+1){gX=gv}gD(gX,gW.top,gU-gX,gW.bottom)});return{start:gR,end:gK}}var gI=gC.from(),gH=gC.to();if(gI.line==gH.line){gt(gI.line,gI.ch,gH.ch)}else{var gu=fm(gJ,gI.line),gz=fm(gJ,gH.line);var gy=x(gu)==x(gz);var gA=gt(gI.line,gI.ch,gy?gu.text.length+1:null).end;var gE=gt(gH.line,gy?0:null,gH.ch).start;if(gy){if(gA.top<gE.top-2){gD(gA.right,gA.top,null,gA.bottom);gD(gv,gE.top,gE.left,gE.bottom)}else{gD(gA.right,gA.top,gE.left-gA.right,gA.bottom)}}if(gA.bottom<gE.top){gD(gv,gA.bottom,null,gE.top)}}gx.appendChild(gs)}function o(gs){if(!gs.state.focused){return}var gu=gs.display;clearInterval(gu.blinker);var gt=true;gu.cursorDiv.style.visibility="";if(gs.options.cursorBlinkRate>0){gu.blinker=setInterval(function(){gu.cursorDiv.style.visibility=(gt=!gt)?"":"hidden"},gs.options.cursorBlinkRate)}else{if(gs.options.cursorBlinkRate<0){gu.cursorDiv.style.visibility="hidden"}}}function ei(gs,gt){if(gs.doc.mode.startState&&gs.doc.frontier<gs.display.viewTo){gs.state.highlight.set(gt,cv(cP,gs))}}function cP(gs){var gw=gs.doc;if(gw.frontier<gw.first){gw.frontier=gw.first}if(gw.frontier>=gs.display.viewTo){return}var gu=+new Date+gs.options.workTime;var gv=b2(gw.mode,dD(gs,gw.frontier));var gt=[];gw.iter(gw.frontier,Math.min(gw.first+gw.size,gs.display.viewTo+500),function(gx){if(gw.frontier>=gs.display.viewFrom){var gA=gx.styles,gE=gx.text.length>gs.options.maxHighlightLength;var gC=fG(gs,gx,gE?b2(gw.mode,gv):gv,true);gx.styles=gC.styles;var gz=gx.styleClasses,gB=gC.classes;if(gB){gx.styleClasses=gB}else{if(gz){gx.styleClasses=null}}var gD=!gA||gA.length!=gx.styles.length||gz!=gB&&(!gz||!gB||gz.bgClass!=gB.bgClass||gz.textClass!=gB.textClass);for(var gy=0;!gD&&gy<gA.length;++gy){gD=gA[gy]!=gx.styles[gy]}if(gD){gt.push(gw.frontier)}gx.stateAfter=gE?gv:b2(gw.mode,gv)}else{if(gx.text.length<=gs.options.maxHighlightLength){dy(gs,gx.text,gv)}gx.stateAfter=gw.frontier%5==0?b2(gw.mode,gv):null}++gw.frontier;if(+new Date>gu){ei(gs,gs.options.workDelay);return true}});if(gt.length){cM(gs,function(){for(var gx=0;gx<gt.length;gx++){R(gs,gt[gx],"text")}})}}function cy(gy,gs,gv){var gt,gw,gx=gy.doc;var gu=gv?-1:gs-(gy.doc.mode.innerMode?1000:100);for(var gB=gs;gB>gu;--gB){if(gB<=gx.first){return gx.first}var gA=fm(gx,gB-1);if(gA.stateAfter&&(!gv||gB<=gx.frontier)){return gB}var gz=bS(gA.text,null,gy.options.tabSize);if(gw==null||gt>gz){gw=gB-1;gt=gz}}return gw}function dD(gs,gy,gt){var gw=gs.doc,gv=gs.display;if(!gw.mode.startState){return true}var gx=cy(gs,gy,gt),gu=gx>gw.first&&fm(gw,gx-1).stateAfter;if(!gu){gu=bZ(gw.mode)}else{gu=b2(gw.mode,gu)}gw.iter(gx,gy,function(gz){dy(gs,gz.text,gu);var gA=gx==gy-1||gx%5==0||gx>=gv.viewFrom&&gx<gv.viewTo;gz.stateAfter=gA?b2(gw.mode,gu):null;++gx});if(gt){gw.frontier=gx}return gu}function ff(gs){return gs.lineSpace.offsetTop}function bH(gs){return gs.mover.offsetHeight-gs.lineSpace.offsetHeight}function fb(gv){if(gv.cachedPaddingH){return gv.cachedPaddingH}var gu=bQ(gv.measure,gb("pre","x"));var gs=window.getComputedStyle?window.getComputedStyle(gu):gu.currentStyle;var gt={left:parseInt(gs.paddingLeft),right:parseInt(gs.paddingRight)};if(!isNaN(gt.left)&&!isNaN(gt.right)){gv.cachedPaddingH=gt}return gt}function cT(gs){return dK-gs.display.nativeBarWidth}function dm(gs){return gs.display.scroller.clientWidth-cT(gs)-gs.display.barWidth}function cV(gs){return gs.display.scroller.clientHeight-cT(gs)-gs.display.barHeight}function ch(gz,gv,gy){var gu=gz.options.lineWrapping;var gw=gu&&dm(gz);if(!gv.measure.heights||gu&&gv.measure.width!=gw){var gx=gv.measure.heights=[];if(gu){gv.measure.width=gw;var gB=gv.text.firstChild.getClientRects();for(var gs=0;gs<gB.length-1;gs++){var gA=gB[gs],gt=gB[gs+1];if(Math.abs(gA.bottom-gt.bottom)>2){gx.push((gA.bottom+gt.top)/2-gy.top)}}}gx.push(gy.bottom-gy.top)}}function ct(gu,gs,gv){if(gu.line==gs){return{map:gu.measure.map,cache:gu.measure.cache}}for(var gt=0;gt<gu.rest.length;gt++){if(gu.rest[gt]==gs){return{map:gu.measure.maps[gt],cache:gu.measure.caches[gt]}}}for(var gt=0;gt<gu.rest.length;gt++){if(bM(gu.rest[gt])>gv){return{map:gu.measure.maps[gt],cache:gu.measure.caches[gt],before:true}}}}function c1(gs,gu){gu=x(gu);var gw=bM(gu);var gt=gs.display.externalMeasured=new bu(gs.doc,gu,gw);gt.lineN=gw;var gv=gt.built=eW(gs,gt);gt.text=gv.pre;bQ(gs.display.lineMeasure,gv.pre);return gt}function ek(gs,gt,gv,gu){return C(gs,a3(gs,gt),gv,gu)}function fi(gs,gu){if(gu>=gs.display.viewFrom&&gu<gs.display.viewTo){return gs.display.view[ds(gs,gu)]}var gt=gs.display.externalMeasured;if(gt&&gu>=gt.lineN&&gu<gt.lineN+gt.size){return gt}}function a3(gs,gu){var gv=bM(gu);var gt=fi(gs,gv);if(gt&&!gt.text){gt=null}else{if(gt&&gt.changes){ab(gs,gt,gv,fk(gs));gs.curOp.forceUpdate=true}}if(!gt){gt=c1(gs,gu)}var gw=ct(gt,gu,gv);return{line:gu,view:gt,rect:null,map:gw.map,cache:gw.cache,before:gw.before,hasHeights:false}}function C(gs,gy,gw,gt,gv){if(gy.before){gw=-1}var gu=gw+(gt||""),gx;if(gy.cache.hasOwnProperty(gu)){gx=gy.cache[gu]}else{if(!gy.rect){gy.rect=gy.view.text.getBoundingClientRect()}if(!gy.hasHeights){ch(gs,gy.view,gy.rect);gy.hasHeights=true}gx=j(gs,gy,gw,gt);if(!gx.bogus){gy.cache[gu]=gx}}return{left:gx.left,right:gx.right,top:gv?gx.rtop:gx.top,bottom:gv?gx.rbottom:gx.bottom}}var eF={left:0,right:0,top:0,bottom:0};function aK(gt,gs,gz){var gv,gu,gx,gA;for(var gy=0;gy<gt.length;gy+=3){var gw=gt[gy],gB=gt[gy+1];if(gs<gw){gu=0;gx=1;gA="left"}else{if(gs<gB){gu=gs-gw;gx=gu+1}else{if(gy==gt.length-3||gs==gB&&gt[gy+3]>gs){gx=gB-gw;gu=gx-1;if(gs>=gB){gA="right"}}}}if(gu!=null){gv=gt[gy+2];if(gw==gB&&gz==(gv.insertLeft?"left":"right")){gA=gz}if(gz=="left"&&gu==0){while(gy&&gt[gy-2]==gt[gy-3]&&gt[gy-1].insertLeft){gv=gt[(gy-=3)+2];gA="left"}}if(gz=="right"&&gu==gB-gw){while(gy<gt.length-3&&gt[gy+3]==gt[gy+4]&&!gt[gy+5].insertLeft){gv=gt[(gy+=3)+2];gA="right"}}break}}return{node:gv,start:gu,end:gx,collapse:gA,coverStart:gw,coverEnd:gB}}function eY(gt,gs){var gv=eF;if(gs=="left"){for(var gu=0;gu<gt.length;gu++){if((gv=gt[gu]).left!=gv.right){break}}}else{for(var gu=gt.length-1;gu>=0;gu--){if((gv=gt[gu]).left!=gv.right){break}}}return gv}function j(gz,gJ,gC,gx){var gA=aK(gJ.map,gC,gx);var gH=gA.node,gw=gA.start,gv=gA.end,gs=gA.collapse;var gt;if(gH.nodeType==3){for(var gI=0;gI<4;gI++){while(gw&&fw(gJ.line.text.charAt(gA.coverStart+gw))){--gw}while(gA.coverStart+gv<gA.coverEnd&&fw(gJ.line.text.charAt(gA.coverStart+gv))){++gv}if(dL&&k<9&&gw==0&&gv==gA.coverEnd-gA.coverStart){gt=gH.parentNode.getBoundingClientRect()}else{gt=eY(cl(gH,gw,gv).getClientRects(),gx)}if(gt.left||gt.right||gw==0){break}gv=gw;gw=gw-1;gs="right"}if(dL&&k<11){gt=eS(gz.display.measure,gt)}}else{if(gw>0){gs=gx="right"}var gu;if(gz.options.lineWrapping&&(gu=gH.getClientRects()).length>1){gt=gu[gx=="right"?gu.length-1:0]}else{gt=gH.getBoundingClientRect()}}if(dL&&k<9&&!gw&&(!gt||!gt.left&&!gt.right)){var gy=gH.parentNode.getClientRects()[0];if(gy){gt={left:gy.left,right:gy.left+dE(gz.display),top:gy.top,bottom:gy.bottom}}else{gt=eF}}var gF=gt.top-gJ.rect.top,gD=gt.bottom-gJ.rect.top;var gL=(gF+gD)/2;var gK=gJ.view.measure.heights;for(var gI=0;gI<gK.length-1;gI++){if(gL<gK[gI]){break}}var gG=gI?gK[gI-1]:0,gE=gK[gI];var gB={left:(gs=="right"?gt.right:gt.left)-gJ.rect.left,right:(gs=="left"?gt.left:gt.right)-gJ.rect.left,top:gG,bottom:gE};if(!gt.left&&!gt.right){gB.bogus=true}if(!gz.options.singleCursorHeightPerLine){gB.rtop=gF;gB.rbottom=gD}return gB}function eS(gu,gv){if(!window.screen||screen.logicalXDPI==null||screen.logicalXDPI==screen.deviceXDPI||!aJ(gu)){return gv}var gt=screen.logicalXDPI/screen.deviceXDPI;var gs=screen.logicalYDPI/screen.deviceYDPI;return{left:gv.left*gt,right:gv.right*gt,top:gv.top*gs,bottom:gv.bottom*gs}}function at(gt){if(gt.measure){gt.measure.cache={};gt.measure.heights=null;if(gt.rest){for(var gs=0;gs<gt.rest.length;gs++){gt.measure.caches[gs]={}}}}}function aN(gs){gs.display.externalMeasure=null;d3(gs.display.lineMeasure);for(var gt=0;gt<gs.display.view.length;gt++){at(gs.display.view[gt])}}function aj(gs){aN(gs);gs.display.cachedCharWidth=gs.display.cachedTextHeight=gs.display.cachedPaddingH=null;if(!gs.options.lineWrapping){gs.display.maxLineChanged=true}gs.display.lineNumChars=null}function cu(){return window.pageXOffset||(document.documentElement||document.body).scrollLeft}function cs(){return window.pageYOffset||(document.documentElement||document.body).scrollTop}function eV(gy,gv,gx,gt){if(gv.widgets){for(var gu=0;gu<gv.widgets.length;++gu){if(gv.widgets[gu].above){var gA=cY(gv.widgets[gu]);gx.top+=gA;gx.bottom+=gA}}}if(gt=="line"){return gx}if(!gt){gt="local"}var gw=bL(gv);if(gt=="local"){gw+=ff(gy.display)}else{gw-=gy.display.viewOffset}if(gt=="page"||gt=="window"){var gs=gy.display.lineSpace.getBoundingClientRect();gw+=gs.top+(gt=="window"?0:cs());var gz=gs.left+(gt=="window"?0:cu());gx.left+=gz;gx.right+=gz}gx.top+=gw;gx.bottom+=gw;return gx}function gn(gt,gw,gu){if(gu=="div"){return gw}var gy=gw.left,gx=gw.top;if(gu=="page"){gy-=cu();gx-=cs()}else{if(gu=="local"||!gu){var gv=gt.display.sizer.getBoundingClientRect();gy+=gv.left;gx+=gv.top}}var gs=gt.display.lineSpace.getBoundingClientRect();return{left:gy-gs.left,top:gx-gs.top}}function cJ(gs,gw,gv,gu,gt){if(!gu){gu=fm(gs.doc,gw.line)}return eV(gs,gu,ek(gs,gu,gw.ch,gt),gv)}function dV(gB,gA,gu,gy,gD,gz){gy=gy||fm(gB.doc,gA.line);if(!gD){gD=a3(gB,gy)}function gw(gG,gF){var gE=C(gB,gD,gG,gF?"right":"left",gz);if(gF){gE.left=gE.right}else{gE.right=gE.left}return eV(gB,gy,gE,gu)}function gC(gH,gE){var gF=gx[gE],gG=gF.level%2;if(gH==dz(gF)&&gE&&gF.level<gx[gE-1].level){gF=gx[--gE];gH=gm(gF)-(gF.level%2?0:1);gG=true}else{if(gH==gm(gF)&&gE<gx.length-1&&gF.level<gx[gE+1].level){gF=gx[++gE];gH=dz(gF)-gF.level%2;gG=false}}if(gG&&gH==gF.to&&gH>gF.from){return gw(gH-1)}return gw(gH,gG)}var gx=a(gy),gs=gA.ch;if(!gx){return gw(gs)}var gt=aF(gx,gs);var gv=gC(gs,gt);if(e8!=null){gv.other=gC(gs,e8)}return gv}function dI(gs,gw){var gv=0,gw=fR(gs.doc,gw);if(!gs.options.lineWrapping){gv=dE(gs.display)*gw.ch}var gt=fm(gs.doc,gw.line);var gu=bL(gt)+ff(gs.display);return{left:gv,right:gv,top:gu,bottom:gu+gt.height}}function ga(gs,gt,gu,gw){var gv=W(gs,gt);gv.xRel=gw;if(gu){gv.outside=true}return gv}function fW(gz,gw,gv){var gy=gz.doc;gv+=gz.display.viewOffset;if(gv<0){return ga(gy.first,0,true,-1)}var gu=bF(gy,gv),gA=gy.first+gy.size-1;if(gu>gA){return ga(gy.first+gy.size-1,fm(gy,gA).text.length,true,1)}if(gw<0){gw=0}var gt=fm(gy,gu);for(;;){var gB=cZ(gz,gt,gu,gw,gv);var gx=ey(gt);var gs=gx&&gx.find(0,true);if(gx&&(gB.ch>gs.from.ch||gB.ch==gs.from.ch&&gB.xRel>0)){gu=bM(gt=gs.to.line)}else{return gB}}}function cZ(gC,gu,gF,gE,gD){var gB=gD-bL(gu);var gy=false,gL=2*gC.display.wrapper.clientWidth;var gI=a3(gC,gu);function gQ(gT){var gU=dV(gC,W(gF,gT),"line",gu,gI);gy=true;if(gB>gU.bottom){return gU.left-gL}else{if(gB<gU.top){return gU.left+gL}else{gy=false}}return gU.left}var gH=a(gu),gK=gu.text.length;var gM=cE(gu),gv=cS(gu);var gJ=gQ(gM),gs=gy,gt=gQ(gv),gx=gy;if(gE>gt){return ga(gF,gv,gx,1)}for(;;){if(gH?gv==gM||gv==u(gu,gM,1):gv-gM<=1){var gG=gE<gJ||gE-gJ<=gt-gE?gM:gv;var gR=gG==gM?gs:gx;var gP=gE-(gG==gM?gJ:gt);if(gx&&!gH&&!/\s/.test(gu.text.charAt(gG))&&gP>0&&gG<gu.text.length&&gI.view.measure.heights.length>1){var gN=C(gC,gI,gG,"right");if(gB<=gN.bottom&&gB>=gN.top&&Math.abs(gE-gN.right)<gP){gR=false;gG++;gP=gE-gN.right}}while(fw(gu.text.charAt(gG))){++gG}var gA=ga(gF,gG,gR,gP<-1?-1:gP>1?1:0);return gA}var gz=Math.ceil(gK/2),gS=gM+gz;if(gH){gS=gM;for(var gO=0;gO<gz;++gO){gS=u(gu,gS,1)}}var gw=gQ(gS);if(gw>gE){gv=gS;gt=gw;if(gx=gy){gt+=1000}gK=gz}else{gM=gS;gJ=gw;gs=gy;gK-=gz}}}var aG;function aX(gu){if(gu.cachedTextHeight!=null){return gu.cachedTextHeight}if(aG==null){aG=gb("pre");for(var gt=0;gt<49;++gt){aG.appendChild(document.createTextNode("x"));aG.appendChild(gb("br"))}aG.appendChild(document.createTextNode("x"))}bQ(gu.measure,aG);var gs=aG.offsetHeight/50;if(gs>3){gu.cachedTextHeight=gs}d3(gu.measure);return gs||1}function dE(gw){if(gw.cachedCharWidth!=null){return gw.cachedCharWidth}var gs=gb("span","xxxxxxxxxx");var gv=gb("pre",[gs]);bQ(gw.measure,gv);var gu=gs.getBoundingClientRect(),gt=(gu.right-gu.left)/10;if(gt>2){gw.cachedCharWidth=gt}return gt||10}var bo=null;var ea=0;function cI(gs){gs.curOp={cm:gs,viewChanged:false,startHeight:gs.doc.height,forceUpdate:false,updateInput:null,typing:false,changeObjs:null,cursorActivityHandlers:null,cursorActivityCalled:0,selectionChanged:false,updateMaxLine:false,scrollLeft:null,scrollTop:null,scrollToPos:null,focus:false,id:++ea};if(bo){bo.ops.push(gs.curOp)}else{gs.curOp.ownsGroup=bo={ops:[gs.curOp],delayedCallbacks:[]}}}function cU(gv){var gu=gv.delayedCallbacks,gt=0;do{for(;gt<gu.length;gt++){gu[gt].call(null)}for(var gs=0;gs<gv.ops.length;gs++){var gw=gv.ops[gs];if(gw.cursorActivityHandlers){while(gw.cursorActivityCalled<gw.cursorActivityHandlers.length){gw.cursorActivityHandlers[gw.cursorActivityCalled++].call(null,gw.cm)}}}}while(gt<gu.length)}function al(gs){var gv=gs.curOp,gu=gv.ownsGroup;if(!gu){return}try{cU(gu)}finally{bo=null;for(var gt=0;gt<gu.ops.length;gt++){gu.ops[gt].cm.curOp=null}cK(gu)}}function cK(gu){var gt=gu.ops;for(var gs=0;gs<gt.length;gs++){b4(gt[gs])}for(var gs=0;gs<gt.length;gs++){ap(gt[gs])}for(var gs=0;gs<gt.length;gs++){b1(gt[gs])}for(var gs=0;gs<gt.length;gs++){ao(gt[gs])}for(var gs=0;gs<gt.length;gs++){e6(gt[gs])}}function b4(gu){var gs=gu.cm,gt=gs.display;J(gs);if(gu.updateMaxLine){h(gs)}gu.mustUpdate=gu.viewChanged||gu.forceUpdate||gu.scrollTop!=null||gu.scrollToPos&&(gu.scrollToPos.from.line<gt.viewFrom||gu.scrollToPos.to.line>=gt.viewTo)||gt.maxLineChanged&&gs.options.lineWrapping;gu.update=gu.mustUpdate&&new aH(gs,gu.mustUpdate&&{top:gu.scrollTop,ensure:gu.scrollToPos},gu.forceUpdate)}function ap(gs){gs.updatedDisplay=gs.mustUpdate&&B(gs.cm,gs.update)}function b1(gu){var gs=gu.cm,gt=gs.display;if(gu.updatedDisplay){a8(gs)}gu.barMeasure=dB(gs);if(gt.maxLineChanged&&!gs.options.lineWrapping){gu.adjustWidthTo=ek(gs,gt.maxLine,gt.maxLine.text.length).left+3;gs.display.sizerWidth=gu.adjustWidthTo;gu.barMeasure.scrollWidth=Math.max(gt.scroller.clientWidth,gt.sizer.offsetLeft+gu.adjustWidthTo+cT(gs)+gs.display.barWidth);gu.maxScrollLeft=Math.max(0,gt.sizer.offsetLeft+gu.adjustWidthTo-dm(gs))}if(gu.updatedDisplay||gu.selectionChanged){gu.preparedSelection=gt.input.prepareSelection(gu.focus)}}function ao(gu){var gs=gu.cm;if(gu.adjustWidthTo!=null){gs.display.sizer.style.minWidth=gu.adjustWidthTo+"px";if(gu.maxScrollLeft<gs.doc.scrollLeft){bD(gs,Math.min(gs.display.scroller.scrollLeft,gu.maxScrollLeft),true)}gs.display.maxLineChanged=false}var gt=gu.focus&&gu.focus==dP()&&(!document.hasFocus||document.hasFocus());if(gu.preparedSelection){gs.display.input.showSelection(gu.preparedSelection,gt)}if(gu.updatedDisplay||gu.startHeight!=gs.doc.height){e4(gs,gu.barMeasure)}if(gu.updatedDisplay){dA(gs,gu.barMeasure)}if(gu.selectionChanged){o(gs)}if(gs.state.focused&&gu.updateInput){gs.display.input.reset(gu.typing)}if(gt){r(gu.cm)}}function e6(gz){var gs=gz.cm,gx=gs.display,gw=gs.doc;if(gz.updatedDisplay){cj(gs,gz.update)}if(gx.wheelStartX!=null&&(gz.scrollTop!=null||gz.scrollLeft!=null||gz.scrollToPos)){gx.wheelStartX=gx.wheelStartY=null}if(gz.scrollTop!=null&&(gx.scroller.scrollTop!=gz.scrollTop||gz.forceScroll)){gw.scrollTop=Math.max(0,Math.min(gx.scroller.scrollHeight-gx.scroller.clientHeight,gz.scrollTop));gx.scrollbars.setScrollTop(gw.scrollTop);gx.scroller.scrollTop=gw.scrollTop}if(gz.scrollLeft!=null&&(gx.scroller.scrollLeft!=gz.scrollLeft||gz.forceScroll)){gw.scrollLeft=Math.max(0,Math.min(gx.scroller.scrollWidth-gx.scroller.clientWidth,gz.scrollLeft));gx.scrollbars.setScrollLeft(gw.scrollLeft);gx.scroller.scrollLeft=gw.scrollLeft;eI(gs)}if(gz.scrollToPos){var gv=D(gs,fR(gw,gz.scrollToPos.from),fR(gw,gz.scrollToPos.to),gz.scrollToPos.margin);if(gz.scrollToPos.isCursor&&gs.state.focused){d8(gs,gv)}}var gu=gz.maybeHiddenMarkers,gy=gz.maybeUnhiddenMarkers;if(gu){for(var gt=0;gt<gu.length;++gt){if(!gu[gt].lines.length){aD(gu[gt],"hide")}}}if(gy){for(var gt=0;gt<gy.length;++gt){if(gy[gt].lines.length){aD(gy[gt],"unhide")}}}if(gx.wrapper.offsetHeight){gw.scrollTop=gs.display.scroller.scrollTop}if(gz.changeObjs){aD(gs,"changes",gs,gz.changeObjs)}if(gz.update){gz.update.finish()}}function cM(gs,gt){if(gs.curOp){return gt()}cI(gs);try{return gt()}finally{al(gs)}}function c2(gs,gt){return function(){if(gs.curOp){return gt.apply(gs,arguments)}cI(gs);try{return gt.apply(gs,arguments)}finally{al(gs)}}}function c8(gs){return function(){if(this.curOp){return gs.apply(this,arguments)}cI(this);try{return gs.apply(this,arguments)}finally{al(this)}}}function cD(gs){return function(){var gt=this.cm;if(!gt||gt.curOp){return gs.apply(this,arguments)}cI(gt);try{return gs.apply(this,arguments)}finally{al(gt)}}}function bu(gu,gs,gt){this.line=gs;this.rest=g(gs);this.size=this.rest?bM(fN(this.rest))-gt+1:1;this.node=this.text=null;this.hidden=fD(gu,gs)}function e1(gs,gy,gx){var gw=[],gu;for(var gv=gy;gv<gx;gv=gu){var gt=new bu(gs.doc,fm(gs.doc,gv),gv);gu=gv+gt.size;gw.push(gt)}return gw}function ah(gz,gx,gy,gA){if(gx==null){gx=gz.doc.first}if(gy==null){gy=gz.doc.first+gz.doc.size}if(!gA){gA=0}var gu=gz.display;if(gA&&gy<gu.viewTo&&(gu.updateLineNumbers==null||gu.updateLineNumbers>gx)){gu.updateLineNumbers=gx}gz.curOp.viewChanged=true;if(gx>=gu.viewTo){if(a6&&aV(gz.doc,gx)<gu.viewTo){eB(gz)}}else{if(gy<=gu.viewFrom){if(a6&&d4(gz.doc,gy+gA)>gu.viewFrom){eB(gz)}else{gu.viewFrom+=gA;gu.viewTo+=gA}}else{if(gx<=gu.viewFrom&&gy>=gu.viewTo){eB(gz)}else{if(gx<=gu.viewFrom){var gw=df(gz,gy,gy+gA,1);if(gw){gu.view=gu.view.slice(gw.index);gu.viewFrom=gw.lineN;gu.viewTo+=gA}else{eB(gz)}}else{if(gy>=gu.viewTo){var gw=df(gz,gx,gx,-1);if(gw){gu.view=gu.view.slice(0,gw.index);gu.viewTo=gw.lineN}else{eB(gz)}}else{var gv=df(gz,gx,gx,-1);var gt=df(gz,gy,gy+gA,1);if(gv&&gt){gu.view=gu.view.slice(0,gv.index).concat(e1(gz,gv.lineN,gt.lineN)).concat(gu.view.slice(gt.index));gu.viewTo+=gA}else{eB(gz)}}}}}}var gs=gu.externalMeasured;if(gs){if(gy<gs.lineN){gs.lineN+=gA}else{if(gx<gs.lineN+gs.size){gu.externalMeasured=null}}}}function R(gt,gu,gx){gt.curOp.viewChanged=true;var gy=gt.display,gw=gt.display.externalMeasured;if(gw&&gu>=gw.lineN&&gu<gw.lineN+gw.size){gy.externalMeasured=null}if(gu<gy.viewFrom||gu>=gy.viewTo){return}var gv=gy.view[ds(gt,gu)];if(gv.node==null){return}var gs=gv.changes||(gv.changes=[]);if(di(gs,gx)==-1){gs.push(gx)}}function eB(gs){gs.display.viewFrom=gs.display.viewTo=gs.doc.first;gs.display.view=[];gs.display.viewOffset=0}function ds(gs,gv){if(gv>=gs.display.viewTo){return null}gv-=gs.display.viewFrom;if(gv<0){return null}var gt=gs.display.view;for(var gu=0;gu<gt.length;gu++){gv-=gt[gu].size;if(gv<0){return gu}}}function df(gA,gu,gw,gt){var gx=ds(gA,gu),gz,gy=gA.display.view;if(!a6||gw==gA.doc.first+gA.doc.size){return{index:gx,lineN:gw}}for(var gv=0,gs=gA.display.viewFrom;gv<gx;gv++){gs+=gy[gv].size}if(gs!=gu){if(gt>0){if(gx==gy.length-1){return null}gz=(gs+gy[gx].size)-gu;gx++}else{gz=gs-gu}gu+=gz;gw+=gz}while(aV(gA.doc,gw)!=gw){if(gx==(gt<0?0:gy.length-1)){return null}gw+=gt*gy[gx-(gt<0?1:0)].size;gx+=gt}return{index:gx,lineN:gw}}function cR(gs,gw,gv){var gu=gs.display,gt=gu.view;if(gt.length==0||gw>=gu.viewTo||gv<=gu.viewFrom){gu.view=e1(gs,gw,gv);gu.viewFrom=gw}else{if(gu.viewFrom>gw){gu.view=e1(gs,gw,gu.viewFrom).concat(gu.view)}else{if(gu.viewFrom<gw){gu.view=gu.view.slice(ds(gs,gw))}}gu.viewFrom=gw;if(gu.viewTo<gv){gu.view=gu.view.concat(e1(gs,gu.viewTo,gv))}else{if(gu.viewTo>gv){gu.view=gu.view.slice(0,ds(gs,gv))}}}gu.viewTo=gv}function dc(gs){var gt=gs.display.view,gw=0;for(var gv=0;gv<gt.length;gv++){var gu=gt[gv];if(!gu.hidden&&(!gu.node||gu.changes)){++gw}}return gw}function fY(gt){var gx=gt.display;bW(gx.scroller,"mousedown",c2(gt,ez));if(dL&&k<11){bW(gx.scroller,"dblclick",c2(gt,function(gB){if(aQ(gt,gB)){return}var gC=cn(gt,gB);if(!gC||l(gt,gB)||ba(gt.display,gB)){return}cG(gB);var gA=gt.findWordAt(gC);f5(gt.doc,gA.anchor,gA.head)}))}else{bW(gx.scroller,"dblclick",function(gA){aQ(gt,gA)||cG(gA)})}if(!gi){bW(gx.scroller,"contextmenu",function(gA){ax(gt,gA)})}var gz,gs={end:0};function gy(){if(gx.activeTouch){gz=setTimeout(function(){gx.activeTouch=null},1000);gs=gx.activeTouch;gs.end=+new Date}}function gv(gA){if(gA.touches.length!=1){return false}var gB=gA.touches[0];return gB.radiusX<=1&&gB.radiusY<=1}function gu(gD,gA){if(gA.left==null){return true}var gC=gA.left-gD.left,gB=gA.top-gD.top;return gC*gC+gB*gB>20*20}bW(gx.scroller,"touchstart",function(gB){if(!aQ(gt,gB)&&!gv(gB)){clearTimeout(gz);var gA=+new Date;gx.activeTouch={start:gA,moved:false,prev:gA-gs.end<=300?gs:null};if(gB.touches.length==1){gx.activeTouch.left=gB.touches[0].pageX;gx.activeTouch.top=gB.touches[0].pageY}}});bW(gx.scroller,"touchmove",function(){if(gx.activeTouch){gx.activeTouch.moved=true}});bW(gx.scroller,"touchend",function(gB){var gD=gx.activeTouch;if(gD&&!ba(gx,gB)&&gD.left!=null&&!gD.moved&&new Date-gD.start<300){var gC=gt.coordsChar(gx.activeTouch,"page"),gA;if(!gD.prev||gu(gD,gD.prev)){gA=new dZ(gC,gC)}else{if(!gD.prev.prev||gu(gD,gD.prev.prev)){gA=gt.findWordAt(gC)}else{gA=new dZ(W(gC.line,0),fR(gt.doc,W(gC.line+1,0)))}}gt.setSelection(gA.anchor,gA.head);gt.focus();cG(gB)}gy()});bW(gx.scroller,"touchcancel",gy);bW(gx.scroller,"scroll",function(){if(gx.scroller.clientHeight){N(gt,gx.scroller.scrollTop);bD(gt,gx.scroller.scrollLeft,true);aD(gt,"scroll",gt)}});bW(gx.scroller,"mousewheel",function(gA){b(gt,gA)});bW(gx.scroller,"DOMMouseScroll",function(gA){b(gt,gA)});bW(gx.wrapper,"scroll",function(){gx.wrapper.scrollTop=gx.wrapper.scrollLeft=0});gx.dragFunctions={enter:function(gA){if(!aQ(gt,gA)){ev(gA)}},over:function(gA){if(!aQ(gt,gA)){gp(gt,gA);ev(gA)}},start:function(gA){Q(gt,gA)},drop:c2(gt,bj),leave:function(gA){if(!aQ(gt,gA)){db(gt)}}};var gw=gx.input.getField();bW(gw,"keyup",function(gA){bh.call(gt,gA)});bW(gw,"keydown",c2(gt,p));bW(gw,"keypress",c2(gt,cx));bW(gw,"focus",cv(cB,gt));bW(gw,"blur",cv(aU,gt))}function f9(gt,gw,gu){var gx=gu&&gu!=H.Init;if(!gw!=!gx){var gv=gt.display.dragFunctions;var gs=gw?bW:eg;gs(gt.display.scroller,"dragstart",gv.start);gs(gt.display.scroller,"dragenter",gv.enter);gs(gt.display.scroller,"dragover",gv.over);gs(gt.display.scroller,"dragleave",gv.leave);gs(gt.display.scroller,"drop",gv.drop)}}function aS(gs){var gt=gs.display;if(gt.lastWrapHeight==gt.wrapper.clientHeight&&gt.lastWrapWidth==gt.wrapper.clientWidth){return}gt.cachedCharWidth=gt.cachedTextHeight=gt.cachedPaddingH=null;gt.scrollbarsClipped=false;gs.setSize()}function ba(gt,gs){for(var gu=L(gs);gu!=gt.wrapper;gu=gu.parentNode){if(!gu||(gu.nodeType==1&&gu.getAttribute("cm-ignore-events")=="true")||(gu.parentNode==gt.sizer&&gu!=gt.mover)){return true}}}function cn(gB,gw,gt,gu){var gx=gB.display;if(!gt&&L(gw).getAttribute("cm-not-content")=="true"){return null}var gA,gy,gs=gx.lineSpace.getBoundingClientRect();try{gA=gw.clientX-gs.left;gy=gw.clientY-gs.top}catch(gw){return null}var gz=fW(gB,gA,gy),gC;if(gu&&gz.xRel==1&&(gC=fm(gB.doc,gz.line).text).length==gz.ch){var gv=bS(gC,gC.length,gB.options.tabSize)-gC.length;gz=W(gz.line,Math.max(0,Math.round((gA-fb(gB.display).left)/dE(gB.display))-gv))}return gz}function ez(gu){var gs=this,gt=gs.display;if(aQ(gs,gu)||gt.activeTouch&&gt.input.supportsTouch()){return}gt.shift=gu.shiftKey;if(ba(gt,gu)){if(!c0){gt.scroller.draggable=false;setTimeout(function(){gt.scroller.draggable=true},100)}return}if(l(gs,gu)){return}var gv=cn(gs,gu);window.focus();switch(fV(gu)){case 1:if(gs.state.selectingText){gs.state.selectingText(gu)}else{if(gv){aw(gs,gu,gv)}else{if(L(gu)==gt.scroller){cG(gu)}}}break;case 2:if(c0){gs.state.lastMiddleDown=+new Date}if(gv){f5(gs.doc,gv)}setTimeout(function(){gt.input.focus()},20);cG(gu);break;case 3:if(gi){ax(gs,gu)}else{ak(gs)}break}}var dp,de;function aw(gt,gy,gz){if(dL){setTimeout(cv(r,gt),0)}else{gt.curOp.focus=dP()}var gu=+new Date,gw;if(de&&de.time>gu-400&&cf(de.pos,gz)==0){gw="triple"}else{if(dp&&dp.time>gu-400&&cf(dp.pos,gz)==0){gw="double";de={time:gu,pos:gz}}else{gw="single";dp={time:gu,pos:gz}}}var gx=gt.doc.sel,gs=b6?gy.metaKey:gy.ctrlKey,gv;if(gt.options.dragDrop&&eQ&&!gt.isReadOnly()&&gw=="single"&&(gv=gx.contains(gz))>-1&&(cf((gv=gx.ranges[gv]).from(),gz)<0||gz.xRel>0)&&(cf(gv.to(),gz)>0||gz.xRel<0)){a2(gt,gy,gz,gs)}else{m(gt,gy,gz,gw,gs)}}function a2(gu,gx,gy,gt){var gw=gu.display,gv=+new Date;var gs=c2(gu,function(gz){if(c0){gw.scroller.draggable=false}gu.state.draggingText=false;eg(document,"mouseup",gs);eg(gw.scroller,"drop",gs);if(Math.abs(gx.clientX-gz.clientX)+Math.abs(gx.clientY-gz.clientY)<10){cG(gz);if(!gt&&+new Date-200<gv){f5(gu.doc,gy)}if(c0||dL&&k==9){setTimeout(function(){document.body.focus();gw.input.focus()},20)}else{gw.input.focus()}}});if(c0){gw.scroller.draggable=true}gu.state.draggingText=gs;gs.copy=b6?gx.altKey:gx.ctrlKey;if(gw.scroller.dragDrop){gw.scroller.dragDrop()}bW(document,"mouseup",gs);bW(gw.scroller,"drop",gs)}function m(gw,gK,gv,gt,gy){var gH=gw.display,gM=gw.doc;cG(gK);var gu,gL,gx=gM.sel,gs=gx.ranges;if(gy&&!gK.shiftKey){gL=gM.sel.contains(gv);if(gL>-1){gu=gs[gL]}else{gu=new dZ(gv,gv)}}else{gu=gM.sel.primary();gL=gM.sel.primIndex}if(fQ?gK.shiftKey&&gK.metaKey:gK.altKey){gt="rect";if(!gy){gu=new dZ(gv,gv)}gv=cn(gw,gK,true,true);gL=-1}else{if(gt=="double"){var gI=gw.findWordAt(gv);if(gw.display.shift||gM.extend){gu=fC(gM,gu,gI.anchor,gI.head)}else{gu=gI}}else{if(gt=="triple"){var gB=new dZ(W(gv.line,0),fR(gM,W(gv.line+1,0)));if(gw.display.shift||gM.extend){gu=fC(gM,gu,gB.anchor,gB.head)}else{gu=gB}}else{gu=fC(gM,gu,gv)}}}if(!gy){gL=0;bT(gM,new gc([gu],0),M);gx=gM.sel}else{if(gL==-1){gL=gs.length;bT(gM,cw(gs.concat([gu]),gL),{scroll:false,origin:"*mouse"})}else{if(gs.length>1&&gs[gL].empty()&&gt=="single"&&!gK.shiftKey){bT(gM,cw(gs.slice(0,gL).concat(gs.slice(gL+1)),0),{scroll:false,origin:"*mouse"});gx=gM.sel}else{e(gM,gL,gu,M)}}}var gG=gv;function gF(gX){if(cf(gG,gX)==0){return}gG=gX;if(gt=="rect"){var gO=[],gU=gw.options.tabSize;var gN=bS(fm(gM,gv.line).text,gv.ch,gU);var g0=bS(fm(gM,gX.line).text,gX.ch,gU);var gP=Math.min(gN,g0),gY=Math.max(gN,g0);for(var g1=Math.min(gv.line,gX.line),gR=Math.min(gw.lastLine(),Math.max(gv.line,gX.line));g1<=gR;g1++){var gZ=fm(gM,g1).text,gQ=eu(gZ,gP,gU);if(gP==gY){gO.push(new dZ(W(g1,gQ),W(g1,gQ)))}else{if(gZ.length>gQ){gO.push(new dZ(W(g1,gQ),W(g1,eu(gZ,gY,gU))))}}}if(!gO.length){gO.push(new dZ(gv,gv))}bT(gM,cw(gx.ranges.slice(0,gL).concat(gO),gL),{origin:"*mouse",scroll:false});gw.scrollIntoView(gX)}else{var gV=gu;var gS=gV.anchor,gW=gX;if(gt!="single"){if(gt=="double"){var gT=gw.findWordAt(gX)}else{var gT=new dZ(W(gX.line,0),fR(gM,W(gX.line+1,0)))}if(cf(gT.anchor,gS)>0){gW=gT.head;gS=aq(gV.from(),gT.anchor)}else{gW=gT.anchor;gS=bw(gV.to(),gT.head)}}var gO=gx.ranges.slice(0);gO[gL]=new dZ(fR(gM,gS),gW);bT(gM,cw(gO,gL),M)}}var gD=gH.wrapper.getBoundingClientRect();var gz=0;function gJ(gP){var gN=++gz;var gR=cn(gw,gP,true,gt=="rect");if(!gR){return}if(cf(gR,gG)!=0){gw.curOp.focus=dP();gF(gR);var gQ=b5(gH,gM);if(gR.line>=gQ.to||gR.line<gQ.from){setTimeout(c2(gw,function(){if(gz==gN){gJ(gP)}}),150)}}else{var gO=gP.clientY<gD.top?-20:gP.clientY>gD.bottom?20:0;if(gO){setTimeout(c2(gw,function(){if(gz!=gN){return}gH.scroller.scrollTop+=gO;gJ(gP)}),50)}}}function gC(gN){gw.state.selectingText=false;gz=Infinity;cG(gN);gH.input.focus();eg(document,"mousemove",gE);eg(document,"mouseup",gA);gM.history.lastSelOrigin=null}var gE=c2(gw,function(gN){if(!fV(gN)){gC(gN)}else{gJ(gN)}});var gA=c2(gw,gC);gw.state.selectingText=gA;bW(document,"mousemove",gE);bW(document,"mouseup",gA)}function gq(gC,gy,gA,gB){try{var gt=gy.clientX,gs=gy.clientY}catch(gy){return false}if(gt>=Math.floor(gC.display.gutters.getBoundingClientRect().right)){return false}if(gB){cG(gy)}var gz=gC.display;var gx=gz.lineDiv.getBoundingClientRect();if(gs>gx.bottom||!fp(gC,gA)){return bK(gy)}gs-=gx.top-gz.viewOffset;for(var gv=0;gv<gC.options.gutters.length;++gv){var gw=gz.gutters.childNodes[gv];if(gw&&gw.getBoundingClientRect().right>=gt){var gD=bF(gC.doc,gs);var gu=gC.options.gutters[gv];aD(gC,gA,gC,gD,gu,gy);return bK(gy)}}}function l(gs,gt){return gq(gs,gt,"gutterClick",true)}var ag=0;function bj(gy){var gA=this;db(gA);if(aQ(gA,gy)||ba(gA.display,gy)){return}cG(gy);if(dL){ag=+new Date}var gz=cn(gA,gy,true),gs=gy.dataTransfer.files;if(!gz||gA.isReadOnly()){return}if(gs&&gs.length&&window.FileReader&&window.File){var gu=gs.length,gB=Array(gu),gt=0;var gw=function(gE,gD){if(gA.options.allowDropFileTypes&&di(gA.options.allowDropFileTypes,gE.type)==-1){return}var gC=new FileReader;gC.onload=c2(gA,function(){var gF=gC.result;if(/[\x00-\x08\x0e-\x1f]{2}/.test(gF)){gF=""}gB[gD]=gF;if(++gt==gu){gz=fR(gA.doc,gz);var gG={from:gz,to:gz,text:gA.doc.splitLines(gB.join(gA.doc.lineSeparator())),origin:"paste"};bf(gA.doc,gG);fe(gA.doc,eX(gz,cX(gG)))}});gC.readAsText(gE)};for(var gx=0;gx<gu;++gx){gw(gs[gx],gx)}}else{if(gA.state.draggingText&&gA.doc.sel.contains(gz)>-1){gA.state.draggingText(gy);setTimeout(function(){gA.display.input.focus()},20);return}try{var gB=gy.dataTransfer.getData("Text");if(gB){if(gA.state.draggingText&&!gA.state.draggingText.copy){var gv=gA.listSelections()}et(gA.doc,eX(gz,gz));if(gv){for(var gx=0;gx<gv.length;++gx){a0(gA.doc,"",gv[gx].anchor,gv[gx].head,"drag")}}gA.replaceSelection(gB,"around","paste");gA.display.input.focus()}}catch(gy){}}}function Q(gs,gu){if(dL&&(!gs.state.draggingText||+new Date-ag<100)){ev(gu);return}if(aQ(gs,gu)||ba(gs.display,gu)){return}gu.dataTransfer.setData("Text",gs.getSelection());gu.dataTransfer.effectAllowed="copyMove";if(gu.dataTransfer.setDragImage&&!aB){var gt=gb("img",null,null,"position: fixed; left: 0; top: 0;");gt.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==";if(d5){gt.width=gt.height=1;gs.display.wrapper.appendChild(gt);gt._top=gt.offsetTop}gu.dataTransfer.setDragImage(gt,0,0);if(d5){gt.parentNode.removeChild(gt)}}}function gp(gs,gt){var gv=cn(gs,gt);if(!gv){return}var gu=document.createDocumentFragment();A(gs,gv,gu);if(!gs.display.dragCursor){gs.display.dragCursor=gb("div",null,"CodeMirror-cursors CodeMirror-dragcursors");gs.display.lineSpace.insertBefore(gs.display.dragCursor,gs.display.cursorDiv)}bQ(gs.display.dragCursor,gu)}function db(gs){if(gs.display.dragCursor){gs.display.lineSpace.removeChild(gs.display.dragCursor);gs.display.dragCursor=null}}function N(gs,gt){if(Math.abs(gs.doc.scrollTop-gt)<2){return}gs.doc.scrollTop=gt;if(!co){dU(gs,{top:gt})}if(gs.display.scroller.scrollTop!=gt){gs.display.scroller.scrollTop=gt}gs.display.scrollbars.setScrollTop(gt);if(co){dU(gs)}ei(gs,100)}function bD(gs,gu,gt){if(gt?gu==gs.doc.scrollLeft:Math.abs(gs.doc.scrollLeft-gu)<2){return}gu=Math.min(gu,gs.display.scroller.scrollWidth-gs.display.scroller.clientWidth);gs.doc.scrollLeft=gu;eI(gs);if(gs.display.scroller.scrollLeft!=gu){gs.display.scroller.scrollLeft=gu}gs.display.scrollbars.setScrollLeft(gu)}var ft=0,cg=null;if(dL){cg=-0.53}else{if(co){cg=15}else{if(dd){cg=-0.7}else{if(aB){cg=-1/3}}}}var cQ=function(gu){var gt=gu.wheelDeltaX,gs=gu.wheelDeltaY;if(gt==null&&gu.detail&&gu.axis==gu.HORIZONTAL_AXIS){gt=gu.detail}if(gs==null&&gu.detail&&gu.axis==gu.VERTICAL_AXIS){gs=gu.detail}else{if(gs==null){gs=gu.wheelDelta}}return{x:gt,y:gs}};H.wheelEventPixels=function(gs){var gt=cQ(gs);gt.x*=cg;gt.y*=cg;return gt};function b(gC,gw){var gE=cQ(gw),gG=gE.x,gF=gE.y;var gy=gC.display,gB=gy.scroller;var gv=gB.scrollWidth>gB.clientWidth;var gu=gB.scrollHeight>gB.clientHeight;if(!(gG&&gv||gF&&gu)){return}if(gF&&b6&&c0){outer:for(var gD=gw.target,gA=gy.view;gD!=gB;gD=gD.parentNode){for(var gt=0;gt<gA.length;gt++){if(gA[gt].node==gD){gC.display.currentWheelTarget=gD;break outer}}}}if(gG&&!co&&!d5&&cg!=null){if(gF&&gu){N(gC,Math.max(0,Math.min(gB.scrollTop+gF*cg,gB.scrollHeight-gB.clientHeight)))}bD(gC,Math.max(0,Math.min(gB.scrollLeft+gG*cg,gB.scrollWidth-gB.clientWidth)));if(!gF||(gF&&gu)){cG(gw)}gy.wheelStartX=null;return}if(gF&&cg!=null){var gs=gF*cg;var gz=gC.doc.scrollTop,gx=gz+gy.wrapper.clientHeight;if(gs<0){gz=Math.max(0,gz+gs-50)}else{gx=Math.min(gC.doc.height,gx+gs+50)}dU(gC,{top:gz,bottom:gx})}if(ft<20){if(gy.wheelStartX==null){gy.wheelStartX=gB.scrollLeft;gy.wheelStartY=gB.scrollTop;gy.wheelDX=gG;gy.wheelDY=gF;setTimeout(function(){if(gy.wheelStartX==null){return}var gH=gB.scrollLeft-gy.wheelStartX;var gJ=gB.scrollTop-gy.wheelStartY;var gI=(gJ&&gy.wheelDY&&gJ/gy.wheelDY)||(gH&&gy.wheelDX&&gH/gy.wheelDX);gy.wheelStartX=gy.wheelStartY=null;if(!gI){return}cg=(cg*ft+gI)/(ft+1);++ft},200)}else{gy.wheelDX+=gG;gy.wheelDY+=gF}}}function fZ(gt,gw,gs){if(typeof gw=="string"){gw=eH[gw];if(!gw){return false}}gt.display.input.ensurePolled();var gv=gt.display.shift,gu=false;try{if(gt.isReadOnly()){gt.state.suppressEdits=true}if(gs){gt.display.shift=false}gu=gw(gt)!=ca}finally{gt.display.shift=gv;gt.state.suppressEdits=false}return gu}function ec(gt,gu,gw){for(var gv=0;gv<gt.state.keyMaps.length;gv++){var gs=i(gu,gt.state.keyMaps[gv],gw,gt);if(gs){return gs}}return(gt.options.extraKeys&&i(gu,gt.options.extraKeys,gw,gt))||i(gu,gt.options.keyMap,gw,gt)}var dN=new gr;function bc(gt,gv,gx,gw){var gu=gt.state.keySeq;if(gu){if(eG(gv)){return"handled"}dN.set(50,function(){if(gt.state.keySeq==gu){gt.state.keySeq=null;gt.display.input.reset()}});gv=gu+" "+gv}var gs=ec(gt,gv,gw);if(gs=="multi"){gt.state.keySeq=gv}if(gs=="handled"){ae(gt,"keyHandled",gt,gv,gx)}if(gs=="handled"||gs=="multi"){cG(gx);o(gt)}if(gu&&!gs&&/\'$/.test(gv)){cG(gx);return true}return !!gs}function fq(gs,gu){var gt=fy(gu,true);if(!gt){return false}if(gu.shiftKey&&!gs.state.keySeq){return bc(gs,"Shift-"+gt,gu,function(gv){return fZ(gs,gv,true)})||bc(gs,gt,gu,function(gv){if(typeof gv=="string"?/^go[A-Z]/.test(gv):gv.motion){return fZ(gs,gv)}})}else{return bc(gs,gt,gu,function(gv){return fZ(gs,gv)})}}function em(gs,gu,gt){return bc(gs,"'"+gt+"'",gu,function(gv){return fZ(gs,gv,true)})}var dn=null;function p(gv){var gs=this;gs.curOp.focus=dP();if(aQ(gs,gv)){return}if(dL&&k<11&&gv.keyCode==27){gv.returnValue=false}var gt=gv.keyCode;gs.display.shift=gt==16||gv.shiftKey;var gu=fq(gs,gv);if(d5){dn=gu?gt:null;if(!gu&&gt==88&&!da&&(b6?gv.metaKey:gv.ctrlKey)){gs.replaceSelection("",null,"cut")}}if(gt==18&&!/\bCodeMirror-crosshair\b/.test(gs.display.lineDiv.className)){au(gs)}}function au(gt){var gu=gt.display.lineDiv;fH(gu,"CodeMirror-crosshair");function gs(gv){if(gv.keyCode==18||!gv.altKey){f(gu,"CodeMirror-crosshair");eg(document,"keyup",gs);eg(document,"mouseover",gs)}}bW(document,"keyup",gs);bW(document,"mouseover",gs)}function bh(gs){if(gs.keyCode==16){this.doc.sel.shift=false}aQ(this,gs)}function cx(gw){var gs=this;if(ba(gs.display,gw)||aQ(gs,gw)||gw.ctrlKey&&!gw.altKey||b6&&gw.metaKey){return}var gv=gw.keyCode,gt=gw.charCode;if(d5&&gv==dn){dn=null;cG(gw);return}if((d5&&(!gw.which||gw.which<10))&&fq(gs,gw)){return}var gu=String.fromCharCode(gt==null?gv:gt);if(em(gs,gw,gu)){return}gs.display.input.onKeyPress(gw)}function ak(gs){gs.state.delayingBlurEvent=true;setTimeout(function(){if(gs.state.delayingBlurEvent){gs.state.delayingBlurEvent=false;aU(gs)}},100)}function cB(gs){if(gs.state.delayingBlurEvent){gs.state.delayingBlurEvent=false}if(gs.options.readOnly=="nocursor"){return}if(!gs.state.focused){aD(gs,"focus",gs);gs.state.focused=true;fH(gs.display.wrapper,"CodeMirror-focused");if(!gs.curOp&&gs.display.selForContextMenu!=gs.doc.sel){gs.display.input.reset();if(c0){setTimeout(function(){gs.display.input.reset(true)},20)}}gs.display.input.receivedFocus()}o(gs)}function aU(gs){if(gs.state.delayingBlurEvent){return}if(gs.state.focused){aD(gs,"blur",gs);gs.state.focused=false;f(gs.display.wrapper,"CodeMirror-focused")}clearInterval(gs.display.blinker);setTimeout(function(){if(!gs.state.focused){gs.display.shift=false}},150)}function ax(gs,gt){if(ba(gs.display,gt)||dh(gs,gt)){return}if(aQ(gs,gt,"contextmenu")){return}gs.display.input.onContextMenu(gt)}function dh(gs,gt){if(!fp(gs,"gutterContextMenu")){return false}return gq(gs,gt,"gutterContextMenu",false)}var cX=H.changeEnd=function(gs){if(!gs.text){return gs.to}return W(gs.from.line+gs.text.length-1,fN(gs.text).length+(gs.text.length==1?gs.from.ch:0))};function bY(gv,gu){if(cf(gv,gu.from)<0){return gv}if(cf(gv,gu.to)<=0){return cX(gu)}var gs=gv.line+gu.text.length-(gu.to.line-gu.from.line)-1,gt=gv.ch;if(gv.line==gu.to.line){gt+=cX(gu).ch-gu.to.ch}return W(gs,gt)}function fr(gv,gw){var gt=[];for(var gu=0;gu<gv.sel.ranges.length;gu++){var gs=gv.sel.ranges[gu];gt.push(new dZ(bY(gs.anchor,gw),bY(gs.head,gw)))}return cw(gt,gv.sel.primIndex)}function bt(gu,gt,gs){if(gu.line==gt.line){return W(gs.line,gu.ch-gt.ch+gs.ch)}else{return W(gs.line+(gu.line-gt.line),gu.ch)}}function af(gC,gz,gt){var gu=[];var gs=W(gC.first,0),gD=gs;for(var gw=0;gw<gz.length;gw++){var gy=gz[gw];var gB=bt(gy.from,gs,gD);var gA=bt(cX(gy),gs,gD);gs=gy.to;gD=gA;if(gt=="around"){var gx=gC.sel.ranges[gw],gv=cf(gx.head,gx.anchor)<0;gu[gw]=new dZ(gv?gA:gB,gv?gB:gA)}else{gu[gw]=new dZ(gB,gB)}}return new gc(gu,gC.sel.primIndex)}function dS(gt,gv,gu){var gs={canceled:false,from:gv.from,to:gv.to,text:gv.text,origin:gv.origin,cancel:function(){this.canceled=true}};if(gu){gs.update=function(gz,gy,gx,gw){if(gz){this.from=fR(gt,gz)}if(gy){this.to=fR(gt,gy)}if(gx){this.text=gx}if(gw!==undefined){this.origin=gw}}}aD(gt,"beforeChange",gt,gs);if(gt.cm){aD(gt.cm,"beforeChange",gt.cm,gs)}if(gs.canceled){return null}return{from:gs.from,to:gs.to,text:gs.text,origin:gs.origin}}function bf(gv,gw,gu){if(gv.cm){if(!gv.cm.curOp){return c2(gv.cm,bf)(gv,gw,gu)}if(gv.cm.state.suppressEdits){return}}if(fp(gv,"beforeChange")||gv.cm&&fp(gv.cm,"beforeChange")){gw=dS(gv,gw,true);if(!gw){return}}var gt=gl&&!gu&&cH(gv,gw.from,gw.to);if(gt){for(var gs=gt.length-1;gs>=0;--gs){K(gv,{from:gt[gs].from,to:gt[gs].to,text:gs?[""]:gw.text})}}else{K(gv,gw)}}function K(gu,gv){if(gv.text.length==1&&gv.text[0]==""&&cf(gv.from,gv.to)==0){return}var gt=fr(gu,gv);fU(gu,gv,gt,gu.cm?gu.cm.curOp.id:NaN);eh(gu,gv,gt,en(gu,gv));var gs=[];d9(gu,function(gx,gw){if(!gw&&di(gs,gx.history)==-1){dF(gx.history,gv);gs.push(gx.history)}eh(gx,gv,null,en(gx,gv))})}function b7(gD,gB,gF){if(gD.cm&&gD.cm.state.suppressEdits&&!gF){return}var gA=gD.history,gu,gw=gD.sel;var gs=gB=="undo"?gA.done:gA.undone,gE=gB=="undo"?gA.undone:gA.done;for(var gx=0;gx<gs.length;gx++){gu=gs[gx];if(gF?gu.ranges&&!gu.equals(gD.sel):!gu.ranges){break}}if(gx==gs.length){return}gA.lastOrigin=gA.lastSelOrigin=null;for(;;){gu=gs.pop();if(gu.ranges){cN(gu,gE);if(gF&&!gu.equals(gD.sel)){bT(gD,gu,{clearRedo:false});return}gw=gu}else{break}}var gz=[];cN(gw,gE);gE.push({changes:gz,generation:gA.generation});gA.generation=gu.generation||++gA.maxGeneration;var gv=fp(gD,"beforeChange")||gD.cm&&fp(gD.cm,"beforeChange");for(var gx=gu.changes.length-1;gx>=0;--gx){var gC=gu.changes[gx];gC.origin=gB;if(gv&&!dS(gD,gC,false)){gs.length=0;return}gz.push(dv(gD,gC));var gt=gx?fr(gD,gC):fN(gs);eh(gD,gC,gt,eb(gD,gC));if(!gx&&gD.cm){gD.cm.scrollIntoView({from:gC.from,to:cX(gC)})}var gy=[];d9(gD,function(gH,gG){if(!gG&&di(gy,gH.history)==-1){dF(gH.history,gC);gy.push(gH.history)}eh(gH,gC,null,eb(gH,gC))})}}function fu(gt,gv){if(gv==0){return}gt.first+=gv;gt.sel=new gc(bR(gt.sel.ranges,function(gw){return new dZ(W(gw.anchor.line+gv,gw.anchor.ch),W(gw.head.line+gv,gw.head.ch))}),gt.sel.primIndex);if(gt.cm){ah(gt.cm,gt.first,gt.first-gv,gv);for(var gu=gt.cm.display,gs=gu.viewFrom;gs<gu.viewTo;gs++){R(gt.cm,gs,"gutter")}}}function eh(gw,gx,gv,gt){if(gw.cm&&!gw.cm.curOp){return c2(gw.cm,eh)(gw,gx,gv,gt)}if(gx.to.line<gw.first){fu(gw,gx.text.length-1-(gx.to.line-gx.from.line));return}if(gx.from.line>gw.lastLine()){return}if(gx.from.line<gw.first){var gs=gx.text.length-1-(gw.first-gx.from.line);fu(gw,gs);gx={from:W(gw.first,0),to:W(gx.to.line+gs,gx.to.ch),text:[fN(gx.text)],origin:gx.origin}}var gu=gw.lastLine();if(gx.to.line>gu){gx={from:gx.from,to:W(gu,fm(gw,gu).text.length),text:[gx.text[0]],origin:gx.origin}}gx.removed=gd(gw,gx.from,gx.to);if(!gv){gv=fr(gw,gx)}if(gw.cm){aI(gw.cm,gx,gt)}else{fF(gw,gx,gt)}et(gw,gv,Z)}function aI(gD,gz,gx){var gC=gD.doc,gy=gD.display,gA=gz.from,gB=gz.to;var gs=false,gw=gA.line;if(!gD.options.lineWrapping){gw=bM(x(fm(gC,gA.line)));gC.iter(gw,gB.line+1,function(gF){if(gF==gy.maxLine){gs=true;return true}})}if(gC.sel.contains(gz.from,gz.to)>-1){V(gD)}fF(gC,gz,gx,bd(gD));if(!gD.options.lineWrapping){gC.iter(gw,gA.line+gz.text.length,function(gG){var gF=er(gG);if(gF>gy.maxLineLength){gy.maxLine=gG;gy.maxLineLength=gF;gy.maxLineChanged=true;gs=false}});if(gs){gD.curOp.updateMaxLine=true}}gC.frontier=Math.min(gC.frontier,gA.line);ei(gD,400);var gE=gz.text.length-(gB.line-gA.line)-1;if(gz.full){ah(gD)}else{if(gA.line==gB.line&&gz.text.length==1&&!dT(gD.doc,gz)){R(gD,gA.line,"text")}else{ah(gD,gA.line,gB.line+1,gE)}}var gu=fp(gD,"changes"),gv=fp(gD,"change");if(gv||gu){var gt={from:gA,to:gB,text:gz.text,removed:gz.removed,origin:gz.origin};if(gv){ae(gD,"change",gD,gt)}if(gu){(gD.curOp.changeObjs||(gD.curOp.changeObjs=[])).push(gt)}}gD.display.selForContextMenu=null}function a0(gv,gu,gx,gw,gs){if(!gw){gw=gx}if(cf(gw,gx)<0){var gt=gw;gw=gx;gx=gt}if(typeof gu=="string"){gu=gv.splitLines(gu)}bf(gv,{from:gx,to:gw,text:gu,origin:gs})}function d8(gt,gw){if(aQ(gt,"scrollCursorIntoView")){return}var gx=gt.display,gu=gx.sizer.getBoundingClientRect(),gs=null;if(gw.top+gu.top<0){gs=true}else{if(gw.bottom+gu.top>(window.innerHeight||document.documentElement.clientHeight)){gs=false}}if(gs!=null&&!fB){var gv=gb("div","\u200b",null,"position: absolute; top: "+(gw.top-gx.viewOffset-ff(gt.display))+"px; height: "+(gw.bottom-gw.top+cT(gt)+gx.barHeight)+"px; left: "+gw.left+"px; width: 2px;");gt.display.lineSpace.appendChild(gv);gv.scrollIntoView(gs);gt.display.lineSpace.removeChild(gv)}}function D(gC,gA,gw,gv){if(gv==null){gv=0}for(var gx=0;gx<5;gx++){var gy=false,gB=dV(gC,gA);var gs=!gw||gw==gA?gB:dV(gC,gw);var gu=G(gC,Math.min(gB.left,gs.left),Math.min(gB.top,gs.top)-gv,Math.max(gB.left,gs.left),Math.max(gB.bottom,gs.bottom)+gv);var gz=gC.doc.scrollTop,gt=gC.doc.scrollLeft;if(gu.scrollTop!=null){N(gC,gu.scrollTop);if(Math.abs(gC.doc.scrollTop-gz)>1){gy=true}}if(gu.scrollLeft!=null){bD(gC,gu.scrollLeft);if(Math.abs(gC.doc.scrollLeft-gt)>1){gy=true}}if(!gy){break}}return gB}function E(gs,gu,gw,gt,gv){var gx=G(gs,gu,gw,gt,gv);if(gx.scrollTop!=null){N(gs,gx.scrollTop)}if(gx.scrollLeft!=null){bD(gs,gx.scrollLeft)}}function G(gE,gv,gD,gt,gC){var gA=gE.display,gy=aX(gE.display);if(gD<0){gD=0}var gw=gE.curOp&&gE.curOp.scrollTop!=null?gE.curOp.scrollTop:gA.scroller.scrollTop;var gG=cV(gE),gI={};if(gC-gD>gG){gC=gD+gG}var gu=gE.doc.height+bH(gA);var gs=gD<gy,gz=gC>gu-gy;if(gD<gw){gI.scrollTop=gs?0:gD}else{if(gC>gw+gG){var gB=Math.min(gD,(gz?gu:gC)-gG);if(gB!=gw){gI.scrollTop=gB}}}var gH=gE.curOp&&gE.curOp.scrollLeft!=null?gE.curOp.scrollLeft:gA.scroller.scrollLeft;var gF=dm(gE)-(gE.options.fixedGutter?gA.gutters.offsetWidth:0);var gx=gt-gv>gF;if(gx){gt=gv+gF}if(gv<10){gI.scrollLeft=0}else{if(gv<gH){gI.scrollLeft=Math.max(0,gv-(gx?0:10))}else{if(gt>gF+gH-3){gI.scrollLeft=gt+(gx?0:10)-gF}}}return gI}function cL(gs,gu,gt){if(gu!=null||gt!=null){fJ(gs)}if(gu!=null){gs.curOp.scrollLeft=(gs.curOp.scrollLeft==null?gs.doc.scrollLeft:gs.curOp.scrollLeft)+gu}if(gt!=null){gs.curOp.scrollTop=(gs.curOp.scrollTop==null?gs.doc.scrollTop:gs.curOp.scrollTop)+gt}}function fM(gs){fJ(gs);var gt=gs.getCursor(),gv=gt,gu=gt;if(!gs.options.lineWrapping){gv=gt.ch?W(gt.line,gt.ch-1):gt;gu=W(gt.line,gt.ch+1)}gs.curOp.scrollToPos={from:gv,to:gu,margin:gs.options.cursorScrollMargin,isCursor:true}}function fJ(gs){var gu=gs.curOp.scrollToPos;if(gu){gs.curOp.scrollToPos=null;var gw=dI(gs,gu.from),gv=dI(gs,gu.to);var gt=G(gs,Math.min(gw.left,gv.left),Math.min(gw.top,gv.top)-gu.margin,Math.max(gw.right,gv.right),Math.max(gw.bottom,gv.bottom)+gu.margin);gs.scrollTo(gt.scrollLeft,gt.scrollTop)}}function ad(gF,gv,gE,gu){var gD=gF.doc,gt;if(gE==null){gE="add"}if(gE=="smart"){if(!gD.mode.indent){gE="prev"}else{gt=dD(gF,gv)}}var gz=gF.options.tabSize;var gG=fm(gD,gv),gy=bS(gG.text,null,gz);if(gG.stateAfter){gG.stateAfter=null}var gs=gG.text.match(/^\s*/)[0],gB;if(!gu&&!/\S/.test(gG.text)){gB=0;gE="not"}else{if(gE=="smart"){gB=gD.mode.indent(gt,gG.text.slice(gs.length),gG.text);if(gB==ca||gB>150){if(!gu){return}gE="prev"}}}if(gE=="prev"){if(gv>gD.first){gB=bS(fm(gD,gv-1).text,null,gz)}else{gB=0}}else{if(gE=="add"){gB=gy+gF.options.indentUnit}else{if(gE=="subtract"){gB=gy-gF.options.indentUnit}else{if(typeof gE=="number"){gB=gy+gE}}}}gB=Math.max(0,gB);var gC="",gA=0;if(gF.options.indentWithTabs){for(var gw=Math.floor(gB/gz);gw;--gw){gA+=gz;gC+="\t"}}if(gA<gB){gC+=cp(gB-gA)}if(gC!=gs){a0(gD,gC,W(gv,0),W(gv,gs.length),"+input");gG.stateAfter=null;return true}else{for(var gw=0;gw<gD.sel.ranges.length;gw++){var gx=gD.sel.ranges[gw];if(gx.head.line==gv&&gx.head.ch<gs.length){var gA=W(gv,gs.length);e(gD,gw,new dZ(gA,gA));break}}}}function eD(gv,gu,gs,gx){var gw=gu,gt=gu;if(typeof gu=="number"){gt=fm(gv,c5(gv,gu))}else{gw=bM(gu)}if(gw==null){return null}if(gx(gt,gw)&&gv.cm){R(gv.cm,gw,gs)}return gt}function e3(gs,gy){var gt=gs.doc.sel.ranges,gw=[];for(var gv=0;gv<gt.length;gv++){var gu=gy(gt[gv]);while(gw.length&&cf(gu.from,fN(gw).to)<=0){var gx=gw.pop();if(cf(gx.from,gu.from)<0){gu.from=gx.from;break}}gw.push(gu)}cM(gs,function(){for(var gz=gw.length-1;gz>=0;gz--){a0(gs.doc,"",gw[gz].from,gw[gz].to,"+delete")}fM(gs)})}function bv(gJ,gw,gE,gD,gy){var gB=gw.line,gC=gw.ch,gI=gE;var gt=fm(gJ,gB);function gH(){var gK=gB+gE;if(gK<gJ.first||gK>=gJ.first+gJ.size){return false}gB=gK;return gt=fm(gJ,gK)}function gG(gL){var gK=(gy?u:ai)(gt,gC,gE,true);if(gK==null){if(!gL&&gH()){if(gy){gC=(gE<0?cS:cE)(gt)}else{gC=gE<0?gt.text.length:0}}else{return false}}else{gC=gK}return true}if(gD=="char"){gG()}else{if(gD=="column"){gG(true)}else{if(gD=="word"||gD=="group"){var gF=null,gz=gD=="group";var gs=gJ.cm&&gJ.cm.getHelper(gw,"wordChars");for(var gx=true;;gx=false){if(gE<0&&!gG(!gx)){break}var gu=gt.text.charAt(gC)||"\n";var gv=cA(gu,gs)?"w":gz&&gu=="\n"?"n":!gz||/\s/.test(gu)?null:"p";if(gz&&!gx&&!gv){gv="s"}if(gF&&gF!=gv){if(gE<0){gE=1;gG()}break}if(gv){gF=gv}if(gE>0&&!gG(!gx)){break}}}}}var gA=bU(gJ,W(gB,gC),gw,gI,true);if(!cf(gw,gA)){gA.hitSide=true}return gA}function bp(gA,gv,gs,gz){var gy=gA.doc,gx=gv.left,gw;if(gz=="page"){var gu=Math.min(gA.display.wrapper.clientHeight,window.innerHeight||document.documentElement.clientHeight);gw=gv.top+gs*(gu-(gs<0?1.5:0.5)*aX(gA.display))}else{if(gz=="line"){gw=gs>0?gv.bottom+3:gv.top-3}}for(;;){var gt=fW(gA,gx,gw);if(!gt.outside){break}if(gs<0?gw<=0:gw>=gy.height){gt.hitSide=true;break}gw+=gs*5}return gt}H.prototype={constructor:H,focus:function(){window.focus();this.display.input.focus()},setOption:function(gu,gv){var gt=this.options,gs=gt[gu];if(gt[gu]==gv&&gu!="mode"){return}gt[gu]=gv;if(be.hasOwnProperty(gu)){c2(this,be[gu])(this,gv,gs)}},getOption:function(gs){return this.options[gs]},getDoc:function(){return this.doc},addKeyMap:function(gt,gs){this.state.keyMaps[gs?"push":"unshift"](f6(gt))},removeKeyMap:function(gt){var gu=this.state.keyMaps;for(var gs=0;gs<gu.length;++gs){if(gu[gs]==gt||gu[gs].name==gt){gu.splice(gs,1);return true}}},addOverlay:c8(function(gs,gt){var gu=gs.token?gs:H.getMode(this.options,gs);if(gu.startState){throw new Error("Overlays may not be stateful.")}b9(this.state.overlays,{mode:gu,modeSpec:gs,opaque:gt&&gt.opaque,priority:(gt&&gt.priority)||0},function(gv){return gv.priority});this.state.modeGen++;ah(this)}),removeOverlay:c8(function(gs){var gu=this.state.overlays;for(var gt=0;gt<gu.length;++gt){var gv=gu[gt].modeSpec;if(gv==gs||typeof gs=="string"&&gv.name==gs){gu.splice(gt,1);this.state.modeGen++;ah(this);return}}}),indentLine:c8(function(gu,gs,gt){if(typeof gs!="string"&&typeof gs!="number"){if(gs==null){gs=this.options.smartIndent?"smart":"prev"}else{gs=gs?"add":"subtract"}}if(b8(this.doc,gu)){ad(this,gu,gs,gt)}}),indentSelection:c8(function(gB){var gs=this.doc.sel.ranges,gv=-1;for(var gx=0;gx<gs.length;gx++){var gy=gs[gx];if(!gy.empty()){var gz=gy.from(),gA=gy.to();var gt=Math.max(gv,gz.line);gv=Math.min(this.lastLine(),gA.line-(gA.ch?0:1))+1;for(var gw=gt;gw<gv;++gw){ad(this,gw,gB)}var gu=this.doc.sel.ranges;if(gz.ch==0&&gs.length==gu.length&&gu[gx].from().ch>0){e(this.doc,gx,new dZ(gz,gu[gx].to()),Z)}}else{if(gy.head.line>gv){ad(this,gy.head.line,gB,true);gv=gy.head.line;if(gx==this.doc.sel.primIndex){fM(this)}}}}}),getTokenAt:function(gt,gs){return cq(this,gt,gs)},getLineTokens:function(gt,gs){return cq(this,W(gt),gs,true)},getTokenTypeAt:function(gz){gz=fR(this.doc,gz);var gv=c6(this,fm(this.doc,gz.line));var gx=0,gy=(gv.length-1)/2,gu=gz.ch;var gt;if(gu==0){gt=gv[2]}else{for(;;){var gs=(gx+gy)>>1;if((gs?gv[gs*2-1]:0)>=gu){gy=gs}else{if(gv[gs*2+1]<gu){gx=gs+1}else{gt=gv[gs*2+2];break}}}}var gw=gt?gt.indexOf("cm-overlay "):-1;return gw<0?gt:gw==0?null:gt.slice(0,gw-1)},getModeAt:function(gt){var gs=this.doc.mode;if(!gs.innerMode){return gs}return H.innerMode(gs,this.getTokenAt(gt).state).mode},getHelper:function(gt,gs){return this.getHelpers(gt,gs)[0]},getHelpers:function(gz,gu){var gv=[];if(!fv.hasOwnProperty(gu)){return gv}var gs=fv[gu],gy=this.getModeAt(gz);if(typeof gy[gu]=="string"){if(gs[gy[gu]]){gv.push(gs[gy[gu]])}}else{if(gy[gu]){for(var gt=0;gt<gy[gu].length;gt++){var gx=gs[gy[gu][gt]];if(gx){gv.push(gx)}}}else{if(gy.helperType&&gs[gy.helperType]){gv.push(gs[gy.helperType])}else{if(gs[gy.name]){gv.push(gs[gy.name])}}}}for(var gt=0;gt<gs._global.length;gt++){var gw=gs._global[gt];if(gw.pred(gy,this)&&di(gv,gw.val)==-1){gv.push(gw.val)}}return gv},getStateAfter:function(gt,gs){var gu=this.doc;gt=c5(gu,gt==null?gu.first+gu.size-1:gt);return dD(this,gt+1,gs)},cursorCoords:function(gv,gt){var gu,gs=this.doc.sel.primary();if(gv==null){gu=gs.head}else{if(typeof gv=="object"){gu=fR(this.doc,gv)}else{gu=gv?gs.from():gs.to()}}return dV(this,gu,gt||"page")},charCoords:function(gt,gs){return cJ(this,fR(this.doc,gt),gs||"page")},coordsChar:function(gs,gt){gs=gn(this,gs,gt||"page");return fW(this,gs.left,gs.top)},lineAtHeight:function(gs,gt){gs=gn(this,{top:gs,left:0},gt||"page").top;return bF(this.doc,gs+this.display.viewOffset)},heightAtLine:function(gt,gw){var gs=false,gu;if(typeof gt=="number"){var gv=this.doc.first+this.doc.size-1;if(gt<this.doc.first){gt=this.doc.first}else{if(gt>gv){gt=gv;gs=true}}gu=fm(this.doc,gt)}else{gu=gt}return eV(this,gu,{top:0,left:0},gw||"page").top+(gs?this.doc.height-bL(gu):0)},defaultTextHeight:function(){return aX(this.display)},defaultCharWidth:function(){return dE(this.display)},setGutterMarker:c8(function(gs,gt,gu){return eD(this.doc,gs,"gutter",function(gv){var gw=gv.gutterMarkers||(gv.gutterMarkers={});gw[gt]=gu;if(!gu&&e0(gw)){gv.gutterMarkers=null}return true})}),clearGutter:c8(function(gu){var gs=this,gv=gs.doc,gt=gv.first;gv.iter(function(gw){if(gw.gutterMarkers&&gw.gutterMarkers[gu]){gw.gutterMarkers[gu]=null;R(gs,gt,"gutter");if(e0(gw.gutterMarkers)){gw.gutterMarkers=null}}++gt})}),lineInfo:function(gs){if(typeof gs=="number"){if(!b8(this.doc,gs)){return null}var gt=gs;gs=fm(this.doc,gs);if(!gs){return null}}else{var gt=bM(gs);if(gt==null){return null}}return{line:gt,handle:gs,text:gs.text,gutterMarkers:gs.gutterMarkers,textClass:gs.textClass,bgClass:gs.bgClass,wrapClass:gs.wrapClass,widgets:gs.widgets}},getViewport:function(){return{from:this.display.viewFrom,to:this.display.viewTo}},addWidget:function(gx,gu,gz,gv,gB){var gw=this.display;gx=dV(this,fR(this.doc,gx));var gy=gx.bottom,gt=gx.left;gu.style.position="absolute";gu.setAttribute("cm-ignore-events","true");this.display.input.setUneditable(gu);gw.sizer.appendChild(gu);if(gv=="over"){gy=gx.top}else{if(gv=="above"||gv=="near"){var gs=Math.max(gw.wrapper.clientHeight,this.doc.height),gA=Math.max(gw.sizer.clientWidth,gw.lineSpace.clientWidth);if((gv=="above"||gx.bottom+gu.offsetHeight>gs)&&gx.top>gu.offsetHeight){gy=gx.top-gu.offsetHeight}else{if(gx.bottom+gu.offsetHeight<=gs){gy=gx.bottom}}if(gt+gu.offsetWidth>gA){gt=gA-gu.offsetWidth}}}gu.style.top=gy+"px";gu.style.left=gu.style.right="";if(gB=="right"){gt=gw.sizer.clientWidth-gu.offsetWidth;gu.style.right="0px"}else{if(gB=="left"){gt=0}else{if(gB=="middle"){gt=(gw.sizer.clientWidth-gu.offsetWidth)/2}}gu.style.left=gt+"px"}if(gz){E(this,gt,gy,gt+gu.offsetWidth,gy+gu.offsetHeight)}},triggerOnKeyDown:c8(p),triggerOnKeyPress:c8(cx),triggerOnKeyUp:bh,execCommand:function(gs){if(eH.hasOwnProperty(gs)){return eH[gs].call(null,this)}},triggerElectric:c8(function(gs){f4(this,gs)}),findPosH:function(gy,gv,gw,gt){var gs=1;if(gv<0){gs=-1;gv=-gv}for(var gu=0,gx=fR(this.doc,gy);gu<gv;++gu){gx=bv(this.doc,gx,gs,gw,gt);if(gx.hitSide){break}}return gx},moveH:c8(function(gt,gu){var gs=this;gs.extendSelectionsBy(function(gv){if(gs.display.shift||gs.doc.extend||gv.empty()){return bv(gs.doc,gv.head,gt,gu,gs.options.rtlMoveVisually)}else{return gt<0?gv.from():gv.to()}},cW)}),deleteH:c8(function(gs,gt){var gu=this.doc.sel,gv=this.doc;if(gu.somethingSelected()){gv.replaceSelection("",null,"+delete")}else{e3(this,function(gx){var gw=bv(gv,gx.head,gs,gt,false);return gs<0?{from:gw,to:gx.head}:{from:gx.head,to:gw}})}}),findPosV:function(gx,gu,gy,gA){var gs=1,gw=gA;if(gu<0){gs=-1;gu=-gu}for(var gt=0,gz=fR(this.doc,gx);gt<gu;++gt){var gv=dV(this,gz,"div");if(gw==null){gw=gv.left}else{gv.left=gw}gz=bp(this,gv,gs,gy);if(gz.hitSide){break}}return gz},moveV:c8(function(gt,gv){var gs=this,gx=this.doc,gw=[];var gy=!gs.display.shift&&!gx.extend&&gx.sel.somethingSelected();gx.extendSelectionsBy(function(gz){if(gy){return gt<0?gz.from():gz.to()}var gB=dV(gs,gz.head,"div");if(gz.goalColumn!=null){gB.left=gz.goalColumn}gw.push(gB.left);var gA=bp(gs,gB,gt,gv);if(gv=="page"&&gz==gx.sel.primary()){cL(gs,null,cJ(gs,gA,"div").top-gB.top)}return gA},cW);if(gw.length){for(var gu=0;gu<gx.sel.ranges.length;gu++){gx.sel.ranges[gu].goalColumn=gw[gu]}}}),findWordAt:function(gz){var gx=this.doc,gv=fm(gx,gz.line).text;var gy=gz.ch,gu=gz.ch;if(gv){var gw=this.getHelper(gz,"wordChars");if((gz.xRel<0||gu==gv.length)&&gy){--gy}else{++gu}var gt=gv.charAt(gy);var gs=cA(gt,gw)?function(gA){return cA(gA,gw)}:/\s/.test(gt)?function(gA){return/\s/.test(gA)}:function(gA){return !/\s/.test(gA)&&!cA(gA)};while(gy>0&&gs(gv.charAt(gy-1))){--gy}while(gu<gv.length&&gs(gv.charAt(gu))){++gu}}return new dZ(W(gz.line,gy),W(gz.line,gu))},toggleOverwrite:function(gs){if(gs!=null&&gs==this.state.overwrite){return}if(this.state.overwrite=!this.state.overwrite){fH(this.display.cursorDiv,"CodeMirror-overwrite")}else{f(this.display.cursorDiv,"CodeMirror-overwrite")}aD(this,"overwriteToggle",this,this.state.overwrite)},hasFocus:function(){return this.display.input.getField()==dP()},isReadOnly:function(){return !!(this.options.readOnly||this.doc.cantEdit)},scrollTo:c8(function(gs,gt){if(gs!=null||gt!=null){fJ(this)}if(gs!=null){this.curOp.scrollLeft=gs}if(gt!=null){this.curOp.scrollTop=gt}}),getScrollInfo:function(){var gs=this.display.scroller;return{left:gs.scrollLeft,top:gs.scrollTop,height:gs.scrollHeight-cT(this)-this.display.barHeight,width:gs.scrollWidth-cT(this)-this.display.barWidth,clientHeight:cV(this),clientWidth:dm(this)}},scrollIntoView:c8(function(gt,gu){if(gt==null){gt={from:this.doc.sel.primary().head,to:null};if(gu==null){gu=this.options.cursorScrollMargin}}else{if(typeof gt=="number"){gt={from:W(gt,0),to:null}}else{if(gt.from==null){gt={from:gt,to:null}}}}if(!gt.to){gt.to=gt.from}gt.margin=gu||0;if(gt.from.line!=null){fJ(this);this.curOp.scrollToPos=gt}else{var gs=G(this,Math.min(gt.from.left,gt.to.left),Math.min(gt.from.top,gt.to.top)-gt.margin,Math.max(gt.from.right,gt.to.right),Math.max(gt.from.bottom,gt.to.bottom)+gt.margin);this.scrollTo(gs.scrollLeft,gs.scrollTop)}}),setSize:c8(function(gv,gt){var gs=this;function gu(gx){return typeof gx=="number"||/^\d+$/.test(String(gx))?gx+"px":gx}if(gv!=null){gs.display.wrapper.style.width=gu(gv)}if(gt!=null){gs.display.wrapper.style.height=gu(gt)}if(gs.options.lineWrapping){aN(this)}var gw=gs.display.viewFrom;gs.doc.iter(gw,gs.display.viewTo,function(gx){if(gx.widgets){for(var gy=0;gy<gx.widgets.length;gy++){if(gx.widgets[gy].noHScroll){R(gs,gw,"widget");break}}}++gw});gs.curOp.forceUpdate=true;aD(gs,"refresh",this)}),operation:function(gs){return cM(this,gs)},refresh:c8(function(){var gs=this.display.cachedTextHeight;ah(this);this.curOp.forceUpdate=true;aj(this);this.scrollTo(this.doc.scrollLeft,this.doc.scrollTop);c4(this);if(gs==null||Math.abs(gs-aX(this.display))>0.5){X(this)}aD(this,"refresh",this)}),swapDoc:c8(function(gt){var gs=this.doc;gs.cm=null;ee(this,gt);aj(this);this.display.input.reset();this.scrollTo(gt.scrollLeft,gt.scrollTop);this.curOp.forceScroll=true;ae(this,"swapDoc",this,gs);return gs}),getInputField:function(){return this.display.input.getField()},getWrapperElement:function(){return this.display.wrapper},getScrollerElement:function(){return this.display.scroller},getGutterElement:function(){return this.display.gutters}};bx(H);var e9=H.defaults={};var be=H.optionHandlers={};function s(gs,gv,gu,gt){H.defaults[gs]=gv;if(gu){be[gs]=gt?function(gw,gy,gx){if(gx!=cc){gu(gw,gy,gx)}}:gu}}var cc=H.Init={toString:function(){return"CodeMirror.Init"}};s("value","",function(gs,gt){gs.setValue(gt)},true);s("mode",null,function(gs,gt){gs.doc.modeOption=gt;bq(gs)},true);s("indentUnit",2,bq,true);s("indentWithTabs",false);s("smartIndent",true);s("tabSize",4,function(gs){ep(gs);aj(gs);ah(gs)},true);s("lineSeparator",null,function(gs,gv){gs.doc.lineSep=gv;if(!gv){return}var gu=[],gw=gs.doc.first;gs.doc.iter(function(gx){for(var gz=0;;){var gy=gx.text.indexOf(gv,gz);if(gy==-1){break}gz=gy+gv.length;gu.push(W(gw,gy))}gw++});for(var gt=gu.length-1;gt>=0;gt--){a0(gs.doc,gv,gu[gt],W(gu[gt].line,gu[gt].ch+gv.length))}});s("specialChars",/[\u0000-\u001f\u007f\u00ad\u200b-\u200f\u2028\u2029\ufeff]/g,function(gs,gu,gt){gs.state.specialChars=new RegExp(gu.source+(gu.test("\t")?"":"|\t"),"g");if(gt!=H.Init){gs.refresh()}});s("specialCharPlaceholder",fj,function(gs){gs.refresh()},true);s("electricChars",true);s("inputStyle",ej?"contenteditable":"textarea",function(){throw new Error("inputStyle can not (yet) be changed in a running editor")},true);s("spellcheck",false,function(gs,gt){gs.getInputField().spellcheck=gt},true);s("rtlMoveVisually",!aO);s("wholeLineUpdateBefore",true);s("theme","default",function(gs){cO(gs);dx(gs)},true);s("keyMap","default",function(gs,gw,gt){var gu=f6(gw);var gv=gt!=H.Init&&f6(gt);if(gv&&gv.detach){gv.detach(gs,gu)}if(gu.attach){gu.attach(gs,gv||null)}});s("extraKeys",null);s("lineWrapping",false,eK,true);s("gutters",[],function(gs){ce(gs.options);dx(gs)},true);s("fixedGutter",true,function(gs,gt){gs.display.gutters.style.left=gt?dY(gs.display)+"px":"0";gs.refresh()},true);s("coverGutterNextToScrollbar",false,function(gs){e4(gs)},true);s("scrollbarStyle","native",function(gs){aC(gs);e4(gs);gs.display.scrollbars.setScrollTop(gs.doc.scrollTop);gs.display.scrollbars.setScrollLeft(gs.doc.scrollLeft)},true);s("lineNumbers",false,function(gs){ce(gs.options);dx(gs)},true);s("firstLineNumber",1,dx,true);s("lineNumberFormatter",function(gs){return gs},dx,true);s("showCursorWhenSelecting",false,bB,true);s("resetSelectionOnContextMenu",true);s("lineWiseCopyCut",true);s("readOnly",false,function(gs,gt){if(gt=="nocursor"){aU(gs);gs.display.input.blur();gs.display.disabled=true}else{gs.display.disabled=false}gs.display.input.readOnlyChanged(gt)});s("disableInput",false,function(gs,gt){if(!gt){gs.display.input.reset()}},true);s("dragDrop",true,f9);s("allowDropFileTypes",null);s("cursorBlinkRate",530);s("cursorScrollMargin",0);s("cursorHeight",1,bB,true);s("singleCursorHeightPerLine",true,bB,true);s("workTime",100);s("workDelay",100);s("flattenSpans",true,ep,true);s("addModeClass",false,ep,true);s("pollInterval",100);s("undoDepth",200,function(gs,gt){gs.doc.history.undoDepth=gt});s("historyEventDelay",1250);s("viewportMargin",10,function(gs){gs.refresh()},true);s("maxHighlightLength",10000,ep,true);s("moveInputWithCursor",true,function(gs,gt){if(!gt){gs.display.input.resetPosition()}});s("tabindex",null,function(gs,gt){gs.display.input.getField().tabIndex=gt||""});s("autofocus",null);var dt=H.modes={},aR=H.mimeModes={};H.defineMode=function(gs,gt){if(!H.defaults.mode&&gs!="null"){H.defaults.mode=gs}if(arguments.length>2){gt.dependencies=Array.prototype.slice.call(arguments,2)}dt[gs]=gt};H.defineMIME=function(gt,gs){aR[gt]=gs};H.resolveMode=function(gs){if(typeof gs=="string"&&aR.hasOwnProperty(gs)){gs=aR[gs]}else{if(gs&&typeof gs.name=="string"&&aR.hasOwnProperty(gs.name)){var gt=aR[gs.name];if(typeof gt=="string"){gt={name:gt}}gs=ck(gt,gs);gs.name=gt.name}else{if(typeof gs=="string"&&/^[\w\-]+\/[\w\-]+\+xml$/.test(gs)){return H.resolveMode("application/xml")}else{if(typeof gs=="string"&&/^[\w\-]+\/[\w\-]+\+json$/.test(gs)){return H.resolveMode("application/json")}}}}if(typeof gs=="string"){return{name:gs}}else{return gs||{name:"null"}}};H.getMode=function(gt,gs){var gs=H.resolveMode(gs);var gv=dt[gs.name];if(!gv){return H.getMode(gt,"text/plain")}var gw=gv(gt,gs);if(dq.hasOwnProperty(gs.name)){var gu=dq[gs.name];for(var gx in gu){if(!gu.hasOwnProperty(gx)){continue}if(gw.hasOwnProperty(gx)){gw["_"+gx]=gw[gx]}gw[gx]=gu[gx]}}gw.name=gs.name;if(gs.helperType){gw.helperType=gs.helperType}if(gs.modeProps){for(var gx in gs.modeProps){gw[gx]=gs.modeProps[gx]}}return gw};H.defineMode("null",function(){return{token:function(gs){gs.skipToEnd()}}});H.defineMIME("text/plain","null");var dq=H.modeExtensions={};H.extendMode=function(gu,gt){var gs=dq.hasOwnProperty(gu)?dq[gu]:(dq[gu]={});aM(gt,gs)};H.defineExtension=function(gs,gt){H.prototype[gs]=gt};H.defineDocExtension=function(gs,gt){ar.prototype[gs]=gt};H.defineOption=s;var a7=[];H.defineInitHook=function(gs){a7.push(gs)};var fv=H.helpers={};H.registerHelper=function(gt,gs,gu){if(!fv.hasOwnProperty(gt)){fv[gt]=H[gt]={_global:[]}}fv[gt][gs]=gu};H.registerGlobalHelper=function(gu,gt,gs,gv){H.registerHelper(gu,gt,gv);fv[gu]._global.push({pred:gs,val:gv})};var b2=H.copyState=function(gv,gs){if(gs===true){return gs}if(gv.copyState){return gv.copyState(gs)}var gu={};for(var gw in gs){var gt=gs[gw];if(gt instanceof Array){gt=gt.concat([])}gu[gw]=gt}return gu};var bZ=H.startState=function(gu,gt,gs){return gu.startState?gu.startState(gt,gs):true};H.innerMode=function(gu,gs){while(gu.innerMode){var gt=gu.innerMode(gs);if(!gt||gt.mode==gu){break}gs=gt.state;gu=gt.mode}return gt||{mode:gu,state:gs}};var eH=H.commands={selectAll:function(gs){gs.setSelection(W(gs.firstLine(),0),W(gs.lastLine()),Z)},singleSelection:function(gs){gs.setSelection(gs.getCursor("anchor"),gs.getCursor("head"),Z)},killLine:function(gs){e3(gs,function(gu){if(gu.empty()){var gt=fm(gs.doc,gu.head.line).text.length;if(gu.head.ch==gt&&gu.head.line<gs.lastLine()){return{from:gu.head,to:W(gu.head.line+1,0)}}else{return{from:gu.head,to:W(gu.head.line,gt)}}}else{return{from:gu.from(),to:gu.to()}}})},deleteLine:function(gs){e3(gs,function(gt){return{from:W(gt.from().line,0),to:fR(gs.doc,W(gt.to().line+1,0))}})},delLineLeft:function(gs){e3(gs,function(gt){return{from:W(gt.from().line,0),to:gt.from()}})},delWrappedLineLeft:function(gs){e3(gs,function(gt){var gv=gs.charCoords(gt.head,"div").top+5;var gu=gs.coordsChar({left:0,top:gv},"div");return{from:gu,to:gt.from()}})},delWrappedLineRight:function(gs){e3(gs,function(gt){var gv=gs.charCoords(gt.head,"div").top+5;var gu=gs.coordsChar({left:gs.display.lineDiv.offsetWidth+100,top:gv},"div");return{from:gt.from(),to:gu}})},undo:function(gs){gs.undo()},redo:function(gs){gs.redo()},undoSelection:function(gs){gs.undoSelection()},redoSelection:function(gs){gs.redoSelection()},goDocStart:function(gs){gs.extendSelection(W(gs.firstLine(),0))},goDocEnd:function(gs){gs.extendSelection(W(gs.lastLine()))},goLineStart:function(gs){gs.extendSelectionsBy(function(gt){return bs(gs,gt.head.line)},{origin:"+move",bias:1})},goLineStartSmart:function(gs){gs.extendSelectionsBy(function(gt){return dJ(gs,gt.head)},{origin:"+move",bias:1})},goLineEnd:function(gs){gs.extendSelectionsBy(function(gt){return dQ(gs,gt.head.line)},{origin:"+move",bias:-1})},goLineRight:function(gs){gs.extendSelectionsBy(function(gt){var gu=gs.charCoords(gt.head,"div").top+5;return gs.coordsChar({left:gs.display.lineDiv.offsetWidth+100,top:gu},"div")},cW)},goLineLeft:function(gs){gs.extendSelectionsBy(function(gt){var gu=gs.charCoords(gt.head,"div").top+5;return gs.coordsChar({left:0,top:gu},"div")},cW)},goLineLeftSmart:function(gs){gs.extendSelectionsBy(function(gt){var gu=gs.charCoords(gt.head,"div").top+5;var gv=gs.coordsChar({left:0,top:gu},"div");if(gv.ch<gs.getLine(gv.line).search(/\S/)){return dJ(gs,gt.head)}return gv},cW)},goLineUp:function(gs){gs.moveV(-1,"line")},goLineDown:function(gs){gs.moveV(1,"line")},goPageUp:function(gs){gs.moveV(-1,"page")},goPageDown:function(gs){gs.moveV(1,"page")},goCharLeft:function(gs){gs.moveH(-1,"char")},goCharRight:function(gs){gs.moveH(1,"char")},goColumnLeft:function(gs){gs.moveH(-1,"column")},goColumnRight:function(gs){gs.moveH(1,"column")},goWordLeft:function(gs){gs.moveH(-1,"word")},goGroupRight:function(gs){gs.moveH(1,"group")},goGroupLeft:function(gs){gs.moveH(-1,"group")},goWordRight:function(gs){gs.moveH(1,"word")},delCharBefore:function(gs){gs.deleteH(-1,"char")},delCharAfter:function(gs){gs.deleteH(1,"char")},delWordBefore:function(gs){gs.deleteH(-1,"word")},delWordAfter:function(gs){gs.deleteH(1,"word")},delGroupBefore:function(gs){gs.deleteH(-1,"group")},delGroupAfter:function(gs){gs.deleteH(1,"group")},indentAuto:function(gs){gs.indentSelection("smart")},indentMore:function(gs){gs.indentSelection("add")},indentLess:function(gs){gs.indentSelection("subtract")},insertTab:function(gs){gs.replaceSelection("\t")},insertSoftTab:function(gs){var gu=[],gt=gs.listSelections(),gx=gs.options.tabSize;for(var gw=0;gw<gt.length;gw++){var gy=gt[gw].from();var gv=bS(gs.getLine(gy.line),gy.ch,gx);gu.push(cp(gx-gv%gx))}gs.replaceSelections(gu)},defaultTab:function(gs){if(gs.somethingSelected()){gs.indentSelection("add")}else{gs.execCommand("insertTab")}},transposeChars:function(gs){cM(gs,function(){var gv=gs.listSelections(),gu=[];for(var gw=0;gw<gv.length;gw++){var gy=gv[gw].head,gt=fm(gs.doc,gy.line).text;if(gt){if(gy.ch==gt.length){gy=new W(gy.line,gy.ch-1)}if(gy.ch>0){gy=new W(gy.line,gy.ch+1);gs.replaceRange(gt.charAt(gy.ch-1)+gt.charAt(gy.ch-2),W(gy.line,gy.ch-2),gy,"+transpose")}else{if(gy.line>gs.doc.first){var gx=fm(gs.doc,gy.line-1).text;if(gx){gs.replaceRange(gt.charAt(0)+gs.doc.lineSeparator()+gx.charAt(gx.length-1),W(gy.line-1,gx.length-1),W(gy.line,1),"+transpose")}}}}gu.push(new dZ(gy,gy))}gs.setSelections(gu)})},newlineAndIndent:function(gs){cM(gs,function(){var gt=gs.listSelections().length;for(var gv=0;gv<gt;gv++){var gu=gs.listSelections()[gv];gs.replaceRange(gs.doc.lineSeparator(),gu.anchor,gu.head,"+input");gs.indentLine(gu.from().line+1,null,true)}fM(gs)})},openLine:function(gs){gs.replaceSelection("\n","start")},toggleOverwrite:function(gs){gs.toggleOverwrite()}};var fh=H.keyMap={};fh.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharAfter",Backspace:"delCharBefore","Shift-Backspace":"delCharBefore",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",Insert:"toggleOverwrite",Esc:"singleSelection"};fh.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Up":"goLineUp","Ctrl-Down":"goLineDown","Ctrl-Left":"goGroupLeft","Ctrl-Right":"goGroupRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delGroupBefore","Ctrl-Delete":"delGroupAfter","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore","Ctrl-U":"undoSelection","Shift-Ctrl-U":"redoSelection","Alt-U":"redoSelection",fallthrough:"basic"};fh.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Alt-F":"goWordRight","Alt-B":"goWordLeft","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageDown","Shift-Ctrl-V":"goPageUp","Ctrl-D":"delCharAfter","Ctrl-H":"delCharBefore","Alt-D":"delWordAfter","Alt-Backspace":"delWordBefore","Ctrl-K":"killLine","Ctrl-T":"transposeChars","Ctrl-O":"openLine"};fh.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Home":"goDocStart","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goGroupLeft","Alt-Right":"goGroupRight","Cmd-Left":"goLineLeft","Cmd-Right":"goLineRight","Alt-Backspace":"delGroupBefore","Ctrl-Alt-Backspace":"delGroupAfter","Alt-Delete":"delGroupAfter","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore","Cmd-Backspace":"delWrappedLineLeft","Cmd-Delete":"delWrappedLineRight","Cmd-U":"undoSelection","Shift-Cmd-U":"redoSelection","Ctrl-Up":"goDocStart","Ctrl-Down":"goDocEnd",fallthrough:["basic","emacsy"]};fh["default"]=b6?fh.macDefault:fh.pcDefault;function du(gt){var gz=gt.split(/-(?!$)/),gt=gz[gz.length-1];var gy,gx,gs,gw;for(var gv=0;gv<gz.length-1;gv++){var gu=gz[gv];if(/^(cmd|meta|m)$/i.test(gu)){gw=true}else{if(/^a(lt)?$/i.test(gu)){gy=true}else{if(/^(c|ctrl|control)$/i.test(gu)){gx=true}else{if(/^s(hift)$/i.test(gu)){gs=true}else{throw new Error("Unrecognized modifier name: "+gu)}}}}}if(gy){gt="Alt-"+gt}if(gx){gt="Ctrl-"+gt}if(gw){gt="Cmd-"+gt}if(gs){gt="Shift-"+gt}return gt}H.normalizeKeyMap=function(gz){var gt={};for(var gy in gz){if(gz.hasOwnProperty(gy)){var gA=gz[gy];if(/^(name|fallthrough|(de|at)tach)$/.test(gy)){continue}if(gA=="..."){delete gz[gy];continue}var gB=bR(gy.split(" "),du);for(var gx=0;gx<gB.length;gx++){var gv,gu;if(gx==gB.length-1){gu=gB.join(" ");gv=gA}else{gu=gB.slice(0,gx+1).join(" ");gv="..."}var gw=gt[gu];if(!gw){gt[gu]=gv}else{if(gw!=gv){throw new Error("Inconsistent bindings for "+gu)}}}delete gz[gy]}}for(var gs in gt){gz[gs]=gt[gs]}return gz};var i=H.lookupKey=function(gv,gy,gx,gu){gy=f6(gy);var gw=gy.call?gy.call(gv,gu):gy[gv];if(gw===false){return"nothing"}if(gw==="..."){return"multi"}if(gw!=null&&gx(gw)){return"handled"}if(gy.fallthrough){if(Object.prototype.toString.call(gy.fallthrough)!="[object Array]"){return i(gv,gy.fallthrough,gx,gu)}for(var gt=0;gt<gy.fallthrough.length;gt++){var gs=i(gv,gy.fallthrough[gt],gx,gu);if(gs){return gs}}}};var eG=H.isModifierKey=function(gt){var gs=typeof gt=="string"?gt:fn[gt.keyCode];return gs=="Ctrl"||gs=="Alt"||gs=="Shift"||gs=="Mod"};var fy=H.keyName=function(gt,gv){if(d5&&gt.keyCode==34&&gt["char"]){return false}var gu=fn[gt.keyCode],gs=gu;if(gs==null||gt.altGraphKey){return false}if(gt.altKey&&gu!="Alt"){gs="Alt-"+gs}if((bP?gt.metaKey:gt.ctrlKey)&&gu!="Ctrl"){gs="Ctrl-"+gs}if((bP?gt.ctrlKey:gt.metaKey)&&gu!="Cmd"){gs="Cmd-"+gs}if(!gv&&gt.shiftKey&&gu!="Shift"){gs="Shift-"+gs}return gs};function f6(gs){return typeof gs=="string"?fh[gs]:gs}H.fromTextArea=function(gz,gA){gA=gA?aM(gA):{};gA.value=gz.value;if(!gA.tabindex&&gz.tabIndex){gA.tabindex=gz.tabIndex}if(!gA.placeholder&&gz.placeholder){gA.placeholder=gz.placeholder}if(gA.autofocus==null){var gs=dP();gA.autofocus=gs==gz||gz.getAttribute("autofocus")!=null&&gs==document.body}function gw(){gz.value=gy.getValue()}if(gz.form){bW(gz.form,"submit",gw);if(!gA.leaveSubmitMethodAlone){var gt=gz.form,gx=gt.submit;try{var gv=gt.submit=function(){gw();gt.submit=gx;gt.submit();gt.submit=gv}}catch(gu){}}}gA.finishInit=function(gB){gB.save=gw;gB.getTextArea=function(){return gz};gB.toTextArea=function(){gB.toTextArea=isNaN;gw();gz.parentNode.removeChild(gB.getWrapperElement());gz.style.display="";if(gz.form){eg(gz.form,"submit",gw);if(typeof gz.form.submit=="function"){gz.form.submit=gx}}}};gz.style.display="none";var gy=H(function(gB){gz.parentNode.insertBefore(gB,gz.nextSibling)},gA);return gy};var eZ=H.StringStream=function(gs,gt){this.pos=this.start=0;this.string=gs;this.tabSize=gt||8;this.lastColumnPos=this.lastColumnValue=0;this.lineStart=0};eZ.prototype={eol:function(){return this.pos>=this.string.length},sol:function(){return this.pos==this.lineStart},peek:function(){return this.string.charAt(this.pos)||undefined},next:function(){if(this.pos<this.string.length){return this.string.charAt(this.pos++)}},eat:function(gs){var gu=this.string.charAt(this.pos);if(typeof gs=="string"){var gt=gu==gs}else{var gt=gu&&(gs.test?gs.test(gu):gs(gu))}if(gt){++this.pos;return gu}},eatWhile:function(gs){var gt=this.pos;while(this.eat(gs)){}return this.pos>gt},eatSpace:function(){var gs=this.pos;while(/[\s\u00a0]/.test(this.string.charAt(this.pos))){++this.pos}return this.pos>gs},skipToEnd:function(){this.pos=this.string.length},skipTo:function(gs){var gt=this.string.indexOf(gs,this.pos);if(gt>-1){this.pos=gt;return true}},backUp:function(gs){this.pos-=gs},column:function(){if(this.lastColumnPos<this.start){this.lastColumnValue=bS(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue);this.lastColumnPos=this.start}return this.lastColumnValue-(this.lineStart?bS(this.string,this.lineStart,this.tabSize):0)},indentation:function(){return bS(this.string,null,this.tabSize)-(this.lineStart?bS(this.string,this.lineStart,this.tabSize):0)},match:function(gw,gt,gs){if(typeof gw=="string"){var gx=function(gy){return gs?gy.toLowerCase():gy};var gv=this.string.substr(this.pos,gw.length);if(gx(gv)==gx(gw)){if(gt!==false){this.pos+=gw.length}return true}}else{var gu=this.string.slice(this.pos).match(gw);if(gu&&gu.index>0){return null}if(gu&&gt!==false){this.pos+=gu[0].length}return gu}},current:function(){return this.string.slice(this.start,this.pos)},hideFirstChars:function(gt,gs){this.lineStart+=gt;try{return gs()}finally{this.lineStart-=gt}}};var a4=0;var P=H.TextMarker=function(gt,gs){this.lines=[];this.type=gs;this.doc=gt;this.id=++a4};bx(P);P.prototype.clear=function(){if(this.explicitlyCleared){return}var gz=this.doc.cm,gt=gz&&!gz.curOp;if(gt){cI(gz)}if(fp(this,"clear")){var gA=this.find();if(gA){ae(this,"clear",gA.from,gA.to)}}var gu=null,gx=null;for(var gv=0;gv<this.lines.length;++gv){var gB=this.lines[gv];var gy=fg(gB.markedSpans,this);if(gz&&!this.collapsed){R(gz,bM(gB),"text")}else{if(gz){if(gy.to!=null){gx=bM(gB)}if(gy.from!=null){gu=bM(gB)}}}gB.markedSpans=eL(gB.markedSpans,gy);if(gy.from==null&&this.collapsed&&!fD(this.doc,gB)&&gz){ge(gB,aX(gz.display))}}if(gz&&this.collapsed&&!gz.options.lineWrapping){for(var gv=0;gv<this.lines.length;++gv){var gs=x(this.lines[gv]),gw=er(gs);if(gw>gz.display.maxLineLength){gz.display.maxLine=gs;gz.display.maxLineLength=gw;gz.display.maxLineChanged=true}}}if(gu!=null&&gz&&this.collapsed){ah(gz,gu,gx+1)}this.lines.length=0;this.explicitlyCleared=true;if(this.atomic&&this.doc.cantEdit){this.doc.cantEdit=false;if(gz){eC(gz.doc)}}if(gz){ae(gz,"markerCleared",gz,this)}if(gt){al(gz)}if(this.parent){this.parent.clear()}};P.prototype.find=function(gv,gt){if(gv==null&&this.type=="bookmark"){gv=1}var gy,gx;for(var gu=0;gu<this.lines.length;++gu){var gs=this.lines[gu];var gw=fg(gs.markedSpans,this);if(gw.from!=null){gy=W(gt?gs:bM(gs),gw.from);if(gv==-1){return gy}}if(gw.to!=null){gx=W(gt?gs:bM(gs),gw.to);if(gv==1){return gx}}}return gy&&{from:gy,to:gx}};P.prototype.changed=function(){var gu=this.find(-1,true),gt=this,gs=this.doc.cm;if(!gu||!gs){return}cM(gs,function(){var gw=gu.line,gx=bM(gu.line);var gv=fi(gs,gx);if(gv){at(gv);gs.curOp.selectionChanged=gs.curOp.forceUpdate=true}gs.curOp.updateMaxLine=true;if(!fD(gt.doc,gw)&&gt.height!=null){var gz=gt.height;gt.height=null;var gy=cY(gt)-gz;if(gy){ge(gw,gw.height+gy)}}})};P.prototype.attachLine=function(gs){if(!this.lines.length&&this.doc.cm){var gt=this.doc.cm.curOp;if(!gt.maybeHiddenMarkers||di(gt.maybeHiddenMarkers,this)==-1){(gt.maybeUnhiddenMarkers||(gt.maybeUnhiddenMarkers=[])).push(this)}}this.lines.push(gs)};P.prototype.detachLine=function(gs){this.lines.splice(di(this.lines,gs),1);if(!this.lines.length&&this.doc.cm){var gt=this.doc.cm.curOp;(gt.maybeHiddenMarkers||(gt.maybeHiddenMarkers=[])).push(this)}};var a4=0;function eJ(gA,gy,gz,gC,gw){if(gC&&gC.shared){return O(gA,gy,gz,gC,gw)}if(gA.cm&&!gA.cm.curOp){return c2(gA.cm,eJ)(gA,gy,gz,gC,gw)}var gv=new P(gA,gw),gB=cf(gy,gz);if(gC){aM(gC,gv,false)}if(gB>0||gB==0&&gv.clearWhenEmpty!==false){return gv}if(gv.replacedWith){gv.collapsed=true;gv.widgetNode=gb("span",[gv.replacedWith],"CodeMirror-widget");if(!gC.handleMouseEvents){gv.widgetNode.setAttribute("cm-ignore-events","true")}if(gC.insertLeft){gv.widgetNode.insertLeft=true}}if(gv.collapsed){if(z(gA,gy.line,gy,gz,gv)||gy.line!=gz.line&&z(gA,gz.line,gy,gz,gv)){throw new Error("Inserting collapsed marker partially overlapping an existing one")}a6=true}if(gv.addToHistory){fU(gA,{from:gy,to:gz,origin:"markText"},gA.sel,NaN)}var gt=gy.line,gx=gA.cm,gs;gA.iter(gt,gz.line+1,function(gD){if(gx&&gv.collapsed&&!gx.options.lineWrapping&&x(gD)==gx.display.maxLine){gs=true}if(gv.collapsed&&gt!=gy.line){ge(gD,0)}cd(gD,new el(gv,gt==gy.line?gy.ch:null,gt==gz.line?gz.ch:null));++gt});if(gv.collapsed){gA.iter(gy.line,gz.line+1,function(gD){if(fD(gA,gD)){ge(gD,0)}})}if(gv.clearOnEnter){bW(gv,"beforeCursorEnter",function(){gv.clear()})}if(gv.readOnly){gl=true;if(gA.history.done.length||gA.history.undone.length){gA.clearHistory()}}if(gv.collapsed){gv.id=++a4;gv.atomic=true}if(gx){if(gs){gx.curOp.updateMaxLine=true}if(gv.collapsed){ah(gx,gy.line,gz.line+1)}else{if(gv.className||gv.title||gv.startStyle||gv.endStyle||gv.css){for(var gu=gy.line;gu<=gz.line;gu++){R(gx,gu,"text")}}}if(gv.atomic){eC(gx.doc)}ae(gx,"markerAdded",gx,gv)}return gv}var y=H.SharedTextMarker=function(gu,gt){this.markers=gu;this.primary=gt;for(var gs=0;gs<gu.length;++gs){gu[gs].parent=this}};bx(y);y.prototype.clear=function(){if(this.explicitlyCleared){return}this.explicitlyCleared=true;for(var gs=0;gs<this.markers.length;++gs){this.markers[gs].clear()}ae(this,"clear")};y.prototype.find=function(gt,gs){return this.primary.find(gt,gs)};function O(gw,gz,gy,gs,gu){gs=aM(gs);gs.shared=false;var gx=[eJ(gw,gz,gy,gs,gu)],gt=gx[0];var gv=gs.widgetNode;d9(gw,function(gB){if(gv){gs.widgetNode=gv.cloneNode(true)}gx.push(eJ(gB,fR(gB,gz),fR(gB,gy),gs,gu));for(var gA=0;gA<gB.linked.length;++gA){if(gB.linked[gA].isParent){return}}gt=fN(gx)});return new y(gx,gt)}function eU(gs){return gs.findMarks(W(gs.first,0),gs.clipPos(W(gs.lastLine())),function(gt){return gt.parent})}function dG(gx,gy){for(var gv=0;gv<gy.length;gv++){var gt=gy[gv],gz=gt.find();var gs=gx.clipPos(gz.from),gw=gx.clipPos(gz.to);if(cf(gs,gw)){var gu=eJ(gx,gs,gw,gt.primary,gt.primary.type);gt.markers.push(gu);gu.parent=gt}}}function es(gv){for(var gu=0;gu<gv.length;gu++){var gs=gv[gu],gx=[gs.primary.doc];d9(gs.primary.doc,function(gy){gx.push(gy)});for(var gt=0;gt<gs.markers.length;gt++){var gw=gs.markers[gt];if(di(gx,gw.doc)==-1){gw.parent=null;gs.markers.splice(gt--,1)}}}}function el(gs,gu,gt){this.marker=gs;this.from=gu;this.to=gt}function fg(gu,gs){if(gu){for(var gt=0;gt<gu.length;++gt){var gv=gu[gt];if(gv.marker==gs){return gv}}}}function eL(gt,gu){for(var gv,gs=0;gs<gt.length;++gs){if(gt[gs]!=gu){(gv||(gv=[])).push(gt[gs])}}return gv}function cd(gs,gt){gs.markedSpans=gs.markedSpans?gs.markedSpans.concat([gt]):[gt];gt.marker.attachLine(gs)}function aP(gt,gu,gy){if(gt){for(var gw=0,gz;gw<gt.length;++gw){var gA=gt[gw],gx=gA.marker;var gs=gA.from==null||(gx.inclusiveLeft?gA.from<=gu:gA.from<gu);if(gs||gA.from==gu&&gx.type=="bookmark"&&(!gy||!gA.marker.insertLeft)){var gv=gA.to==null||(gx.inclusiveRight?gA.to>=gu:gA.to>gu);(gz||(gz=[])).push(new el(gx,gA.from,gv?null:gA.to))}}}return gz}function aA(gt,gv,gy){if(gt){for(var gw=0,gz;gw<gt.length;++gw){var gA=gt[gw],gx=gA.marker;var gu=gA.to==null||(gx.inclusiveRight?gA.to>=gv:gA.to>gv);if(gu||gA.from==gv&&gx.type=="bookmark"&&(!gy||gA.marker.insertLeft)){var gs=gA.from==null||(gx.inclusiveLeft?gA.from<=gv:gA.from<gv);(gz||(gz=[])).push(new el(gx,gs?null:gA.from-gv,gA.to==null?null:gA.to-gv))}}}return gz}function en(gE,gB){if(gB.full){return null}var gA=b8(gE,gB.from.line)&&fm(gE,gB.from.line).markedSpans;var gH=b8(gE,gB.to.line)&&fm(gE,gB.to.line).markedSpans;if(!gA&&!gH){return null}var gt=gB.from.ch,gw=gB.to.ch,gz=cf(gB.from,gB.to)==0;var gy=aP(gA,gt,gz);var gG=aA(gH,gw,gz);var gF=gB.text.length==1,gu=fN(gB.text).length+(gF?gt:0);if(gy){for(var gv=0;gv<gy.length;++gv){var gD=gy[gv];if(gD.to==null){var gI=fg(gG,gD.marker);if(!gI){gD.to=gt}else{if(gF){gD.to=gI.to==null?null:gI.to+gu}}}}}if(gG){for(var gv=0;gv<gG.length;++gv){var gD=gG[gv];if(gD.to!=null){gD.to+=gu}if(gD.from==null){var gI=fg(gy,gD.marker);if(!gI){gD.from=gu;if(gF){(gy||(gy=[])).push(gD)}}}else{gD.from+=gu;if(gF){(gy||(gy=[])).push(gD)}}}}if(gy){gy=q(gy)}if(gG&&gG!=gy){gG=q(gG)}var gx=[gy];if(!gF){var gC=gB.text.length-2,gs;if(gC>0&&gy){for(var gv=0;gv<gy.length;++gv){if(gy[gv].to==null){(gs||(gs=[])).push(new el(gy[gv].marker,null,null))}}}for(var gv=0;gv<gC;++gv){gx.push(gs)}gx.push(gG)}return gx}function q(gt){for(var gs=0;gs<gt.length;++gs){var gu=gt[gs];if(gu.from!=null&&gu.from==gu.to&&gu.marker.clearWhenEmpty!==false){gt.splice(gs--,1)}}if(!gt.length){return null}return gt}function eb(gA,gy){var gs=b3(gA,gy);var gB=en(gA,gy);if(!gs){return gB}if(!gB){return gs}for(var gv=0;gv<gs.length;++gv){var gw=gs[gv],gx=gB[gv];if(gw&&gx){spans:for(var gu=0;gu<gx.length;++gu){var gz=gx[gu];for(var gt=0;gt<gw.length;++gt){if(gw[gt].marker==gz.marker){continue spans}}gw.push(gz)}}else{if(gx){gs[gv]=gx}}}return gs}function cH(gE,gC,gD){var gw=null;gE.iter(gC.line,gD.line+1,function(gF){if(gF.markedSpans){for(var gG=0;gG<gF.markedSpans.length;++gG){var gH=gF.markedSpans[gG].marker;if(gH.readOnly&&(!gw||di(gw,gH)==-1)){(gw||(gw=[])).push(gH)}}}});if(!gw){return null}var gx=[{from:gC,to:gD}];for(var gy=0;gy<gw.length;++gy){var gz=gw[gy],gu=gz.find(0);for(var gv=0;gv<gx.length;++gv){var gt=gx[gv];if(cf(gt.to,gu.from)<0||cf(gt.from,gu.to)>0){continue}var gB=[gv,1],gs=cf(gt.from,gu.from),gA=cf(gt.to,gu.to);if(gs<0||!gz.inclusiveLeft&&!gs){gB.push({from:gt.from,to:gu.from})}if(gA>0||!gz.inclusiveRight&&!gA){gB.push({from:gu.to,to:gt.to})}gx.splice.apply(gx,gB);gv+=gB.length-1}}return gx}function gh(gs){var gu=gs.markedSpans;if(!gu){return}for(var gt=0;gt<gu.length;++gt){gu[gt].marker.detachLine(gs)}gs.markedSpans=null}function c3(gs,gu){if(!gu){return}for(var gt=0;gt<gu.length;++gt){gu[gt].marker.attachLine(gs)}gs.markedSpans=gu}function v(gs){return gs.inclusiveLeft?-1:0}function bV(gs){return gs.inclusiveRight?1:0}function dR(gv,gt){var gx=gv.lines.length-gt.lines.length;if(gx!=0){return gx}var gu=gv.find(),gy=gt.find();var gs=cf(gu.from,gy.from)||v(gv)-v(gt);if(gs){return -gs}var gw=cf(gu.to,gy.to)||bV(gv)-bV(gt);if(gw){return gw}return gt.id-gv.id}function a5(gt,gx){var gs=a6&&gt.markedSpans,gw;if(gs){for(var gv,gu=0;gu<gs.length;++gu){gv=gs[gu];if(gv.marker.collapsed&&(gx?gv.from:gv.to)==null&&(!gw||dR(gw,gv.marker)<0)){gw=gv.marker}}}return gw}function eT(gs){return a5(gs,true)}function ey(gs){return a5(gs,false)}function z(gA,gu,gy,gz,gw){var gD=fm(gA,gu);var gs=a6&&gD.markedSpans;if(gs){for(var gv=0;gv<gs.length;++gv){var gt=gs[gv];if(!gt.marker.collapsed){continue}var gC=gt.marker.find(0);var gB=cf(gC.from,gy)||v(gt.marker)-v(gw);var gx=cf(gC.to,gz)||bV(gt.marker)-bV(gw);if(gB>=0&&gx<=0||gB<=0&&gx>=0){continue}if(gB<=0&&(gt.marker.inclusiveRight&&gw.inclusiveLeft?cf(gC.to,gy)>=0:cf(gC.to,gy)>0)||gB>=0&&(gt.marker.inclusiveRight&&gw.inclusiveLeft?cf(gC.from,gz)<=0:cf(gC.from,gz)<0)){return true}}}}function x(gt){var gs;while(gs=eT(gt)){gt=gs.find(-1,true).line}return gt}function g(gu){var gs,gt;while(gs=ey(gu)){gu=gs.find(1,true).line;(gt||(gt=[])).push(gu)}return gt}function aV(gv,gt){var gs=fm(gv,gt),gu=x(gs);if(gs==gu){return gt}return bM(gu)}function d4(gv,gu){if(gu>gv.lastLine()){return gu}var gt=fm(gv,gu),gs;if(!fD(gv,gt)){return gu}while(gs=ey(gt)){gt=gs.find(1,true).line}return bM(gt)+1}function fD(gw,gt){var gs=a6&&gt.markedSpans;if(gs){for(var gv,gu=0;gu<gs.length;++gu){gv=gs[gu];if(!gv.marker.collapsed){continue}if(gv.from==null){return true}if(gv.marker.widgetNode){continue}if(gv.from==0&&gv.marker.inclusiveLeft&&T(gw,gt,gv)){return true}}}}function T(gx,gt,gv){if(gv.to==null){var gs=gv.marker.find(1,true);return T(gx,gs.line,fg(gs.line.markedSpans,gv.marker))}if(gv.marker.inclusiveRight&&gv.to==gt.text.length){return true}for(var gw,gu=0;gu<gt.markedSpans.length;++gu){gw=gt.markedSpans[gu];if(gw.marker.collapsed&&!gw.marker.widgetNode&&gw.from==gv.to&&(gw.to==null||gw.to!=gv.from)&&(gw.marker.inclusiveLeft||gv.marker.inclusiveRight)&&T(gx,gt,gw)){return true}}}var dC=H.LineWidget=function(gv,gu,gs){if(gs){for(var gt in gs){if(gs.hasOwnProperty(gt)){this[gt]=gs[gt]}}}this.doc=gv;this.node=gu};bx(dC);function d0(gs,gt,gu){if(bL(gt)<((gs.curOp&&gs.curOp.scrollTop)||gs.doc.scrollTop)){cL(gs,null,gu)}}dC.prototype.clear=function(){var gt=this.doc.cm,gv=this.line.widgets,gu=this.line,gx=bM(gu);if(gx==null||!gv){return}for(var gw=0;gw<gv.length;++gw){if(gv[gw]==this){gv.splice(gw--,1)}}if(!gv.length){gu.widgets=null}var gs=cY(this);ge(gu,Math.max(0,gu.height-gs));if(gt){cM(gt,function(){d0(gt,gu,-gs);R(gt,gx,"widget")})}};dC.prototype.changed=function(){var gt=this.height,gs=this.doc.cm,gu=this.line;this.height=null;var gv=cY(this)-gt;if(!gv){return}ge(gu,gu.height+gv);if(gs){cM(gs,function(){gs.curOp.forceUpdate=true;d0(gs,gu,gv)})}};function cY(gu){if(gu.height!=null){return gu.height}var gs=gu.doc.cm;if(!gs){return 0}if(!gj(document.body,gu.node)){var gt="position: relative;";if(gu.coverGutter){gt+="margin-left: -"+gs.display.gutters.offsetWidth+"px;"}if(gu.noHScroll){gt+="width: "+gs.display.wrapper.clientWidth+"px;"}bQ(gs.display.measure,gb("div",[gu.node],null,gt))}return gu.height=gu.node.parentNode.offsetHeight}function bG(gx,gw,gu,gt){var gv=new dC(gx,gu,gt);var gs=gx.cm;if(gs&&gv.noHScroll){gs.display.alignWidgets=true}eD(gx,gw,"widget",function(gz){var gA=gz.widgets||(gz.widgets=[]);if(gv.insertAt==null){gA.push(gv)}else{gA.splice(Math.min(gA.length-1,Math.max(0,gv.insertAt)),0,gv)}gv.line=gz;if(gs&&!fD(gx,gz)){var gy=bL(gz)<gx.scrollTop;ge(gz,gz.height+cY(gv));if(gy){cL(gs,null,gv.height)}gs.curOp.forceUpdate=true}return true});return gv}var gf=H.Line=function(gu,gt,gs){this.text=gu;c3(this,gt);this.height=gs?gs(this):1};bx(gf);gf.prototype.lineNo=function(){return bM(this)};function eq(gt,gw,gu,gs){gt.text=gw;if(gt.stateAfter){gt.stateAfter=null}if(gt.styles){gt.styles=null}if(gt.order!=null){gt.order=null}gh(gt);c3(gt,gu);var gv=gs?gs(gt):1;if(gv!=gt.height){ge(gt,gv)}}function bA(gs){gs.parent=null;gh(gs)}function dj(gu,gt){if(gu){for(;;){var gs=gu.match(/(?:^|\s+)line-(background-)?(\S+)/);if(!gs){break}gu=gu.slice(0,gs.index)+gu.slice(gs.index+gs[0].length);var gv=gs[1]?"bgClass":"textClass";if(gt[gv]==null){gt[gv]=gs[2]}else{if(!(new RegExp("(?:^|s)"+gs[2]+"(?:$|s)")).test(gt[gv])){gt[gv]+=" "+gs[2]}}}}return gu}function fx(gu,gt){if(gu.blankLine){return gu.blankLine(gt)}if(!gu.innerMode){return}var gs=H.innerMode(gu,gt);if(gs.mode.blankLine){return gs.mode.blankLine(gs.state)}}function eE(gx,gw,gv,gs){for(var gt=0;gt<10;gt++){if(gs){gs[0]=H.innerMode(gx,gv).mode}var gu=gx.token(gw,gv);if(gw.pos>gw.start){return gu}}throw new Error("Mode "+gx.name+" failed to advance stream.")}function cq(gB,gz,gw,gv){function gs(gE){return{start:gC.start,end:gC.pos,string:gC.current(),type:gu||null,state:gE?b2(gA.mode,gt):gt}}var gA=gB.doc,gx=gA.mode,gu;gz=fR(gA,gz);var gD=fm(gA,gz.line),gt=dD(gB,gz.line,gw);var gC=new eZ(gD.text,gB.options.tabSize),gy;if(gv){gy=[]}while((gv||gC.pos<gz.ch)&&!gC.eol()){gC.start=gC.pos;gu=eE(gx,gC,gt);if(gv){gy.push(gs(true))}}return gv?gy:gs()}function w(gC,gE,gx,gt,gy,gv,gw){var gu=gx.flattenSpans;if(gu==null){gu=gC.options.flattenSpans}var gA=0,gz=null;var gD=new eZ(gE,gC.options.tabSize),gs;var gG=gC.options.addModeClass&&[null];if(gE==""){dj(fx(gx,gt),gv)}while(!gD.eol()){if(gD.pos>gC.options.maxHighlightLength){gu=false;if(gw){dy(gC,gE,gt,gD.pos)}gD.pos=gE.length;gs=null}else{gs=dj(eE(gx,gD,gt,gG),gv)}if(gG){var gF=gG[0].name;if(gF){gs="m-"+(gs?gF+" "+gs:gF)}}if(!gu||gz!=gs){while(gA<gD.start){gA=Math.min(gD.start,gA+50000);gy(gA,gz)}gz=gs}gD.start=gD.pos}while(gA<gD.pos){var gB=Math.min(gD.pos,gA+50000);gy(gB,gz);gA=gB}}function fG(gz,gB,gs,gw){var gA=[gz.state.modeGen],gv={};w(gz,gB.text,gz.doc.mode,gs,function(gC,gD){gA.push(gC,gD)},gv,gw);for(var gt=0;gt<gz.state.overlays.length;++gt){var gx=gz.state.overlays[gt],gy=1,gu=0;w(gz,gB.text,gx.mode,true,function(gC,gE){var gG=gy;while(gu<gC){var gD=gA[gy];if(gD>gC){gA.splice(gy,1,gC,gA[gy+1],gD)}gy+=2;gu=Math.min(gC,gD)}if(!gE){return}if(gx.opaque){gA.splice(gG,gy-gG,gC,"cm-overlay "+gE);gy=gG+2}else{for(;gG<gy;gG+=2){var gF=gA[gG+1];gA[gG+1]=(gF?gF+" ":"")+"cm-overlay "+gE}}},gv)}return{styles:gA,classes:gv.bgClass||gv.textClass?gv:null}}function c6(gt,gu,gw){if(!gu.styles||gu.styles[0]!=gt.state.modeGen){var gv=dD(gt,bM(gu));var gs=fG(gt,gu,gu.text.length>gt.options.maxHighlightLength?b2(gt.doc.mode,gv):gv);gu.stateAfter=gv;gu.styles=gs.styles;if(gs.classes){gu.styleClasses=gs.classes}else{if(gu.styleClasses){gu.styleClasses=null}}if(gw===gt.doc.frontier){gt.doc.frontier++}}return gu.styles}function dy(gs,gx,gu,gt){var gw=gs.doc.mode;var gv=new eZ(gx,gs.options.tabSize);gv.start=gv.pos=gt||0;if(gx==""){fx(gw,gu)}while(!gv.eol()){eE(gw,gv,gu);gv.start=gv.pos}}var dX={},b0={};function e2(gu,gt){if(!gu||/^\s*$/.test(gu)){return null}var gs=gt.addModeClass?b0:dX;return gs[gu]||(gs[gu]=gu.replace(/\S+/g,"cm-$&"))}function eW(gy,gx){var gw=gb("span",null,null,c0?"padding-right: .1px":null);var gv={pre:gb("pre",[gw],"CodeMirror-line"),content:gw,col:0,pos:0,cm:gy,trailingSpace:false,splitSpaces:(dL||c0)&&gy.getOption("lineWrapping")};gx.measure={};for(var gu=0;gu<=(gx.rest?gx.rest.length:0);gu++){var gA=gu?gx.rest[gu-1]:gx.line,gt;gv.pos=0;gv.addToken=t;if(bN(gy.display.measure)&&(gt=a(gA))){gv.addToken=U(gv.addToken,gt)}gv.map=[];var gs=gx!=gy.display.externalMeasured&&bM(gA);bn(gA,gv,c6(gy,gA,gs));if(gA.styleClasses){if(gA.styleClasses.bgClass){gv.bgClass=f1(gA.styleClasses.bgClass,gv.bgClass||"")}if(gA.styleClasses.textClass){gv.textClass=f1(gA.styleClasses.textClass,gv.textClass||"")}}if(gv.map.length==0){gv.map.push(0,0,gv.content.appendChild(bm(gy.display.measure)))}if(gu==0){gx.measure.map=gv.map;gx.measure.cache={}}else{(gx.measure.maps||(gx.measure.maps=[])).push(gv.map);(gx.measure.caches||(gx.measure.caches=[])).push({})}}if(c0){var gz=gv.content.lastChild;if(/\bcm-tab\b/.test(gz.className)||(gz.querySelector&&gz.querySelector(".cm-tab"))){gv.content.className="cm-tab-wrap-hack"}}aD(gy,"renderLine",gy,gx.line,gv.pre);if(gv.pre.className){gv.textClass=f1(gv.pre.className,gv.textClass||"")}return gv}function fj(gt){var gs=gb("span","\u2022","cm-invalidchar");gs.title="\\u"+gt.charCodeAt(0).toString(16);gs.setAttribute("aria-label",gs.title);return gs}function t(gD,gy,gI,gF,gB,gK,gx){if(!gy){return}var gH=gD.splitSpaces?cF(gy,gD.trailingSpace):gy;var gs=gD.cm.state.specialChars,gt=false;if(!gs.test(gy)){gD.col+=gy.length;var gG=document.createTextNode(gH);gD.map.push(gD.pos,gD.pos+gy.length,gG);if(dL&&k<9){gt=true}gD.pos+=gy.length}else{var gG=document.createDocumentFragment(),gv=0;while(true){gs.lastIndex=gv;var gE=gs.exec(gy);var gJ=gE?gE.index-gv:gy.length-gv;if(gJ){var gA=document.createTextNode(gH.slice(gv,gv+gJ));if(dL&&k<9){gG.appendChild(gb("span",[gA]))}else{gG.appendChild(gA)}gD.map.push(gD.pos,gD.pos+gJ,gA);gD.col+=gJ;gD.pos+=gJ}if(!gE){break}gv+=gJ+1;if(gE[0]=="\t"){var gC=gD.cm.options.tabSize,gz=gC-gD.col%gC;var gA=gG.appendChild(gb("span",cp(gz),"cm-tab"));gA.setAttribute("role","presentation");gA.setAttribute("cm-text","\t");gD.col+=gz}else{if(gE[0]=="\r"||gE[0]=="\n"){var gA=gG.appendChild(gb("span",gE[0]=="\r"?"\u240d":"\u2424","cm-invalidchar"));gA.setAttribute("cm-text",gE[0]);gD.col+=1}else{var gA=gD.cm.options.specialCharPlaceholder(gE[0]);gA.setAttribute("cm-text",gE[0]);if(dL&&k<9){gG.appendChild(gb("span",[gA]))}else{gG.appendChild(gA)}gD.col+=1}}gD.map.push(gD.pos,gD.pos+1,gA);gD.pos++}}gD.trailingSpace=gH.charCodeAt(gy.length-1)==32;if(gI||gF||gB||gt||gx){var gu=gI||"";if(gF){gu+=gF}if(gB){gu+=gB}var gw=gb("span",[gG],gu,gx);if(gK){gw.title=gK}return gD.content.appendChild(gw)}gD.content.appendChild(gG)}function cF(gx,gw){if(gx.length>1&&!/  /.test(gx)){return gx}var gt=gw,gs="";for(var gu=0;gu<gx.length;gu++){var gv=gx.charAt(gu);if(gv==" "&&gt&&(gu==gx.length-1||gx.charCodeAt(gu+1)==32)){gv="\u00a0"}gs+=gv;gt=gv==" "}return gs}function U(gt,gs){return function(gB,gD,gu,gy,gE,gC,gA){gu=gu?gu+" cm-force-border":"cm-force-border";var gv=gB.pos,gx=gv+gD.length;for(;;){for(var gz=0;gz<gs.length;gz++){var gw=gs[gz];if(gw.to>gv&&gw.from<=gv){break}}if(gw.to>=gx){return gt(gB,gD,gu,gy,gE,gC,gA)}gt(gB,gD.slice(0,gw.to-gv),gu,gy,null,gC,gA);gy=null;gD=gD.slice(gw.to-gv);gv=gw.to}}}function ac(gt,gv,gs,gu){var gw=!gu&&gs.widgetNode;if(gw){gt.map.push(gt.pos,gt.pos+gv,gw)}if(!gu&&gt.cm.display.input.needsContentAttribute){if(!gw){gw=gt.content.appendChild(document.createElement("span"))}gw.setAttribute("cm-marker",gs.id)}if(gw){gt.cm.display.input.setUneditable(gw);gt.content.appendChild(gw)}gt.pos+=gv;gt.trailingSpace=false}function bn(gC,gJ,gB){var gx=gC.markedSpans,gz=gC.text,gH=0;if(!gx){for(var gM=1;gM<gB.length;gM+=2){gJ.addToken(gJ,gz.slice(gH,gH=gB[gM]),e2(gB[gM+1],gJ.cm.options))}return}var gN=gz.length,gw=0,gM=1,gF="",gO,gD;var gQ=0,gs,gP,gG,gR,gu;for(;;){if(gQ==gw){gs=gP=gG=gR=gD="";gu=null;gQ=Infinity;var gy=[],gA;for(var gK=0;gK<gx.length;++gK){var gL=gx[gK],gI=gL.marker;if(gI.type=="bookmark"&&gL.from==gw&&gI.widgetNode){gy.push(gI)}else{if(gL.from<=gw&&(gL.to==null||gL.to>gw||gI.collapsed&&gL.to==gw&&gL.from==gw)){if(gL.to!=null&&gL.to!=gw&&gQ>gL.to){gQ=gL.to;gP=""}if(gI.className){gs+=" "+gI.className}if(gI.css){gD=(gD?gD+";":"")+gI.css}if(gI.startStyle&&gL.from==gw){gG+=" "+gI.startStyle}if(gI.endStyle&&gL.to==gQ){(gA||(gA=[])).push(gI.endStyle,gL.to)}if(gI.title&&!gR){gR=gI.title}if(gI.collapsed&&(!gu||dR(gu.marker,gI)<0)){gu=gL}}else{if(gL.from>gw&&gQ>gL.from){gQ=gL.from}}}}if(gA){for(var gK=0;gK<gA.length;gK+=2){if(gA[gK+1]==gQ){gP+=" "+gA[gK]}}}if(!gu||gu.from==gw){for(var gK=0;gK<gy.length;++gK){ac(gJ,0,gy[gK])}}if(gu&&(gu.from||0)==gw){ac(gJ,(gu.to==null?gN+1:gu.to)-gw,gu.marker,gu.from==null);if(gu.to==null){return}if(gu.to==gw){gu=false}}}if(gw>=gN){break}var gE=Math.min(gN,gQ);while(true){if(gF){var gt=gw+gF.length;if(!gu){var gv=gt>gE?gF.slice(0,gE-gw):gF;gJ.addToken(gJ,gv,gO?gO+gs:gs,gG,gw+gv.length==gQ?gP:"",gR,gD)}if(gt>=gE){gF=gF.slice(gE-gw);gw=gE;break}gw=gt;gG=""}gF=gz.slice(gH,gH=gB[gM++]);gO=e2(gB[gM++],gJ.cm.options)}}}function dT(gs,gt){return gt.from.ch==0&&gt.to.ch==0&&fN(gt.text)==""&&(!gs.cm||gs.cm.options.wholeLineUpdateBefore)}function fF(gF,gA,gt,gw){function gG(gI){return gt?gt[gI]:null}function gu(gI,gK,gJ){eq(gI,gK,gJ,gw);ae(gI,"change",gI,gA)}function gs(gL,gJ){for(var gK=gL,gI=[];gK<gJ;++gK){gI.push(new gf(gH[gK],gG(gK),gw))}return gI}var gE=gA.from,gD=gA.to,gH=gA.text;var gB=fm(gF,gE.line),gC=fm(gF,gD.line);var gz=fN(gH),gv=gG(gH.length-1),gy=gD.line-gE.line;if(gA.full){gF.insert(0,gs(0,gH.length));gF.remove(gH.length,gF.size-gH.length)}else{if(dT(gF,gA)){var gx=gs(0,gH.length-1);gu(gC,gC.text,gv);if(gy){gF.remove(gE.line,gy)}if(gx.length){gF.insert(gE.line,gx)}}else{if(gB==gC){if(gH.length==1){gu(gB,gB.text.slice(0,gE.ch)+gz+gB.text.slice(gD.ch),gv)}else{var gx=gs(1,gH.length-1);gx.push(new gf(gz+gB.text.slice(gD.ch),gv,gw));gu(gB,gB.text.slice(0,gE.ch)+gH[0],gG(0));gF.insert(gE.line+1,gx)}}else{if(gH.length==1){gu(gB,gB.text.slice(0,gE.ch)+gH[0]+gC.text.slice(gD.ch),gG(0));gF.remove(gE.line+1,gy)}else{gu(gB,gB.text.slice(0,gE.ch)+gH[0],gG(0));gu(gC,gz+gC.text.slice(gD.ch),gv);var gx=gs(1,gH.length-1);if(gy>1){gF.remove(gE.line+1,gy-1)}gF.insert(gE.line+1,gx)}}}}ae(gF,"change",gF,gA)}function e5(gt){this.lines=gt;this.parent=null;for(var gu=0,gs=0;gu<gt.length;++gu){gt[gu].parent=this;gs+=gt[gu].height}this.height=gs}e5.prototype={chunkSize:function(){return this.lines.length},removeInner:function(gs,gw){for(var gu=gs,gv=gs+gw;gu<gv;++gu){var gt=this.lines[gu];this.height-=gt.height;bA(gt);ae(gt,"delete")}this.lines.splice(gs,gw)},collapse:function(gs){gs.push.apply(gs,this.lines)},insertInner:function(gt,gu,gs){this.height+=gs;this.lines=this.lines.slice(0,gt).concat(gu).concat(this.lines.slice(gt));for(var gv=0;gv<gu.length;++gv){gu[gv].parent=this}},iterN:function(gs,gv,gu){for(var gt=gs+gv;gs<gt;++gs){if(gu(this.lines[gs])){return true}}}};function fE(gv){this.children=gv;var gu=0,gs=0;for(var gt=0;gt<gv.length;++gt){var gw=gv[gt];gu+=gw.chunkSize();gs+=gw.height;gw.parent=this}this.size=gu;this.height=gs;this.parent=null}fE.prototype={chunkSize:function(){return this.size},removeInner:function(gs,gz){this.size-=gz;for(var gu=0;gu<this.children.length;++gu){var gy=this.children[gu],gw=gy.chunkSize();if(gs<gw){var gv=Math.min(gz,gw-gs),gx=gy.height;gy.removeInner(gs,gv);this.height-=gx-gy.height;if(gw==gv){this.children.splice(gu--,1);gy.parent=null}if((gz-=gv)==0){break}gs=0}else{gs-=gw}}if(this.size-gz<25&&(this.children.length>1||!(this.children[0] instanceof e5))){var gt=[];this.collapse(gt);this.children=[new e5(gt)];this.children[0].parent=this}},collapse:function(gs){for(var gt=0;gt<this.children.length;++gt){this.children[gt].collapse(gs)}},insertInner:function(gt,gA,gz){this.size+=gA.length;this.height+=gz;for(var gv=0;gv<this.children.length;++gv){var gs=this.children[gv],gx=gs.chunkSize();if(gt<=gx){gs.insertInner(gt,gA,gz);if(gs.lines&&gs.lines.length>50){var gu=gs.lines.length%25+25;for(var gy=gu;gy<gs.lines.length;){var gw=new e5(gs.lines.slice(gy,gy+=25));gs.height-=gw.height;this.children.splice(++gv,0,gw);gw.parent=this}gs.lines=gs.lines.slice(0,gu);this.maybeSpill()}break}gt-=gx}},maybeSpill:function(){if(this.children.length<=10){return}var gv=this;do{var gt=gv.children.splice(gv.children.length-5,5);var gu=new fE(gt);if(!gv.parent){var gw=new fE(gv.children);gw.parent=gv;gv.children=[gw,gu];gv=gw}else{gv.size-=gu.size;gv.height-=gu.height;var gs=di(gv.parent.children,gv);gv.parent.children.splice(gs+1,0,gu)}gu.parent=gv.parent}while(gv.children.length>10);gv.parent.maybeSpill()},iterN:function(gs,gy,gx){for(var gt=0;gt<this.children.length;++gt){var gw=this.children[gt],gv=gw.chunkSize();if(gs<gv){var gu=Math.min(gy,gv-gs);if(gw.iterN(gs,gu,gx)){return true}if((gy-=gu)==0){break}gs=0}else{gs-=gv}}}};var cr=0;var ar=H.Doc=function(gv,gu,gs,gt){if(!(this instanceof ar)){return new ar(gv,gu,gs,gt)}if(gs==null){gs=0}fE.call(this,[new e5([new gf("",null)])]);this.first=gs;this.scrollTop=this.scrollLeft=0;this.cantEdit=false;this.cleanGeneration=1;this.frontier=gs;var gw=W(gs,0);this.sel=eX(gw);this.history=new f2(null);this.id=++cr;this.modeOption=gu;this.lineSep=gt;this.extend=false;if(typeof gv=="string"){gv=this.splitLines(gv)}fF(this,{from:gw,to:gw,text:gv});bT(this,eX(gw),Z)};ar.prototype=ck(fE.prototype,{constructor:ar,iter:function(gu,gt,gs){if(gs){this.iterN(gu-this.first,gt-gu,gs)}else{this.iterN(this.first,this.first+this.size,gu)}},insert:function(gt,gu){var gs=0;for(var gv=0;gv<gu.length;++gv){gs+=gu[gv].height}this.insertInner(gt-this.first,gu,gs)},remove:function(gs,gt){this.removeInner(gs-this.first,gt)},getValue:function(gt){var gs=a1(this,this.first,this.first+this.size);if(gt===false){return gs}return gs.join(gt||this.lineSeparator())},setValue:cD(function(gt){var gu=W(this.first,0),gs=this.first+this.size-1;bf(this,{from:gu,to:W(gs,fm(this,gs).text.length),text:this.splitLines(gt),origin:"setValue",full:true},true);bT(this,eX(gu))}),replaceRange:function(gt,gv,gu,gs){gv=fR(this,gv);gu=gu?fR(this,gu):gv;a0(this,gt,gv,gu,gs)},getRange:function(gv,gu,gt){var gs=gd(this,fR(this,gv),fR(this,gu));if(gt===false){return gs}return gs.join(gt||this.lineSeparator())},getLine:function(gt){var gs=this.getLineHandle(gt);return gs&&gs.text},getLineHandle:function(gs){if(b8(this,gs)){return fm(this,gs)}},getLineNumber:function(gs){return bM(gs)},getLineHandleVisualStart:function(gs){if(typeof gs=="number"){gs=fm(this,gs)}return x(gs)},lineCount:function(){return this.size},firstLine:function(){return this.first},lastLine:function(){return this.first+this.size-1},clipPos:function(gs){return fR(this,gs)},getCursor:function(gu){var gs=this.sel.primary(),gt;if(gu==null||gu=="head"){gt=gs.head}else{if(gu=="anchor"){gt=gs.anchor}else{if(gu=="end"||gu=="to"||gu===false){gt=gs.to()}else{gt=gs.from()}}}return gt},listSelections:function(){return this.sel.ranges},somethingSelected:function(){return this.sel.somethingSelected()},setCursor:cD(function(gs,gu,gt){F(this,fR(this,typeof gs=="number"?W(gs,gu||0):gs),null,gt)}),setSelection:cD(function(gt,gu,gs){F(this,fR(this,gt),fR(this,gu||gt),gs)}),extendSelection:cD(function(gu,gs,gt){f5(this,fR(this,gu),gs&&fR(this,gs),gt)}),extendSelections:cD(function(gt,gs){av(this,d1(this,gt),gs)}),extendSelectionsBy:cD(function(gu,gs){var gt=bR(this.sel.ranges,gu);av(this,d1(this,gt),gs)}),setSelections:cD(function(gs,gw,gu){if(!gs.length){return}for(var gv=0,gt=[];gv<gs.length;gv++){gt[gv]=new dZ(fR(this,gs[gv].anchor),fR(this,gs[gv].head))}if(gw==null){gw=Math.min(gs.length-1,this.sel.primIndex)}bT(this,cw(gt,gw),gu)}),addSelection:cD(function(gu,gv,gt){var gs=this.sel.ranges.slice(0);gs.push(new dZ(fR(this,gu),fR(this,gv||gu)));bT(this,cw(gs,gs.length-1),gt)}),getSelection:function(gw){var gt=this.sel.ranges,gs;for(var gu=0;gu<gt.length;gu++){var gv=gd(this,gt[gu].from(),gt[gu].to());gs=gs?gs.concat(gv):gv}if(gw===false){return gs}else{return gs.join(gw||this.lineSeparator())}},getSelections:function(gw){var gv=[],gs=this.sel.ranges;for(var gt=0;gt<gs.length;gt++){var gu=gd(this,gs[gt].from(),gs[gt].to());if(gw!==false){gu=gu.join(gw||this.lineSeparator())}gv[gt]=gu}return gv},replaceSelection:function(gu,gw,gs){var gv=[];for(var gt=0;gt<this.sel.ranges.length;gt++){gv[gt]=gu}this.replaceSelections(gv,gw,gs||"+input")},replaceSelections:cD(function(gx,gz,gu){var gw=[],gy=this.sel;for(var gv=0;gv<gy.ranges.length;gv++){var gt=gy.ranges[gv];gw[gv]={from:gt.from(),to:gt.to(),text:this.splitLines(gx[gv]),origin:gu}}var gs=gz&&gz!="end"&&af(this,gw,gz);for(var gv=gw.length-1;gv>=0;gv--){bf(this,gw[gv])}if(gs){fe(this,gs)}else{if(this.cm){fM(this.cm)}}}),undo:cD(function(){b7(this,"undo")}),redo:cD(function(){b7(this,"redo")}),undoSelection:cD(function(){b7(this,"undo",true)}),redoSelection:cD(function(){b7(this,"redo",true)}),setExtending:function(gs){this.extend=gs},getExtending:function(){return this.extend},historySize:function(){var gv=this.history,gs=0,gu=0;for(var gt=0;gt<gv.done.length;gt++){if(!gv.done[gt].ranges){++gs}}for(var gt=0;gt<gv.undone.length;gt++){if(!gv.undone[gt].ranges){++gu}}return{undo:gs,redo:gu}},clearHistory:function(){this.history=new f2(this.history.maxGeneration)},markClean:function(){this.cleanGeneration=this.changeGeneration(true)},changeGeneration:function(gs){if(gs){this.history.lastOp=this.history.lastSelOp=this.history.lastOrigin=null}return this.history.generation},isClean:function(gs){return this.history.generation==(gs||this.cleanGeneration)},getHistory:function(){return{done:bO(this.history.done),undone:bO(this.history.undone)}},setHistory:function(gt){var gs=this.history=new f2(this.history.maxGeneration);gs.done=bO(gt.done.slice(0),null,true);gs.undone=bO(gt.undone.slice(0),null,true)},addLineClass:cD(function(gu,gt,gs){return eD(this,gu,gt=="gutter"?"gutter":"class",function(gv){var gw=gt=="text"?"textClass":gt=="background"?"bgClass":gt=="gutter"?"gutterClass":"wrapClass";if(!gv[gw]){gv[gw]=gs}else{if(S(gs).test(gv[gw])){return false}else{gv[gw]+=" "+gs}}return true})}),removeLineClass:cD(function(gu,gt,gs){return eD(this,gu,gt=="gutter"?"gutter":"class",function(gw){var gz=gt=="text"?"textClass":gt=="background"?"bgClass":gt=="gutter"?"gutterClass":"wrapClass";var gy=gw[gz];if(!gy){return false}else{if(gs==null){gw[gz]=null}else{var gx=gy.match(S(gs));if(!gx){return false}var gv=gx.index+gx[0].length;gw[gz]=gy.slice(0,gx.index)+(!gx.index||gv==gy.length?"":" ")+gy.slice(gv)||null}}return true})}),addLineWidget:cD(function(gu,gt,gs){return bG(this,gu,gt,gs)}),removeLineWidget:function(gs){gs.clear()},markText:function(gu,gt,gs){return eJ(this,fR(this,gu),fR(this,gt),gs,gs&&gs.type||"range")},setBookmark:function(gu,gs){var gt={replacedWith:gs&&(gs.nodeType==null?gs.widget:gs),insertLeft:gs&&gs.insertLeft,clearWhenEmpty:false,shared:gs&&gs.shared,handleMouseEvents:gs&&gs.handleMouseEvents};gu=fR(this,gu);return eJ(this,gu,gu,gt,"bookmark")},findMarksAt:function(gw){gw=fR(this,gw);var gv=[],gt=fm(this,gw.line).markedSpans;if(gt){for(var gs=0;gs<gt.length;++gs){var gu=gt[gs];if((gu.from==null||gu.from<=gw.ch)&&(gu.to==null||gu.to>=gw.ch)){gv.push(gu.marker.parent||gu.marker)}}}return gv},findMarks:function(gw,gv,gs){gw=fR(this,gw);gv=fR(this,gv);var gt=[],gu=gw.line;this.iter(gw.line,gv.line+1,function(gx){var gz=gx.markedSpans;if(gz){for(var gy=0;gy<gz.length;gy++){var gA=gz[gy];if(!(gA.to!=null&&gu==gw.line&&gw.ch>=gA.to||gA.from==null&&gu!=gw.line||gA.from!=null&&gu==gv.line&&gA.from>=gv.ch)&&(!gs||gs(gA.marker))){gt.push(gA.marker.parent||gA.marker)}}}++gu});return gt},getAllMarks:function(){var gs=[];this.iter(function(gu){var gt=gu.markedSpans;if(gt){for(var gv=0;gv<gt.length;++gv){if(gt[gv].from!=null){gs.push(gt[gv].marker)}}}});return gs},posFromIndex:function(gu){var gs,gv=this.first,gt=this.lineSeparator().length;this.iter(function(gw){var gx=gw.text.length+gt;if(gx>gu){gs=gu;return true}gu-=gx;++gv});return fR(this,W(gv,gs))},indexFromPos:function(gu){gu=fR(this,gu);var gs=gu.ch;if(gu.line<this.first||gu.ch<0){return 0}var gt=this.lineSeparator().length;this.iter(this.first,gu.line,function(gv){gs+=gv.text.length+gt});return gs},copy:function(gs){var gt=new ar(a1(this,this.first,this.first+this.size),this.modeOption,this.first,this.lineSep);gt.scrollTop=this.scrollTop;gt.scrollLeft=this.scrollLeft;gt.sel=this.sel;gt.extend=false;if(gs){gt.history.undoDepth=this.history.undoDepth;gt.setHistory(this.getHistory())}return gt},linkedDoc:function(gs){if(!gs){gs={}}var gv=this.first,gu=this.first+this.size;if(gs.from!=null&&gs.from>gv){gv=gs.from}if(gs.to!=null&&gs.to<gu){gu=gs.to}var gt=new ar(a1(this,gv,gu),gs.mode||this.modeOption,gv,this.lineSep);if(gs.sharedHist){gt.history=this.history}(this.linked||(this.linked=[])).push({doc:gt,sharedHist:gs.sharedHist});gt.linked=[{doc:this,isParent:true,sharedHist:gs.sharedHist}];dG(gt,eU(this));return gt},unlinkDoc:function(gt){if(gt instanceof H){gt=gt.doc}if(this.linked){for(var gu=0;gu<this.linked.length;++gu){var gv=this.linked[gu];if(gv.doc!=gt){continue}this.linked.splice(gu,1);gt.unlinkDoc(this);es(eU(this));break}}if(gt.history==this.history){var gs=[gt.id];d9(gt,function(gw){gs.push(gw.id)},true);gt.history=new f2(null);gt.history.done=bO(this.history.done,gs);gt.history.undone=bO(this.history.undone,gs)}},iterLinkedDocs:function(gs){d9(this,gs)},getMode:function(){return this.mode},getEditor:function(){return this.cm},splitLines:function(gs){if(this.lineSep){return gs.split(this.lineSep)}return f0(gs)},lineSeparator:function(){return this.lineSep||"\n"}});ar.prototype.eachLine=ar.prototype.iter;var d="iter insert remove copy getEditor constructor".split(" ");for(var bJ in ar.prototype){if(ar.prototype.hasOwnProperty(bJ)&&di(d,bJ)<0){H.prototype[bJ]=(function(gs){return function(){return gs.apply(this.doc,arguments)}})(ar.prototype[bJ])}}bx(ar);function d9(gv,gu,gt){function gs(gB,gz,gx){if(gB.linked){for(var gy=0;gy<gB.linked.length;++gy){var gw=gB.linked[gy];if(gw.doc==gz){continue}var gA=gx&&gw.sharedHist;if(gt&&!gA){continue}gu(gw.doc,gA);gs(gw.doc,gB,gA)}}}gs(gv,null,true)}function ee(gs,gt){if(gt.cm){throw new Error("This document is already in use.")}gs.doc=gt;gt.cm=gs;X(gs);bq(gs);if(!gs.options.lineWrapping){h(gs)}gs.options.mode=gt.modeOption;ah(gs)}function fm(gv,gx){gx-=gv.first;if(gx<0||gx>=gv.size){throw new Error("There is no line "+(gx+gv.first)+" in the document.")}for(var gs=gv;!gs.lines;){for(var gt=0;;++gt){var gw=gs.children[gt],gu=gw.chunkSize();if(gx<gu){gs=gw;break}gx-=gu}}return gs.lines[gx]}function gd(gu,gw,gs){var gt=[],gv=gw.line;gu.iter(gw.line,gs.line+1,function(gx){var gy=gx.text;if(gv==gs.line){gy=gy.slice(0,gs.ch)}if(gv==gw.line){gy=gy.slice(gw.ch)}gt.push(gy);++gv});return gt}function a1(gt,gv,gu){var gs=[];gt.iter(gv,gu,function(gw){gs.push(gw.text)});return gs}function ge(gt,gs){var gu=gs-gt.height;if(gu){for(var gv=gt;gv;gv=gv.parent){gv.height+=gu}}}function bM(gs){if(gs.parent==null){return null}var gw=gs.parent,gv=di(gw.lines,gs);for(var gt=gw.parent;gt;gw=gt,gt=gt.parent){for(var gu=0;;++gu){if(gt.children[gu]==gw){break}gv+=gt.children[gu].chunkSize()}}return gv+gw.first}function bF(gu,gx){var gz=gu.first;outer:do{for(var gv=0;gv<gu.children.length;++gv){var gy=gu.children[gv],gw=gy.height;if(gx<gw){gu=gy;continue outer}gx-=gw;gz+=gy.chunkSize()}return gz}while(!gu.lines);for(var gv=0;gv<gu.lines.length;++gv){var gt=gu.lines[gv],gs=gt.height;if(gx<gs){break}gx-=gs}return gz+gv}function bL(gu){gu=x(gu);var gw=0,gt=gu.parent;for(var gv=0;gv<gt.lines.length;++gv){var gs=gt.lines[gv];if(gs==gu){break}else{gw+=gs.height}}for(var gx=gt.parent;gx;gt=gx,gx=gt.parent){for(var gv=0;gv<gx.children.length;++gv){var gy=gx.children[gv];if(gy==gt){break}else{gw+=gy.height}}}return gw}function a(gt){var gs=gt.order;if(gs==null){gs=gt.order=bg(gt.text)}return gs}function f2(gs){this.done=[];this.undone=[];this.undoDepth=Infinity;this.lastModTime=this.lastSelTime=0;this.lastOp=this.lastSelOp=null;this.lastOrigin=this.lastSelOrigin=null;this.generation=this.maxGeneration=gs||1}function dv(gs,gu){var gt={from:ci(gu.from),to:cX(gu),text:gd(gs,gu.from,gu.to)};bX(gs,gt,gu.from.line,gu.to.line+1);d9(gs,function(gv){bX(gv,gt,gu.from.line,gu.to.line+1)},true);return gt}function fI(gt){while(gt.length){var gs=fN(gt);if(gs.ranges){gt.pop()}else{break}}}function eR(gt,gs){if(gs){fI(gt.done);return fN(gt.done)}else{if(gt.done.length&&!fN(gt.done).ranges){return fN(gt.done)}else{if(gt.done.length>1&&!gt.done[gt.done.length-2].ranges){gt.done.pop();return fN(gt.done)}}}}function fU(gy,gw,gs,gv){var gu=gy.history;gu.undone.length=0;var gt=+new Date,gz;if((gu.lastOp==gv||gu.lastOrigin==gw.origin&&gw.origin&&((gw.origin.charAt(0)=="+"&&gy.cm&&gu.lastModTime>gt-gy.cm.options.historyEventDelay)||gw.origin.charAt(0)=="*"))&&(gz=eR(gu,gu.lastOp==gv))){var gA=fN(gz.changes);if(cf(gw.from,gw.to)==0&&cf(gw.from,gA.to)==0){gA.to=cX(gw)}else{gz.changes.push(dv(gy,gw))}}else{var gx=fN(gu.done);if(!gx||!gx.ranges){cN(gy.sel,gu.done)}gz={changes:[dv(gy,gw)],generation:gu.generation};gu.done.push(gz);while(gu.done.length>gu.undoDepth){gu.done.shift();if(!gu.done[0].ranges){gu.done.shift()}}}gu.done.push(gs);gu.generation=++gu.maxGeneration;gu.lastModTime=gu.lastSelTime=gt;gu.lastOp=gu.lastSelOp=gv;gu.lastOrigin=gu.lastSelOrigin=gw.origin;if(!gA){aD(gy,"historyAdded")}}function bz(gw,gs,gu,gv){var gt=gs.charAt(0);return gt=="*"||gt=="+"&&gu.ranges.length==gv.ranges.length&&gu.somethingSelected()==gv.somethingSelected()&&new Date-gw.history.lastSelTime<=(gw.cm?gw.cm.options.historyEventDelay:500)}function gk(gx,gv,gs,gu){var gw=gx.history,gt=gu&&gu.origin;if(gs==gw.lastSelOp||(gt&&gw.lastSelOrigin==gt&&(gw.lastModTime==gw.lastSelTime&&gw.lastOrigin==gt||bz(gx,gt,fN(gw.done),gv)))){gw.done[gw.done.length-1]=gv}else{cN(gv,gw.done)}gw.lastSelTime=+new Date;gw.lastSelOrigin=gt;gw.lastSelOp=gs;if(gu&&gu.clearRedo!==false){fI(gw.undone)}}function cN(gt,gs){var gu=fN(gs);if(!(gu&&gu.ranges&&gu.equals(gt))){gs.push(gt)}}function bX(gt,gx,gw,gv){var gs=gx["spans_"+gt.id],gu=0;gt.iter(Math.max(gt.first,gw),Math.min(gt.first+gt.size,gv),function(gy){if(gy.markedSpans){(gs||(gs=gx["spans_"+gt.id]={}))[gu]=gy.markedSpans}++gu})}function bk(gu){if(!gu){return null}for(var gt=0,gs;gt<gu.length;++gt){if(gu[gt].marker.explicitlyCleared){if(!gs){gs=gu.slice(0,gt)}}else{if(gs){gs.push(gu[gt])}}}return !gs?gu:gs.length?gs:null}function b3(gv,gw){var gu=gw["spans_"+gv.id];if(!gu){return null}for(var gt=0,gs=[];gt<gw.text.length;++gt){gs.push(bk(gu[gt]))}return gs}function bO(gD,gv,gC){for(var gy=0,gt=[];gy<gD.length;++gy){var gu=gD[gy];if(gu.ranges){gt.push(gC?gc.prototype.deepCopy.call(gu):gu);continue}var gA=gu.changes,gB=[];gt.push({changes:gB});for(var gx=0;gx<gA.length;++gx){var gz=gA[gx],gw;gB.push({from:gz.from,to:gz.to,text:gz.text});if(gv){for(var gs in gz){if(gw=gs.match(/^spans_(\d+)$/)){if(di(gv,Number(gw[1]))>-1){fN(gB)[gs]=gz[gs];delete gz[gs]}}}}}}return gt}function I(gv,gu,gt,gs){if(gt<gv.line){gv.line+=gs}else{if(gu<gv.line){gv.line=gu;gv.ch=0}}}function fo(gv,gx,gy,gz){for(var gu=0;gu<gv.length;++gu){var gs=gv[gu],gw=true;if(gs.ranges){if(!gs.copied){gs=gv[gu]=gs.deepCopy();gs.copied=true}for(var gt=0;gt<gs.ranges.length;gt++){I(gs.ranges[gt].anchor,gx,gy,gz);I(gs.ranges[gt].head,gx,gy,gz)}continue}for(var gt=0;gt<gs.changes.length;++gt){var gA=gs.changes[gt];if(gy<gA.from.line){gA.from=W(gA.from.line+gz,gA.from.ch);gA.to=W(gA.to.line+gz,gA.to.ch)}else{if(gx<=gA.to.line){gw=false;break}}}if(!gw){gv.splice(0,gu+1);gu=0}}}function dF(gt,gw){var gv=gw.from.line,gu=gw.to.line,gs=gw.text.length-(gu-gv)-1;fo(gt.done,gv,gu,gs);fo(gt.undone,gv,gu,gs)}var cG=H.e_preventDefault=function(gs){if(gs.preventDefault){gs.preventDefault()}else{gs.returnValue=false}};var dr=H.e_stopPropagation=function(gs){if(gs.stopPropagation){gs.stopPropagation()}else{gs.cancelBubble=true}};function bK(gs){return gs.defaultPrevented!=null?gs.defaultPrevented:gs.returnValue==false}var ev=H.e_stop=function(gs){cG(gs);dr(gs)};function L(gs){return gs.target||gs.srcElement}function fV(gt){var gs=gt.which;if(gs==null){if(gt.button&1){gs=1}else{if(gt.button&2){gs=3}else{if(gt.button&4){gs=2}}}}if(b6&&gt.ctrlKey&&gs==1){gs=3}return gs}var bW=H.on=function(gv,gt,gu){if(gv.addEventListener){gv.addEventListener(gt,gu,false)}else{if(gv.attachEvent){gv.attachEvent("on"+gt,gu)}else{var gw=gv._handlers||(gv._handlers={});var gs=gw[gt]||(gw[gt]=[]);gs.push(gu)}}};var fc=[];function eo(gu,gt,gv){var gs=gu._handlers&&gu._handlers[gt];if(gv){return gs&&gs.length>0?gs.slice():fc}else{return gs||fc}}var eg=H.off=function(gw,gu,gv){if(gw.removeEventListener){gw.removeEventListener(gu,gv,false)}else{if(gw.detachEvent){gw.detachEvent("on"+gu,gv)}else{var gs=eo(gw,gu,false);for(var gt=0;gt<gs.length;++gt){if(gs[gt]==gv){gs.splice(gt,1);break}}}}};var aD=H.signal=function(gw,gv){var gs=eo(gw,gv,true);if(!gs.length){return}var gt=Array.prototype.slice.call(arguments,2);for(var gu=0;gu<gs.length;++gu){gs[gu].apply(null,gt)}};var by=null;function ae(gy,gw){var gs=eo(gy,gw,false);if(!gs.length){return}var gu=Array.prototype.slice.call(arguments,2),gx;if(bo){gx=bo.delayedCallbacks}else{if(by){gx=by}else{gx=by=[];setTimeout(aL,0)}}function gt(gz){return function(){gz.apply(null,gu)}}for(var gv=0;gv<gs.length;++gv){gx.push(gt(gs[gv]))}}function aL(){var gs=by;by=null;for(var gt=0;gt<gs.length;++gt){gs[gt]()}}function aQ(gs,gu,gt){if(typeof gu=="string"){gu={type:gu,preventDefault:function(){this.defaultPrevented=true}}}aD(gs,gt||gu.type,gs,gu);return bK(gu)||gu.codemirrorIgnore}function V(gt){var gs=gt._handlers&&gt._handlers.cursorActivity;if(!gs){return}var gv=gt.curOp.cursorActivityHandlers||(gt.curOp.cursorActivityHandlers=[]);for(var gu=0;gu<gs.length;++gu){if(di(gv,gs[gu])==-1){gv.push(gs[gu])}}}function fp(gt,gs){return eo(gt,gs).length>0}function bx(gs){gs.prototype.on=function(gt,gu){bW(this,gt,gu)};gs.prototype.off=function(gt,gu){eg(this,gt,gu)}}var dK=30;var ca=H.Pass={toString:function(){return"CodeMirror.Pass"}};var Z={scroll:false},M={origin:"*mouse"},cW={origin:"+move"};function gr(){this.id=null}gr.prototype.set=function(gs,gt){clearTimeout(this.id);this.id=setTimeout(gt,gs)};var bS=H.countColumn=function(gv,gt,gx,gy,gu){if(gt==null){gt=gv.search(/[^\s\u00a0]/);if(gt==-1){gt=gv.length}}for(var gw=gy||0,gz=gu||0;;){var gs=gv.indexOf("\t",gw);if(gs<0||gs>=gt){return gz+(gt-gw)}gz+=gs-gw;gz+=gx-(gz%gx);gw=gs+1}};var eu=H.findColumn=function(gw,gv,gx){for(var gy=0,gu=0;;){var gt=gw.indexOf("\t",gy);if(gt==-1){gt=gw.length}var gs=gt-gy;if(gt==gw.length||gu+gs>=gv){return gy+Math.min(gs,gv-gu)}gu+=gt-gy;gu+=gx-(gu%gx);gy=gt+1;if(gu>=gv){return gy}}};var aZ=[""];function cp(gs){while(aZ.length<=gs){aZ.push(fN(aZ)+" ")}return aZ[gs]}function fN(gs){return gs[gs.length-1]}var dM=function(gs){gs.select()};if(e7){dM=function(gs){gs.selectionStart=0;gs.selectionEnd=gs.value.length}}else{if(dL){dM=function(gt){try{gt.select()}catch(gs){}}}}function di(gu,gs){for(var gt=0;gt<gu.length;++gt){if(gu[gt]==gs){return gt}}return -1}function bR(gv,gu){var gs=[];for(var gt=0;gt<gv.length;gt++){gs[gt]=gu(gv[gt],gt)}return gs}function b9(gw,gt,gu){var gv=0,gs=gu(gt);while(gv<gw.length&&gu(gw[gv])<=gs){gv++}gw.splice(gv,0,gt)}function f3(){}function ck(gu,gs){var gt;if(Object.create){gt=Object.create(gu)}else{f3.prototype=gu;gt=new f3()}if(gs){aM(gs,gt)}return gt}function aM(gu,gt,gs){if(!gt){gt={}}for(var gv in gu){if(gu.hasOwnProperty(gv)&&(gs!==false||!gt.hasOwnProperty(gv))){gt[gv]=gu[gv]}}return gt}function cv(gt){var gs=Array.prototype.slice.call(arguments,1);return function(){return gt.apply(null,gs)}}var bb=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;var fK=H.isWordChar=function(gs){return/\w/.test(gs)||gs>"\x80"&&(gs.toUpperCase()!=gs.toLowerCase()||bb.test(gs))};function cA(gs,gt){if(!gt){return fK(gs)}if(gt.source.indexOf("\\w")>-1&&fK(gs)){return true}return gt.test(gs)}function e0(gs){for(var gt in gs){if(gs.hasOwnProperty(gt)&&gs[gt]){return false}}return true}var eO=/[\u0300-\u036f\u0483-\u0489\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065e\u0670\u06d6-\u06dc\u06de-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0900-\u0902\u093c\u0941-\u0948\u094d\u0951-\u0955\u0962\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2\u09e3\u0a01\u0a02\u0a3c\u0a41\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81\u0a82\u0abc\u0ac1-\u0ac5\u0ac7\u0ac8\u0acd\u0ae2\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86\u0f87\u0f90-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039\u103a\u103d\u103e\u1058\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085\u1086\u108d\u109d\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193b\u1a17\u1a18\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80\u1b81\u1ba2-\u1ba5\u1ba8\u1ba9\u1c2c-\u1c33\u1c36\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1dc0-\u1de6\u1dfd-\u1dff\u200c\u200d\u20d0-\u20f0\u2cef-\u2cf1\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f-\ua672\ua67c\ua67d\ua6f0\ua6f1\ua802\ua806\ua80b\ua825\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\uaa29-\uaa2e\uaa31\uaa32\uaa35\uaa36\uaa43\uaa4c\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uabe5\uabe8\uabed\udc00-\udfff\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\uff9e\uff9f]/;function fw(gs){return gs.charCodeAt(0)>=768&&eO.test(gs)}function gb(gs,gw,gv,gu){var gx=document.createElement(gs);if(gv){gx.className=gv}if(gu){gx.style.cssText=gu}if(typeof gw=="string"){gx.appendChild(document.createTextNode(gw))}else{if(gw){for(var gt=0;gt<gw.length;++gt){gx.appendChild(gw[gt])}}}return gx}var cl;if(document.createRange){cl=function(gv,gw,gt,gs){var gu=document.createRange();gu.setEnd(gs||gv,gt);gu.setStart(gv,gw);return gu}}else{cl=function(gu,gw,gs){var gt=document.body.createTextRange();try{gt.moveToElementText(gu.parentNode)}catch(gv){return gt}gt.collapse(true);gt.moveEnd("character",gs);gt.moveStart("character",gw);return gt}}function d3(gt){for(var gs=gt.childNodes.length;gs>0;--gs){gt.removeChild(gt.firstChild)}return gt}function bQ(gs,gt){return d3(gs).appendChild(gt)}var gj=H.contains=function(gs,gt){if(gt.nodeType==3){gt=gt.parentNode}if(gs.contains){return gs.contains(gt)}do{if(gt.nodeType==11){gt=gt.host}if(gt==gs){return true}}while(gt=gt.parentNode)};function dP(){var gs=document.activeElement;while(gs&&gs.root&&gs.root.activeElement){gs=gs.root.activeElement}return gs}if(dL&&k<11){dP=function(){try{return document.activeElement}catch(gs){return document.body}}}function S(gs){return new RegExp("(^|\\s)"+gs+"(?:$|\\s)\\s*")}var f=H.rmClass=function(gu,gs){var gv=gu.className;var gt=S(gs).exec(gv);if(gt){var gw=gv.slice(gt.index+gt[0].length);gu.className=gv.slice(0,gt.index)+(gw?gt[1]+gw:"")}};var fH=H.addClass=function(gt,gs){var gu=gt.className;if(!S(gs).test(gu)){gt.className+=(gu?" ":"")+gs}};function f1(gu,gs){var gt=gu.split(" ");for(var gv=0;gv<gt.length;gv++){if(gt[gv]&&!S(gt[gv]).test(gs)){gs+=" "+gt[gv]}}return gs}function az(gv){if(!document.body.getElementsByClassName){return}var gu=document.body.getElementsByClassName("CodeMirror");for(var gt=0;gt<gu.length;gt++){var gs=gu[gt].CodeMirror;if(gs){gv(gs)}}}var cC=false;function bi(){if(cC){return}fL();cC=true}function fL(){var gs;bW(window,"resize",function(){if(gs==null){gs=setTimeout(function(){gs=null;az(aS)},100)}});bW(window,"blur",function(){az(aU)})}var eQ=function(){if(dL&&k<9){return false}var gs=gb("div");return"draggable" in gs||"dragDrop" in gs}();var fT;function bm(gs){if(fT==null){var gu=gb("span","\u200b");bQ(gs,gb("span",[gu,document.createTextNode("x")]));if(gs.firstChild.offsetHeight!=0){fT=gu.offsetWidth<=1&&gu.offsetHeight>2&&!(dL&&k<8)}}var gt=fT?gb("span","\u200b"):gb("span","\u00a0",null,"display: inline-block; width: 1px; margin-right: -1px");gt.setAttribute("cm-text","");return gt}var fS;function bN(gv){if(fS!=null){return fS}var gs=bQ(gv,document.createTextNode("A\u062eA"));var gu=cl(gs,0,1).getBoundingClientRect();var gt=cl(gs,1,2).getBoundingClientRect();d3(gv);if(!gu||gu.left==gu.right){return false}return fS=(gt.right-gu.right<3)}var f0=H.splitLines="\n\nb".split(/\n/).length!=3?function(gx){var gy=0,gs=[],gw=gx.length;while(gy<=gw){var gv=gx.indexOf("\n",gy);if(gv==-1){gv=gx.length}var gu=gx.slice(gy,gx.charAt(gv-1)=="\r"?gv-1:gv);var gt=gu.indexOf("\r");if(gt!=-1){gs.push(gu.slice(0,gt));gy+=gt+1}else{gs.push(gu);gy=gv+1}}return gs}:function(gs){return gs.split(/\r\n?|\n/)};var br=window.getSelection?function(gt){try{return gt.selectionStart!=gt.selectionEnd}catch(gs){return false}}:function(gu){try{var gs=gu.ownerDocument.selection.createRange()}catch(gt){}if(!gs||gs.parentElement()!=gu){return false}return gs.compareEndPoints("StartToEnd",gs)!=0};var da=(function(){var gs=gb("div");if("oncopy" in gs){return true}gs.setAttribute("oncopy","return;");return typeof gs.oncopy=="function"})();var fd=null;function aJ(gt){if(fd!=null){return fd}var gu=bQ(gt,gb("span","x"));var gv=gu.getBoundingClientRect();var gs=cl(gu,0,1).getBoundingClientRect();return fd=Math.abs(gv.left-gs.left)>1}var fn=H.keyNames={3:"Enter",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",61:"=",91:"Mod",92:"Mod",93:"Mod",106:"*",107:"=",109:"-",110:".",111:"/",127:"Delete",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",63232:"Up",63233:"Down",63234:"Left",63235:"Right",63272:"Delete",63273:"Home",63275:"End",63276:"PageUp",63277:"PageDown",63302:"Insert"};(function(){for(var gs=0;gs<10;gs++){fn[gs+48]=fn[gs+96]=String(gs)}for(var gs=65;gs<=90;gs++){fn[gs]=String.fromCharCode(gs)}for(var gs=1;gs<=12;gs++){fn[gs+111]=fn[gs+63235]="F"+gs}})();function d6(gs,gy,gx,gw){if(!gs){return gw(gy,gx,"ltr")}var gv=false;for(var gu=0;gu<gs.length;++gu){var gt=gs[gu];if(gt.from<gx&&gt.to>gy||gy==gx&&gt.to==gy){gw(Math.max(gt.from,gy),Math.min(gt.to,gx),gt.level==1?"rtl":"ltr");gv=true}}if(!gv){gw(gy,gx,"ltr")}}function dz(gs){return gs.level%2?gs.to:gs.from}function gm(gs){return gs.level%2?gs.from:gs.to}function cE(gt){var gs=a(gt);return gs?dz(gs[0]):0}function cS(gt){var gs=a(gt);if(!gs){return gt.text.length}return gm(fN(gs))}function bs(gt,gw){var gu=fm(gt.doc,gw);var gx=x(gu);if(gx!=gu){gw=bM(gx)}var gs=a(gx);var gv=!gs?0:gs[0].level%2?cS(gx):cE(gx);return W(gw,gv)}function dQ(gu,gx){var gt,gv=fm(gu.doc,gx);while(gt=ey(gv)){gv=gt.find(1,true).line;gx=null}var gs=a(gv);var gw=!gs?gv.text.length:gs[0].level%2?cE(gv):cS(gv);return W(gx==null?bM(gv):gx,gw)}function dJ(gt,gy){var gx=bs(gt,gy.line);var gu=fm(gt.doc,gx.line);var gs=a(gu);if(!gs||gs[0].level==0){var gw=Math.max(0,gu.text.search(/\S/));var gv=gy.line==gx.line&&gy.ch<=gw&&gy.ch;return W(gx.line,gv?0:gw)}return gx}function am(gt,gu,gs){var gv=gt[0].level;if(gu==gv){return true}if(gs==gv){return false}return gu<gs}var e8;function aF(gs,gw){e8=null;for(var gt=0,gu;gt<gs.length;++gt){var gv=gs[gt];if(gv.from<gw&&gv.to>gw){return gt}if((gv.from==gw||gv.to==gw)){if(gu==null){gu=gt}else{if(am(gs,gv.level,gs[gu].level)){if(gv.from!=gv.to){e8=gu}return gt}else{if(gv.from!=gv.to){e8=gt}return gu}}}}return gu}function fl(gs,gv,gt,gu){if(!gu){return gv+gt}do{gv+=gt}while(gv>0&&fw(gs.text.charAt(gv)));return gv}function u(gs,gz,gu,gv){var gw=a(gs);if(!gw){return ai(gs,gz,gu,gv)}var gy=aF(gw,gz),gt=gw[gy];var gx=fl(gs,gz,gt.level%2?-gu:gu,gv);for(;;){if(gx>gt.from&&gx<gt.to){return gx}if(gx==gt.from||gx==gt.to){if(aF(gw,gx)==gy){return gx}gt=gw[gy+=gu];return(gu>0)==gt.level%2?gt.to:gt.from}else{gt=gw[gy+=gu];if(!gt){return null}if((gu>0)==gt.level%2){gx=fl(gs,gt.to,-1,gv)}else{gx=fl(gs,gt.from,1,gv)}}}}function ai(gs,gw,gt,gu){var gv=gw+gt;if(gu){while(gv>0&&fw(gs.text.charAt(gv))){gv+=gt}}return gv<0||gv>gs.text.length?null:gv}var bg=(function(){var gy="bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLN";var gw="rrrrrrrrrrrr,rNNmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmrrrrrrrnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmNmmmm";function gv(gC){if(gC<=247){return gy.charAt(gC)}else{if(1424<=gC&&gC<=1524){return"R"}else{if(1536<=gC&&gC<=1773){return gw.charAt(gC-1536)}else{if(1774<=gC&&gC<=2220){return"r"}else{if(8192<=gC&&gC<=8203){return"w"}else{if(gC==8204){return"b"}else{return"L"}}}}}}}var gs=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;var gB=/[stwN]/,gu=/[LRr]/,gt=/[Lb1n]/,gx=/[1n]/;var gA="L";function gz(gE,gD,gC){this.level=gE;this.from=gD;this.to=gC}return function(gM){if(!gs.test(gM)){return false}var gS=gM.length,gI=[];for(var gR=0,gE;gR<gS;++gR){gI.push(gE=gv(gM.charCodeAt(gR)))}for(var gR=0,gL=gA;gR<gS;++gR){var gE=gI[gR];if(gE=="m"){gI[gR]=gL}else{gL=gE}}for(var gR=0,gC=gA;gR<gS;++gR){var gE=gI[gR];if(gE=="1"&&gC=="r"){gI[gR]="n"}else{if(gu.test(gE)){gC=gE;if(gE=="r"){gI[gR]="R"}}}}for(var gR=1,gL=gI[0];gR<gS-1;++gR){var gE=gI[gR];if(gE=="+"&&gL=="1"&&gI[gR+1]=="1"){gI[gR]="1"}else{if(gE==","&&gL==gI[gR+1]&&(gL=="1"||gL=="n")){gI[gR]=gL}}gL=gE}for(var gR=0;gR<gS;++gR){var gE=gI[gR];if(gE==","){gI[gR]="N"}else{if(gE=="%"){for(var gF=gR+1;gF<gS&&gI[gF]=="%";++gF){}var gT=(gR&&gI[gR-1]=="!")||(gF<gS&&gI[gF]=="1")?"1":"N";for(var gP=gR;gP<gF;++gP){gI[gP]=gT}gR=gF-1}}}for(var gR=0,gC=gA;gR<gS;++gR){var gE=gI[gR];if(gC=="L"&&gE=="1"){gI[gR]="L"}else{if(gu.test(gE)){gC=gE}}}for(var gR=0;gR<gS;++gR){if(gB.test(gI[gR])){for(var gF=gR+1;gF<gS&&gB.test(gI[gF]);++gF){}var gJ=(gR?gI[gR-1]:gA)=="L";var gD=(gF<gS?gI[gF]:gA)=="L";var gT=gJ||gD?"L":"R";for(var gP=gR;gP<gF;++gP){gI[gP]=gT}gR=gF-1}}var gQ=[],gN;for(var gR=0;gR<gS;){if(gt.test(gI[gR])){var gG=gR;for(++gR;gR<gS&&gt.test(gI[gR]);++gR){}gQ.push(new gz(0,gG,gR))}else{var gH=gR,gK=gQ.length;for(++gR;gR<gS&&gI[gR]!="L";++gR){}for(var gP=gH;gP<gR;){if(gx.test(gI[gP])){if(gH<gP){gQ.splice(gK,0,new gz(1,gH,gP))}var gO=gP;for(++gP;gP<gR&&gx.test(gI[gP]);++gP){}gQ.splice(gK,0,new gz(2,gO,gP));gH=gP}else{++gP}}if(gH<gR){gQ.splice(gK,0,new gz(1,gH,gR))}}}if(gQ[0].level==1&&(gN=gM.match(/^\s+/))){gQ[0].from=gN[0].length;gQ.unshift(new gz(0,0,gN[0].length))}if(fN(gQ).level==1&&(gN=gM.match(/\s+$/))){fN(gQ).to-=gN[0].length;gQ.push(new gz(0,gS-gN[0].length,gS))}if(gQ[0].level==2){gQ.unshift(new gz(1,gQ[0].to,gQ[0].to))}if(gQ[0].level!=fN(gQ).level){gQ.push(new gz(gQ[0].level,gS,gS))}return gQ}})();H.version="5.18.2";return H});